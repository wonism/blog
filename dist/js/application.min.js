var ua=window.navigator.userAgent.toLowerCase(),isIe=!!ua.match(/msie/),isMobile=!!ua.match(/iphone|ipad|ipod|android|blackberry|iemobile/),isIos=!!ua.match(/iphone|ipad|ipod/),isAnd=!!ua.match(/android/),ieVersion=ua.match(/trident/)?11:ua.match(/msie/)?ua.split(/msie/)[1].split(/\;/)[0]:0;document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),ready(),common()},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),common())}),document.querySelectorAll||(document.querySelectorAll=function(e){var t,n,i;for(t=document.createElement("style"),n=[],i=void 0,document.documentElement.firstChild.appendChild(t),document._qsa=[],t.styleSheet.cssText=e+"{ x-qsa: expression(document._qsa && document._qsa.push(this)) }",window.scrollBy(0,0),t.parentNode.removeChild(t);document._qsa.length;)i=document._qsa.shift(),i.style.removeAttribute("x-qsa"),n.push(i);return document._qsa=null,n}),document.querySelector||(document.querySelector=function(e){var t=document.querySelectorAll(e);return t.length?t[0]:null}),"document"in self&&("classList"in document.createElement("_")?!function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,i=arguments.length;for(n=0;i>n;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}():!function(e){"use strict";if("Element"in e){var t="classList",n="prototype",i=e.Element[n],s=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},c=function(e,t){if(""===t)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},l=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},u=l[n]=[],d=function(){return new l(this)};if(r[n]=Error[n],u.item=function(e){return this[e]||null},u.contains=function(e){return e+="",-1!==c(this,e)},u.add=function(){var e,t=arguments,n=0,i=t.length,s=!1;do e=t[n]+"",-1===c(this,e)&&(this.push(e),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var e,t,n=arguments,i=0,s=n.length,o=!1;do for(e=n[i]+"",t=c(this,e);-1!==t;)this.splice(t,1),o=!0,t=c(this,e);while(++i<s);o&&this._updateClassName()},u.toggle=function(e,t){e+="";var n=this.contains(e),i=n?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!n},u.toString=function(){return this.join(" ")},s.defineProperty){var m={get:d,enumerable:!0,configurable:!0};try{s.defineProperty(i,t,m)}catch(h){-2146823252===h.number&&(m.enumerable=!1,s.defineProperty(i,t,m))}}else s[n].__defineGetter__&&i.__defineGetter__(t,d)}}(self));var supportPageOffset=void 0!==window.pageXOffset,isCSS1Compat="CSS1Compat"===(document.compatMode||""),userBrowser=window.navigator.userAgent,isOlderIE=!!userBrowser.match(/MSIE [4-8]/),isMobile=!!userBrowser.toLowerCase().match(/android | webos | iphone | ipad | ipod | blackberry | windows phone/),w=document.documentElement.clientWidth,h=document.documentElement.clientHeight,x=supportPageOffset?window.pageXOffset:isCSS1Compat?document.documentElement.scrollLeft:document.body.scrollLeft,y=supportPageOffset?window.pageYOffset:isCSS1Compat?document.documentElement.scrollTop:document.body.scrollTop,currentX=x,currentY=y,addEvent=function(e,t,n){var i,s,o,a;for(a=function(e){var t=e||window.event;return t.target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1,t.defaultPrevented=!0}),n.call(this,t)},t=t.split(" "),s=0,o=t.length;o>s;s++)i=t[s],e.addEventListener?e.addEventListener(i,n,!1):e.attachEvent("on"+i,a)},jj=function(e){return e.match(/\s/g)?document.querySelectorAll(e):e.match(/^\#/)?document.getElementById(e.replace(/^\#/,"")):e.match(/^\./)?document.getElementsByClassName(e.replace(/^\./,"")):document.getElementsByTagName(e)},common=function(){var e=jj("#header .hamburger")[0],t=jj("#slide-navigator .hamburger")[0],n=jj("#slide-navigator"),i=jj("#header ul li"),s=jj("#footer .list-sns a");addEvent(e,"click",function(e){var i=this.classList;i.contains("active")||(this.classList.add("active"),n.classList.add("active"),setTimeout(function(){n.classList.add("visible")},100),t.classList.add("active"),ga("send","event","상단 네비게이션 바","Button Press","햄버거 버튼 클릭(메뉴 열기)"))}),addEvent(t,"click",function(t){var i=this.classList;i.contains("active")&&(this.classList.remove("active"),n.classList.remove("visible"),setTimeout(function(){n.classList.remove("active")},500),e.classList.remove("active"),ga("send","event","상단 네비게이션 바","Button Press","햄버거 버튼 클릭(메뉴 듣기)"))});for(var o=0,a=i.length;a>o;o++)addEvent(i[o],"click",function(){ga("send","event","상단 네비게이션 바","Button Press",this.getElementsByTagName("a")[0].textContent+" 클릭")});for(var r=0,c=s.length;c>r;r++)addEvent(s[r],"click",function(){ga("send","event","하단 바","Button Press",this.getAttribute("href"))})};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcGxpY2F0aW9uLm1pbi5qcyJdLCJuYW1lcyI6WyJ1YSIsIndpbmRvdyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiaXNJZSIsIm1hdGNoIiwiaXNNb2JpbGUiLCJpc0lvcyIsImlzQW5kIiwiaWVWZXJzaW9uIiwic3BsaXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYXJndW1lbnRzIiwiY2FsbGVlIiwicmVhZHkiLCJjb21tb24iLCJhdHRhY2hFdmVudCIsInJlYWR5U3RhdGUiLCJkZXRhY2hFdmVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZWxlY3RvcnMiLCJzdHlsZSIsImVsZW1lbnRzIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ1bmRlZmluZWQiLCJkb2N1bWVudEVsZW1lbnQiLCJmaXJzdENoaWxkIiwiYXBwZW5kQ2hpbGQiLCJfcXNhIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJzY3JvbGxCeSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImxlbmd0aCIsInNoaWZ0IiwicmVtb3ZlQXR0cmlidXRlIiwicHVzaCIsInF1ZXJ5U2VsZWN0b3IiLCJzZWxmIiwidGVzdEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJjb250YWlucyIsImNyZWF0ZU1ldGhvZCIsIm1ldGhvZCIsIm9yaWdpbmFsIiwiRE9NVG9rZW5MaXN0IiwicHJvdG90eXBlIiwidG9rZW4iLCJpIiwibGVuIiwiY2FsbCIsInRoaXMiLCJ0b2dnbGUiLCJfdG9nZ2xlIiwiZm9yY2UiLCJ2aWV3IiwiY2xhc3NMaXN0UHJvcCIsInByb3RvUHJvcCIsImVsZW1DdHJQcm90byIsIkVsZW1lbnQiLCJvYmpDdHIiLCJPYmplY3QiLCJzdHJUcmltIiwiU3RyaW5nIiwidHJpbSIsInJlcGxhY2UiLCJhcnJJbmRleE9mIiwiQXJyYXkiLCJpbmRleE9mIiwiaXRlbSIsIkRPTUV4IiwidHlwZSIsIm1lc3NhZ2UiLCJuYW1lIiwiY29kZSIsIkRPTUV4Y2VwdGlvbiIsImNoZWNrVG9rZW5BbmRHZXRJbmRleCIsInRlc3QiLCJDbGFzc0xpc3QiLCJlbGVtIiwidHJpbW1lZENsYXNzZXMiLCJnZXRBdHRyaWJ1dGUiLCJjbGFzc2VzIiwiX3VwZGF0ZUNsYXNzTmFtZSIsInNldEF0dHJpYnV0ZSIsInRvU3RyaW5nIiwiY2xhc3NMaXN0UHJvdG8iLCJjbGFzc0xpc3RHZXR0ZXIiLCJFcnJvciIsInRva2VucyIsImwiLCJ1cGRhdGVkIiwicmVtb3ZlIiwiaW5kZXgiLCJzcGxpY2UiLCJyZXN1bHQiLCJqb2luIiwiZGVmaW5lUHJvcGVydHkiLCJjbGFzc0xpc3RQcm9wRGVzYyIsImdldCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJleCIsIm51bWJlciIsIl9fZGVmaW5lR2V0dGVyX18iLCJzdXBwb3J0UGFnZU9mZnNldCIsInBhZ2VYT2Zmc2V0IiwiaXNDU1MxQ29tcGF0IiwiY29tcGF0TW9kZSIsInVzZXJCcm93c2VyIiwiaXNPbGRlcklFIiwidyIsImNsaWVudFdpZHRoIiwiaCIsImNsaWVudEhlaWdodCIsIngiLCJzY3JvbGxMZWZ0IiwiYm9keSIsInkiLCJwYWdlWU9mZnNldCIsInNjcm9sbFRvcCIsImN1cnJlbnRYIiwiY3VycmVudFkiLCJhZGRFdmVudCIsImV2ZW50cyIsImNhbGxiYWNrIiwiZXZlbnQiLCJldmVudENvdW50ZXIiLCJldmVudExlbmd0aCIsIm1vZGVyYXRvciIsImUiLCJ0YXJnZXQiLCJzcmNFbGVtZW50IiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsImRlZmF1bHRQcmV2ZW50ZWQiLCJqaiIsInNlbGVjdG9yIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJoZWFkZXJIYW1idXJnZXIiLCJuYXZpZ2F0b3JIYW1idXJnZXIiLCJoZWFkZXJNZW51cyIsImZvb3Rlck1lbnVzIiwidGhpc0NsYXNzTGlzdCIsInNldFRpbWVvdXQiLCJnYSIsImhtZW51Q291bnRlciIsImhtZW51TGVuZ3RoIiwidGV4dENvbnRlbnQiLCJmbWVudUNvdW50ZXIiLCJmbWVudUxlbmd0aCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsSUFBS0MsT0FBT0MsVUFBVUMsVUFBVUMsY0FDaENDLE9BQU9MLEdBQUdNLE1BQU0sUUFDaEJDLFdBQVdQLEdBQUdNLE1BQU0sZ0RBQ3BCRSxRQUFRUixHQUFHTSxNQUFNLG9CQUNqQkcsUUFBUVQsR0FBR00sTUFBTSxXQUNqQkksVUFBWVYsR0FBR00sTUFBTSxXQUFhLEdBQUtOLEdBQUdNLE1BQU0sUUFBVU4sR0FBR1csTUFBTSxRQUFRLEdBQUdBLE1BQU0sTUFBTSxHQUFLLENBRS9GQyxVQUFTQyxpQkFDWEQsU0FBU0MsaUJBQWlCLG1CQUFvQixXQUM1Q0QsU0FBU0Usb0JBQW9CLG1CQUFvQkMsVUFBVUMsUUFBUSxHQUNuRUMsUUFDQUMsV0FDQyxHQUNNTixTQUFTTyxhQUNsQlAsU0FBU08sWUFBWSxxQkFBc0IsV0FDYixhQUF4QlAsU0FBU1EsYUFDWFIsU0FBU1MsWUFBWSxxQkFBc0JOLFVBQVVDLFFBQ3JERSxZQU1ETixTQUFTVSxtQkFDWlYsU0FBU1UsaUJBQW1CLFNBQVVDLEdBQ3BDLEdBQUlDLEdBQU9DLEVBQVVDLENBYXJCLEtBWEFGLEVBQVFaLFNBQVNlLGNBQWMsU0FDL0JGLEtBQ0FDLEVBQVVFLE9BRVZoQixTQUFTaUIsZ0JBQWdCQyxXQUFXQyxZQUFZUCxHQUNoRFosU0FBU29CLFFBRVRSLEVBQU1TLFdBQVdDLFFBQVVYLEVBQVksbUVBQ3ZDdEIsT0FBT2tDLFNBQVMsRUFBRyxHQUNuQlgsRUFBTVksV0FBV0MsWUFBWWIsR0FFdEJaLFNBQVNvQixLQUFLTSxRQUNuQlosRUFBVWQsU0FBU29CLEtBQUtPLFFBQ3hCYixFQUFRRixNQUFNZ0IsZ0JBQWdCLFNBQzlCZixFQUFTZ0IsS0FBS2YsRUFJaEIsT0FEQWQsVUFBU29CLEtBQU8sS0FDVFAsSUFJTmIsU0FBUzhCLGdCQUNa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LFNBQVNxQixFQUFZTyxHQUFlLFFBQVMsV0FDM0NKLEdBQUcsT0FBUSxRQUFTLE9BQVEsZUFBZ0JoRyxLQUFLOEIsYUFBYSIsImZpbGUiOiJhcHBsaWNhdGlvbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xudmFyIGlzSWUgPSB1YS5tYXRjaCgvbXNpZS8pID8gdHJ1ZSA6IGZhbHNlO1xudmFyIGlzTW9iaWxlID0gdWEubWF0Y2goL2lwaG9uZXxpcGFkfGlwb2R8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlLykgPyB0cnVlIDogZmFsc2U7XG52YXIgaXNJb3MgPSB1YS5tYXRjaCgvaXBob25lfGlwYWR8aXBvZC8pID8gdHJ1ZSA6IGZhbHNlO1xudmFyIGlzQW5kID0gdWEubWF0Y2goL2FuZHJvaWQvKSA/IHRydWUgOiBmYWxzZTtcbnZhciBpZVZlcnNpb24gPSB1YS5tYXRjaCgvdHJpZGVudC8pID8gMTEgOiB1YS5tYXRjaCgvbXNpZS8pID8gdWEuc3BsaXQoL21zaWUvKVsxXS5zcGxpdCgvXFw7LylbMF0gOiAwO1xuXG5pZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhcmd1bWVudHMuY2FsbGVlLCBmYWxzZSk7XG4gICAgcmVhZHkoKTtcbiAgICBjb21tb24oKTtcbiAgfSwgZmFsc2UpO1xufSBlbHNlIGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCkge1xuICBkb2N1bWVudC5hdHRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICBkb2N1bWVudC5kZXRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgYXJndW1lbnRzLmNhbGxlZSk7XG4gICAgICBjb21tb24oKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBRdWVyeSBTZWxlY3RvciBQb2x5ZmlsbFxuaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgPSBmdW5jdGlvbiAoc2VsZWN0b3JzKSB7XG4gICAgdmFyIHN0eWxlLCBlbGVtZW50cywgZWxlbWVudDtcblxuICAgIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBlbGVtZW50cyA9IFtdO1xuICAgIGVsZW1lbnQgPSB1bmRlZmluZWQ7XG5cbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgZG9jdW1lbnQuX3FzYSA9IFtdO1xuXG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gc2VsZWN0b3JzICsgJ3sgeC1xc2E6IGV4cHJlc3Npb24oZG9jdW1lbnQuX3FzYSAmJiBkb2N1bWVudC5fcXNhLnB1c2godGhpcykpIH0nO1xuICAgIHdpbmRvdy5zY3JvbGxCeSgwLCAwKTtcbiAgICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuICAgIHdoaWxlIChkb2N1bWVudC5fcXNhLmxlbmd0aCkge1xuICAgICAgZWxlbWVudCA9IGRvY3VtZW50Ll9xc2Euc2hpZnQoKTtcbiAgICAgIGVsZW1lbnQuc3R5bGUucmVtb3ZlQXR0cmlidXRlKCd4LXFzYScpO1xuICAgICAgZWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5fcXNhID0gbnVsbDtcbiAgICByZXR1cm4gZWxlbWVudHM7XG4gIH07XG59XG5cbmlmICghZG9jdW1lbnQucXVlcnlTZWxlY3Rvcikge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yID0gZnVuY3Rpb24gKHNlbGVjdG9ycykge1xuICAgIHZhciBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzKTtcbiAgICByZXR1cm4gKGVsZW1lbnRzLmxlbmd0aCkgPyBlbGVtZW50c1swXSA6IG51bGw7XG4gIH07XG59XG5cbi8vIENsYXNzTGlzdCBQb2x5ZmlsbFxuaWYgKCdkb2N1bWVudCcgaW4gc2VsZikge1xuICAvLyBGdWxsIHBvbHlmaWxsIGZvciBicm93c2VycyB3aXRoIG5vIGNsYXNzTGlzdCBzdXBwb3J0XG4gIGlmICghKCdjbGFzc0xpc3QnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ18nKSkpIHtcbiAgICAoZnVuY3Rpb24gKHZpZXcpIHtcbiAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgaWYgKCEoJ0VsZW1lbnQnIGluIHZpZXcpKSByZXR1cm47XG4gICAgICB2YXIgY2xhc3NMaXN0UHJvcCA9ICdjbGFzc0xpc3QnO1xuICAgICAgdmFyIHByb3RvUHJvcCA9ICdwcm90b3R5cGUnO1xuICAgICAgdmFyIGVsZW1DdHJQcm90byA9IHZpZXcuRWxlbWVudFtwcm90b1Byb3BdO1xuICAgICAgdmFyIG9iakN0ciA9IE9iamVjdDtcbiAgICAgIHZhciBzdHJUcmltID0gU3RyaW5nW3Byb3RvUHJvcF0udHJpbSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbiAgICAgIH07XG4gICAgICB2YXIgYXJySW5kZXhPZiA9IEFycmF5W3Byb3RvUHJvcF0uaW5kZXhPZiB8fCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgaSA9IDAsIGxlbiA9IHRoaXMubGVuZ3RoO1xuICAgICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfTtcbiAgICAgIC8vIFZlbmRvcnM6IHBsZWFzZSBhbGxvdyBjb250ZW50IGNvZGUgdG8gaW5zdGFudGlhdGUgRE9NRXhjZXB0aW9uc1xuICAgICAgdmFyIERPTUV4ID0gZnVuY3Rpb24gKHR5cGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gdHlwZTtcbiAgICAgICAgdGhpcy5jb2RlID0gRE9NRXhjZXB0aW9uW3R5cGVdO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgfTtcbiAgICAgIHZhciBjaGVja1Rva2VuQW5kR2V0SW5kZXggPSBmdW5jdGlvbiAoY2xhc3NMaXN0LCB0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4gPT09ICcnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IERPTUV4KCdTWU5UQVhfRVJSJywgJ0FuIGludmFsaWQgb3IgaWxsZWdhbCBzdHJpbmcgd2FzIHNwZWNpZmllZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgvXFxzLy50ZXN0KHRva2VuKSkge1xuICAgICAgICAgIHRocm93IG5ldyBET01FeCgnSU5WQUxJRF9DSEFSQUNURVJfRVJSJywgJ1N0cmluZyBjb250YWlucyBhbiBpbnZhbGlkIGNoYXJhY3RlcicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJJbmRleE9mLmNhbGwoY2xhc3NMaXN0LCB0b2tlbik7XG4gICAgICB9O1xuICAgICAgdmFyIENsYXNzTGlzdCA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIHZhciB0cmltbWVkQ2xhc3NlcyA9IHN0clRyaW0uY2FsbChlbGVtLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJyk7XG4gICAgICAgIHZhciBjbGFzc2VzID0gdHJpbW1lZENsYXNzZXMgPyB0cmltbWVkQ2xhc3Nlcy5zcGxpdCgvXFxzKy8pIDogW107XG4gICAgICAgIHZhciBpID0gMCwgbGVuID0gY2xhc3Nlcy5sZW5ndGg7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB0aGlzLnB1c2goY2xhc3Nlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdXBkYXRlQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKCdjbGFzcycsIHRoaXMudG9TdHJpbmcoKSk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgdmFyIGNsYXNzTGlzdFByb3RvID0gQ2xhc3NMaXN0W3Byb3RvUHJvcF0gPSBbXTtcbiAgICAgIHZhciBjbGFzc0xpc3RHZXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2xhc3NMaXN0KHRoaXMpO1xuICAgICAgfTtcbiAgICAgIC8vIE1vc3QgRE9NRXhjZXB0aW9uIGltcGxlbWVudGF0aW9ucyBkb24ndCBhbGxvdyBjYWxsaW5nIERPTUV4Y2VwdGlvbidzIHRvU3RyaW5nKClcbiAgICAgIC8vIG9uIG5vbi1ET01FeGNlcHRpb25zLiBFcnJvcidzIHRvU3RyaW5nKCkgaXMgc3VmZmljaWVudCBoZXJlLlxuICAgICAgRE9NRXhbcHJvdG9Qcm9wXSA9IEVycm9yW3Byb3RvUHJvcF07XG5cbiAgICAgIGNsYXNzTGlzdFByb3RvLml0ZW0gPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICByZXR1cm4gdGhpc1tpXSB8fCBudWxsO1xuICAgICAgfTtcblxuICAgICAgY2xhc3NMaXN0UHJvdG8uY29udGFpbnMgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgdG9rZW4gKz0gJyc7XG4gICAgICAgIHJldHVybiBjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pICE9PSAtMTtcbiAgICAgIH07XG5cbiAgICAgIGNsYXNzTGlzdFByb3RvLmFkZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRva2VucyA9IGFyZ3VtZW50cztcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgbCA9IHRva2Vucy5sZW5ndGg7XG4gICAgICAgIHZhciB0b2tlbjtcbiAgICAgICAgdmFyIHVwZGF0ZWQgPSBmYWxzZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIHRva2VuID0gdG9rZW5zW2ldICsgJyc7XG4gICAgICAgICAgaWYgKGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbikgPT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2godG9rZW4pO1xuICAgICAgICAgICAgdXBkYXRlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlICgrK2kgPCBsKTtcblxuICAgICAgICBpZiAodXBkYXRlZCkge1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUNsYXNzTmFtZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjbGFzc0xpc3RQcm90by5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0b2tlbnMgPSBhcmd1bWVudHM7XG4gICAgICAgIHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7XG4gICAgICAgIHZhciB0b2tlbjtcbiAgICAgICAgdmFyIHVwZGF0ZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgdG9rZW4gPSB0b2tlbnNbaV0gKyAnJztcbiAgICAgICAgICBpbmRleCA9IGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbik7XG4gICAgICAgICAgd2hpbGUgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgdXBkYXRlZCA9IHRydWU7XG4gICAgICAgICAgICBpbmRleCA9IGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlICgrK2kgPCBsKTtcblxuICAgICAgICBpZiAodXBkYXRlZCkge1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUNsYXNzTmFtZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjbGFzc0xpc3RQcm90by50b2dnbGUgPSBmdW5jdGlvbiAodG9rZW4sIGZvcmNlKSB7XG4gICAgICAgIHRva2VuICs9ICcnO1xuXG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmNvbnRhaW5zKHRva2VuKTtcbiAgICAgICAgdmFyIG1ldGhvZCA9IHJlc3VsdCA/IGZvcmNlICE9PSB0cnVlICYmICdyZW1vdmUnIDogZm9yY2UgIT09IGZhbHNlICYmICdhZGQnO1xuXG4gICAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgICB0aGlzW21ldGhvZF0odG9rZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvcmNlID09PSB0cnVlIHx8IGZvcmNlID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBmb3JjZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gIXJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY2xhc3NMaXN0UHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvaW4oJyAnKTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChvYmpDdHIuZGVmaW5lUHJvcGVydHkpIHtcbiAgICAgICAgdmFyIGNsYXNzTGlzdFByb3BEZXNjID0ge1xuICAgICAgICAgIGdldDogY2xhc3NMaXN0R2V0dGVyLFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgb2JqQ3RyLmRlZmluZVByb3BlcnR5KGVsZW1DdHJQcm90bywgY2xhc3NMaXN0UHJvcCwgY2xhc3NMaXN0UHJvcERlc2MpO1xuICAgICAgICB9IGNhdGNoIChleCkgeyAvLyBJRSA4IGRvZXNuJ3Qgc3VwcG9ydCBlbnVtZXJhYmxlOnRydWVcbiAgICAgICAgICBpZiAoZXgubnVtYmVyID09PSAtMHg3RkY1RUM1NCkge1xuICAgICAgICAgICAgY2xhc3NMaXN0UHJvcERlc2MuZW51bWVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgb2JqQ3RyLmRlZmluZVByb3BlcnR5KGVsZW1DdHJQcm90bywgY2xhc3NMaXN0UHJvcCwgY2xhc3NMaXN0UHJvcERlc2MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChvYmpDdHJbcHJvdG9Qcm9wXS5fX2RlZmluZUdldHRlcl9fKSB7XG4gICAgICAgIGVsZW1DdHJQcm90by5fX2RlZmluZUdldHRlcl9fKGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdEdldHRlcik7XG4gICAgICB9XG4gICAgfShzZWxmKSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gVGhlcmUgaXMgZnVsbCBvciBwYXJ0aWFsIG5hdGl2ZSBjbGFzc0xpc3Qgc3VwcG9ydCwgc28ganVzdCBjaGVjayBpZiB3ZSBuZWVkXG4gICAgLy8gdG8gbm9ybWFsaXplIHRoZSBhZGQvcmVtb3ZlIGFuZCB0b2dnbGUgQVBJcy5cblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgIHZhciB0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ18nKTtcblxuICAgICAgdGVzdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYzEnLCAnYzInKTtcblxuICAgICAgLy8gUG9seWZpbGwgZm9yIElFIDEwLzExIGFuZCBGaXJlZm94IDwyNiwgd2hlcmUgY2xhc3NMaXN0LmFkZCBhbmRcbiAgICAgIC8vIGNsYXNzTGlzdC5yZW1vdmUgZXhpc3QgYnV0IHN1cHBvcnQgb25seSBvbmUgYXJndW1lbnQgYXQgYSB0aW1lLlxuICAgICAgaWYgKCF0ZXN0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2MyJykpIHtcbiAgICAgICAgdmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICAgIHZhciBvcmlnaW5hbCA9IERPTVRva2VuTGlzdC5wcm90b3R5cGVbbWV0aG9kXTtcblxuICAgICAgICAgIERPTVRva2VuTGlzdC5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgaSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcblxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgIHRva2VuID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgICBvcmlnaW5hbC5jYWxsKHRoaXMsIHRva2VuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBjcmVhdGVNZXRob2QoJ2FkZCcpO1xuICAgICAgICBjcmVhdGVNZXRob2QoJ3JlbW92ZScpO1xuICAgICAgfVxuXG4gICAgICB0ZXN0RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdjMycsIGZhbHNlKTtcblxuICAgICAgLy8gUG9seWZpbGwgZm9yIElFIDEwIGFuZCBGaXJlZm94IDwyNCwgd2hlcmUgY2xhc3NMaXN0LnRvZ2dsZSBkb2VzIG5vdFxuICAgICAgLy8gc3VwcG9ydCB0aGUgc2Vjb25kIGFyZ3VtZW50LlxuICAgICAgaWYgKHRlc3RFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnYzMnKSkge1xuICAgICAgICB2YXIgX3RvZ2dsZSA9IERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlO1xuXG4gICAgICAgIERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24odG9rZW4sIGZvcmNlKSB7XG4gICAgICAgICAgaWYgKDEgaW4gYXJndW1lbnRzICYmICF0aGlzLmNvbnRhaW5zKHRva2VuKSA9PT0gIWZvcmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZm9yY2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBfdG9nZ2xlLmNhbGwodGhpcywgdG9rZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHRlc3RFbGVtZW50ID0gbnVsbDtcbiAgICB9KCkpO1xuICB9XG59XG5cbnZhciBzdXBwb3J0UGFnZU9mZnNldCA9IHdpbmRvdy5wYWdlWE9mZnNldCAhPT0gdW5kZWZpbmVkO1xudmFyIGlzQ1NTMUNvbXBhdCA9ICgoZG9jdW1lbnQuY29tcGF0TW9kZSB8fCAnJykgPT09ICdDU1MxQ29tcGF0Jyk7XG5cbnZhciB1c2VyQnJvd3NlciA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xudmFyIGlzT2xkZXJJRSA9IHVzZXJCcm93c2VyLm1hdGNoKC9NU0lFIFs0LThdLykgPyB0cnVlIDogZmFsc2U7XG52YXIgaXNNb2JpbGUgPSB1c2VyQnJvd3Nlci50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hbmRyb2lkIHwgd2Vib3MgfCBpcGhvbmUgfCBpcGFkIHwgaXBvZCB8IGJsYWNrYmVycnkgfCB3aW5kb3dzIHBob25lLykgPyB0cnVlIDogZmFsc2U7XG5cbnZhciB3ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xudmFyIGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuXG52YXIgeCA9IHN1cHBvcnRQYWdlT2Zmc2V0ID8gd2luZG93LnBhZ2VYT2Zmc2V0IDogaXNDU1MxQ29tcGF0ID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgOiBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7XG52YXIgeSA9IHN1cHBvcnRQYWdlT2Zmc2V0ID8gd2luZG93LnBhZ2VZT2Zmc2V0IDogaXNDU1MxQ29tcGF0ID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA6IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuXG52YXIgY3VycmVudFggPSB4O1xudmFyIGN1cnJlbnRZID0geTtcblxudmFyIGFkZEV2ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50cywgY2FsbGJhY2spIHtcbiAgdmFyIGV2ZW50LCBldmVudENvdW50ZXIsIGV2ZW50TGVuZ3RoO1xuICB2YXIgbW9kZXJhdG9yO1xuXG4gIG1vZGVyYXRvciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBlID0gZXZlbnQgfHwgd2luZG93LmV2ZW50O1xuXG4gICAgaWYgKCFlLnRhcmdldCkge1xuICAgICAgZS50YXJnZXQgPSBlLnNyY0VsZW1lbnQ7XG4gICAgfVxuXG4gICAgaWYgKCFlLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICAgIGUuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXMsIGUpO1xuICB9O1xuXG4gIGV2ZW50cyA9IGV2ZW50cy5zcGxpdCgnICcpO1xuICBldmVudENvdW50ZXIgPSAwO1xuICBldmVudExlbmd0aCA9IGV2ZW50cy5sZW5ndGg7XG5cbiAgZm9yICg7IGV2ZW50Q291bnRlciA8IGV2ZW50TGVuZ3RoOyBldmVudENvdW50ZXIrKykge1xuICAgIGV2ZW50ID0gZXZlbnRzW2V2ZW50Q291bnRlcl07XG5cbiAgICBpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBtb2RlcmF0b3IpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGpqID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gIGlmIChzZWxlY3Rvci5tYXRjaCgvXFxzL2cpKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICB9IGVsc2UgaWYgKHNlbGVjdG9yLm1hdGNoKC9eXFwjLykpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0b3IucmVwbGFjZSgvXlxcIy8sICcnKSk7XG4gIH0gZWxzZSBpZiAoc2VsZWN0b3IubWF0Y2goL15cXC4vKSkge1xuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHNlbGVjdG9yLnJlcGxhY2UoL15cXC4vLCAnJykpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShzZWxlY3Rvcik7XG4gIH1cbn07XG5cbnZhciBjb21tb24gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBoZWFkZXJIYW1idXJnZXIgPSBqaignI2hlYWRlciAuaGFtYnVyZ2VyJylbMF0sXG4gICAgICBuYXZpZ2F0b3JIYW1idXJnZXIgPSBqaignI3NsaWRlLW5hdmlnYXRvciAuaGFtYnVyZ2VyJylbMF0sXG4gICAgICBuYXZpZ2F0b3IgPSBqaignI3NsaWRlLW5hdmlnYXRvcicpLFxuICAgICAgaGVhZGVyTWVudXMgPSBqaignI2hlYWRlciB1bCBsaScpLFxuICAgICAgZm9vdGVyTWVudXMgPSBqaignI2Zvb3RlciAubGlzdC1zbnMgYScpO1xuXG4gIGFkZEV2ZW50KGhlYWRlckhhbWJ1cmdlciwgJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIHZhciB0aGlzQ2xhc3NMaXN0ID0gdGhpcy5jbGFzc0xpc3Q7XG4gICAgaWYgKCF0aGlzQ2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIG5hdmlnYXRvci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIG5hdmlnYXRvci5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICB9LCAxMDApO1xuICAgICAgbmF2aWdhdG9ySGFtYnVyZ2VyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCAn7IOB64uoIOuEpOu5hOqyjOydtOyFmCDrsJQnLCAnQnV0dG9uIFByZXNzJywgJ+2WhOuyhOqxsCDrsoTtirwg7YG066atKOuplOuJtCDsl7TquLApJyk7XG4gICAgfVxuICB9KTtcblxuICBhZGRFdmVudChuYXZpZ2F0b3JIYW1idXJnZXIsICdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgdGhpc0NsYXNzTGlzdCA9IHRoaXMuY2xhc3NMaXN0O1xuICAgIGlmICh0aGlzQ2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIG5hdmlnYXRvci5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBuYXZpZ2F0b3IuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICB9LCA1MDApO1xuICAgICAgaGVhZGVySGFtYnVyZ2VyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCAn7IOB64uoIOuEpOu5hOqyjOydtOyFmCDrsJQnLCAnQnV0dG9uIFByZXNzJywgJ+2WhOuyhOqxsCDrsoTtirwg7YG066atKOuplOuJtCDrk6PquLApJyk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgaG1lbnVDb3VudGVyID0gMCwgaG1lbnVMZW5ndGggPSBoZWFkZXJNZW51cy5sZW5ndGg7XG4gIGZvciAoOyBobWVudUNvdW50ZXIgPCBobWVudUxlbmd0aDsgaG1lbnVDb3VudGVyKyspIHtcbiAgICBhZGRFdmVudChoZWFkZXJNZW51c1tobWVudUNvdW50ZXJdLCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBnYSgnc2VuZCcsICdldmVudCcsICfsg4Hri6gg64Sk67mE6rKM7J207IWYIOuwlCcsICdCdXR0b24gUHJlc3MnLCB0aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJylbMF0udGV4dENvbnRlbnQgKyAnIO2BtOumrScpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIGZtZW51Q291bnRlciA9IDAsIGZtZW51TGVuZ3RoID0gZm9vdGVyTWVudXMubGVuZ3RoO1xuICBmb3IgKDsgZm1lbnVDb3VudGVyIDwgZm1lbnVMZW5ndGg7IGZtZW51Q291bnRlcisrKSB7XG4gICAgYWRkRXZlbnQoZm9vdGVyTWVudXNbZm1lbnVDb3VudGVyXSwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCAn7ZWY64uoIOuwlCcsICdCdXR0b24gUHJlc3MnLCB0aGlzLmdldEF0dHJpYnV0ZSgnaHJlZicpKTtcbiAgICB9KTtcbiAgfVxufTtcblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
