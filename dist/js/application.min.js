var ua=window.navigator.userAgent.toLowerCase(),isIe=!!ua.match(/msie/),isMobile=!!ua.match(/iphone|ipad|ipod|android|blackberry|iemobile/),isIos=!!ua.match(/iphone|ipad|ipod/),isAnd=!!ua.match(/android/),ieVersion=ua.match(/trident/)?11:ua.match(/msie/)?ua.split(/msie/)[1].split(/\;/)[0]:0;document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),ready(),common()},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),common())}),document.querySelectorAll||(document.querySelectorAll=function(e){var t,n,i;for(t=document.createElement("style"),n=[],i=void 0,document.documentElement.firstChild.appendChild(t),document._qsa=[],t.styleSheet.cssText=e+"{ x-qsa: expression(document._qsa && document._qsa.push(this)) }",window.scrollBy(0,0),t.parentNode.removeChild(t);document._qsa.length;)i=document._qsa.shift(),i.style.removeAttribute("x-qsa"),n.push(i);return document._qsa=null,n}),document.querySelector||(document.querySelector=function(e){var t=document.querySelectorAll(e);return t.length?t[0]:null}),"document"in self&&("classList"in document.createElement("_")?!function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,i=arguments.length;for(n=0;n<i;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}():!function(e){"use strict";if("Element"in e){var t="classList",n="prototype",i=e.Element[n],s=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},c=function(e,t){if(""===t)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},l=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,s=n.length;i<s;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},u=l[n]=[],d=function(){return new l(this)};if(r[n]=Error[n],u.item=function(e){return this[e]||null},u.contains=function(e){return e+="",c(this,e)!==-1},u.add=function(){var e,t=arguments,n=0,i=t.length,s=!1;do e=t[n]+"",c(this,e)===-1&&(this.push(e),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var e,t,n=arguments,i=0,s=n.length,o=!1;do for(e=n[i]+"",t=c(this,e);t!==-1;)this.splice(t,1),o=!0,t=c(this,e);while(++i<s);o&&this._updateClassName()},u.toggle=function(e,t){e+="";var n=this.contains(e),i=n?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!n},u.toString=function(){return this.join(" ")},s.defineProperty){var m={get:d,enumerable:!0,configurable:!0};try{s.defineProperty(i,t,m)}catch(h){h.number===-2146823252&&(m.enumerable=!1,s.defineProperty(i,t,m))}}else s[n].__defineGetter__&&i.__defineGetter__(t,d)}}(self));var supportPageOffset=void 0!==window.pageXOffset,isCSS1Compat="CSS1Compat"===(document.compatMode||""),userBrowser=window.navigator.userAgent,isOlderIE=!!userBrowser.match(/MSIE [4-8]/),isMobile=!!userBrowser.toLowerCase().match(/android | webos | iphone | ipad | ipod | blackberry | windows phone/),w=document.documentElement.clientWidth,h=document.documentElement.clientHeight,x=supportPageOffset?window.pageXOffset:isCSS1Compat?document.documentElement.scrollLeft:document.body.scrollLeft,y=supportPageOffset?window.pageYOffset:isCSS1Compat?document.documentElement.scrollTop:document.body.scrollTop,currentX=x,currentY=y,addEvent=function(e,t,n){var i,s,o,a;for(a=function(e){var t=e||window.event;return t.target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1,t.defaultPrevented=!0}),n.call(this,t)},t=t.split(" "),s=0,o=t.length;s<o;s++)i=t[s],e.addEventListener?e.addEventListener(i,n,!1):e.attachEvent("on"+i,a)},jj=function(e){return e.match(/\s/g)?document.querySelectorAll(e):e.match(/^\#/)?document.getElementById(e.replace(/^\#/,"")):e.match(/^\./)?document.getElementsByClassName(e.replace(/^\./,"")):document.getElementsByTagName(e)},common=function(){var e=jj("#header .hamburger")[0],t=jj("#slide-navigator .hamburger")[0],n=jj("#slide-navigator"),i=jj("#header ul li"),s=jj("#footer .list-sns a");addEvent(e,"click",function(e){var i=this.classList;i.contains("active")||(this.classList.add("active"),n.classList.add("active"),setTimeout(function(){n.classList.add("visible")},100),t.classList.add("active"),ga("send","event","상단 네비게이션 바","Button Press","햄버거 버튼 클릭(메뉴 열기)"))}),addEvent(t,"click",function(t){var i=this.classList;i.contains("active")&&(this.classList.remove("active"),n.classList.remove("visible"),setTimeout(function(){n.classList.remove("active")},500),e.classList.remove("active"),ga("send","event","상단 네비게이션 바","Button Press","햄버거 버튼 클릭(메뉴 듣기)"))});for(var o=0,a=i.length;o<a;o++)addEvent(i[o],"click",function(){ga("send","event","상단 네비게이션 바","Button Press",this.getElementsByTagName("a")[0].textContent+" 클릭")});for(var r=0,c=s.length;r<c;r++)addEvent(s[r],"click",function(){ga("send","event","하단 바","Button Press",this.getAttribute("href"))})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcGxpY2F0aW9uLm1pbi5qcyJdLCJuYW1lcyI6WyJ1YSIsIndpbmRvdyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiaXNJZSIsIm1hdGNoIiwiaXNNb2JpbGUiLCJpc0lvcyIsImlzQW5kIiwiaWVWZXJzaW9uIiwic3BsaXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYXJndW1lbnRzIiwiY2FsbGVlIiwicmVhZHkiLCJjb21tb24iLCJhdHRhY2hFdmVudCIsInJlYWR5U3RhdGUiLCJkZXRhY2hFdmVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZWxlY3RvcnMiLCJzdHlsZSIsImVsZW1lbnRzIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ1bmRlZmluZWQiLCJkb2N1bWVudEVsZW1lbnQiLCJmaXJzdENoaWxkIiwiYXBwZW5kQ2hpbGQiLCJfcXNhIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJzY3JvbGxCeSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImxlbmd0aCIsInNoaWZ0IiwicmVtb3ZlQXR0cmlidXRlIiwicHVzaCIsInF1ZXJ5U2VsZWN0b3IiLCJzZWxmIiwidGVzdEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJjb250YWlucyIsImNyZWF0ZU1ldGhvZCIsIm1ldGhvZCIsIm9yaWdpbmFsIiwiRE9NVG9rZW5MaXN0IiwicHJvdG90eXBlIiwidG9rZW4iLCJpIiwibGVuIiwiY2FsbCIsInRoaXMiLCJ0b2dnbGUiLCJfdG9nZ2xlIiwiZm9yY2UiLCJ2aWV3IiwiY2xhc3NMaXN0UHJvcCIsInByb3RvUHJvcCIsImVsZW1DdHJQcm90byIsIkVsZW1lbnQiLCJvYmpDdHIiLCJPYmplY3QiLCJzdHJUcmltIiwiU3RyaW5nIiwidHJpbSIsInJlcGxhY2UiLCJhcnJJbmRleE9mIiwiQXJyYXkiLCJpbmRleE9mIiwiaXRlbSIsIkRPTUV4IiwidHlwZSIsIm1lc3NhZ2UiLCJuYW1lIiwiY29kZSIsIkRPTUV4Y2VwdGlvbiIsImNoZWNrVG9rZW5BbmRHZXRJbmRleCIsInRlc3QiLCJDbGFzc0xpc3QiLCJlbGVtIiwidHJpbW1lZENsYXNzZXMiLCJnZXRBdHRyaWJ1dGUiLCJjbGFzc2VzIiwiX3VwZGF0ZUNsYXNzTmFtZSIsInNldEF0dHJpYnV0ZSIsInRvU3RyaW5nIiwiY2xhc3NMaXN0UHJvdG8iLCJjbGFzc0xpc3RHZXR0ZXIiLCJFcnJvciIsInRva2VucyIsImwiLCJ1cGRhdGVkIiwicmVtb3ZlIiwiaW5kZXgiLCJzcGxpY2UiLCJyZXN1bHQiLCJqb2luIiwiZGVmaW5lUHJvcGVydHkiLCJjbGFzc0xpc3RQcm9wRGVzYyIsImdldCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJleCIsIm51bWJlciIsIl9fZGVmaW5lR2V0dGVyX18iLCJzdXBwb3J0UGFnZU9mZnNldCIsInBhZ2VYT2Zmc2V0IiwiaXNDU1MxQ29tcGF0IiwiY29tcGF0TW9kZSIsInVzZXJCcm93c2VyIiwiaXNPbGRlcklFIiwidyIsImNsaWVudFdpZHRoIiwiaCIsImNsaWVudEhlaWdodCIsIngiLCJzY3JvbGxMZWZ0IiwiYm9keSIsInkiLCJwYWdlWU9mZnNldCIsInNjcm9sbFRvcCIsImN1cnJlbnRYIiwiY3VycmVudFkiLCJhZGRFdmVudCIsImV2ZW50cyIsImNhbGxiYWNrIiwiZXZlbnQiLCJldmVudENvdW50ZXIiLCJldmVudExlbmd0aCIsIm1vZGVyYXRvciIsImUiLCJ0YXJnZXQiLCJzcmNFbGVtZW50IiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsImRlZmF1bHRQcmV2ZW50ZWQiLCJqaiIsInNlbGVjdG9yIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJoZWFkZXJIYW1idXJnZXIiLCJuYXZpZ2F0b3JIYW1idXJnZXIiLCJoZWFkZXJNZW51cyIsImZvb3Rlck1lbnVzIiwidGhpc0NsYXNzTGlzdCIsInNldFRpbWVvdXQiLCJnYSIsImhtZW51Q291bnRlciIsImhtZW51TGVuZ3RoIiwidGV4dENvbnRlbnQiLCJmbWVudUNvdW50ZXIiLCJmbWVudUxlbmd0aCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsSUFBS0MsT0FBT0MsVUFBVUMsVUFBVUMsY0FDaENDLE9BQU9MLEdBQUdNLE1BQU0sUUFDaEJDLFdBQVdQLEdBQUdNLE1BQU0sZ0RBQ3BCRSxRQUFRUixHQUFHTSxNQUFNLG9CQUNqQkcsUUFBUVQsR0FBR00sTUFBTSxXQUNqQkksVUFBWVYsR0FBR00sTUFBTSxXQUFhLEdBQUtOLEdBQUdNLE1BQU0sUUFBVU4sR0FBR1csTUFBTSxRQUFRLEdBQUdBLE1BQU0sTUFBTSxHQUFLLENBRS9GQyxVQUFTQyxpQkFDWEQsU0FBU0MsaUJBQWlCLG1CQUFvQixXQUM1Q0QsU0FBU0Usb0JBQW9CLG1CQUFvQkMsVUFBVUMsUUFBUSxHQUNuRUMsUUFDQUMsV0FDQyxHQUNNTixTQUFTTyxhQUNsQlAsU0FBU08sWUFBWSxxQkFBc0IsV0FDYixhQUF4QlAsU0FBU1EsYUFDWFIsU0FBU1MsWUFBWSxxQkFBc0JOLFVBQVVDLFFBQ3JERSxZQU1ETixTQUFTVSxtQkFDWlYsU0FBU1UsaUJBQW1CLFNBQVVDLEdBQ3BDLEdBQUlDLEdBQU9DLEVBQVVDLENBYXJCLEtBWEFGLEVBQVFaLFNBQVNlLGNBQWMsU0FDL0JGLEtBQ0FDLEVBQVVFLE9BRVZoQixTQUFTaUIsZ0JBQWdCQyxXQUFXQyxZQUFZUCxHQUNoRFosU0FBU29CLFFBRVRSLEVBQU1TLFdBQVdDLFFBQVVYLEVBQVksbUVBQ3ZDdEIsT0FBT2tDLFNBQVMsRUFBRyxHQUNuQlgsRUFBTVksV0FBV0MsWUFBWWIsR0FFdEJaLFNBQVNvQixLQUFLTSxRQUNuQlosRUFBVWQsU0FBU29CLEtBQUtPLFFBQ3hCYixFQUFRRixNQUFNZ0IsZ0JBQWdCLFNBQzlCZixFQUFTZ0IsS0FBS2YsRUFJaEIsT0FEQWQsVUFBU29CLEtBQU8sS0FDVFAsSUFJTmIsU0FBUzhCLGdCQUNa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SixHQUFHLE9BQVEsUUFBUyxPQUFRLGVBQWdCaEcsS0FBSzhCLGFBQWEiLCJmaWxlIjoiYXBwbGljYXRpb24ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbnZhciBpc0llID0gdWEubWF0Y2goL21zaWUvKSA/IHRydWUgOiBmYWxzZTtcbnZhciBpc01vYmlsZSA9IHVhLm1hdGNoKC9pcGhvbmV8aXBhZHxpcG9kfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS8pID8gdHJ1ZSA6IGZhbHNlO1xudmFyIGlzSW9zID0gdWEubWF0Y2goL2lwaG9uZXxpcGFkfGlwb2QvKSA/IHRydWUgOiBmYWxzZTtcbnZhciBpc0FuZCA9IHVhLm1hdGNoKC9hbmRyb2lkLykgPyB0cnVlIDogZmFsc2U7XG52YXIgaWVWZXJzaW9uID0gdWEubWF0Y2goL3RyaWRlbnQvKSA/IDExIDogdWEubWF0Y2goL21zaWUvKSA/IHVhLnNwbGl0KC9tc2llLylbMV0uc3BsaXQoL1xcOy8pWzBdIDogMDtcblxuaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgYXJndW1lbnRzLmNhbGxlZSwgZmFsc2UpO1xuICAgIHJlYWR5KCk7XG4gICAgY29tbW9uKCk7XG4gIH0sIGZhbHNlKTtcbn0gZWxzZSBpZiAoZG9jdW1lbnQuYXR0YWNoRXZlbnQpIHtcbiAgZG9jdW1lbnQuYXR0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgZG9jdW1lbnQuZGV0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGFyZ3VtZW50cy5jYWxsZWUpO1xuICAgICAgY29tbW9uKCk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gUXVlcnkgU2VsZWN0b3IgUG9seWZpbGxcbmlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsID0gZnVuY3Rpb24gKHNlbGVjdG9ycykge1xuICAgIHZhciBzdHlsZSwgZWxlbWVudHMsIGVsZW1lbnQ7XG5cbiAgICBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgZWxlbWVudHMgPSBbXTtcbiAgICBlbGVtZW50ID0gdW5kZWZpbmVkO1xuXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIGRvY3VtZW50Ll9xc2EgPSBbXTtcblxuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHNlbGVjdG9ycyArICd7IHgtcXNhOiBleHByZXNzaW9uKGRvY3VtZW50Ll9xc2EgJiYgZG9jdW1lbnQuX3FzYS5wdXNoKHRoaXMpKSB9JztcbiAgICB3aW5kb3cuc2Nyb2xsQnkoMCwgMCk7XG4gICAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cbiAgICB3aGlsZSAoZG9jdW1lbnQuX3FzYS5sZW5ndGgpIHtcbiAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5fcXNhLnNoaWZ0KCk7XG4gICAgICBlbGVtZW50LnN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgneC1xc2EnKTtcbiAgICAgIGVsZW1lbnRzLnB1c2goZWxlbWVudCk7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuX3FzYSA9IG51bGw7XG4gICAgcmV0dXJuIGVsZW1lbnRzO1xuICB9O1xufVxuXG5pZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvciA9IGZ1bmN0aW9uIChzZWxlY3RvcnMpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycyk7XG4gICAgcmV0dXJuIChlbGVtZW50cy5sZW5ndGgpID8gZWxlbWVudHNbMF0gOiBudWxsO1xuICB9O1xufVxuXG4vLyBDbGFzc0xpc3QgUG9seWZpbGxcbmlmICgnZG9jdW1lbnQnIGluIHNlbGYpIHtcbiAgLy8gRnVsbCBwb2x5ZmlsbCBmb3IgYnJvd3NlcnMgd2l0aCBubyBjbGFzc0xpc3Qgc3VwcG9ydFxuICBpZiAoISgnY2xhc3NMaXN0JyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdfJykpKSB7XG4gICAgKGZ1bmN0aW9uICh2aWV3KSB7XG4gICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgIGlmICghKCdFbGVtZW50JyBpbiB2aWV3KSkgcmV0dXJuO1xuICAgICAgdmFyIGNsYXNzTGlzdFByb3AgPSAnY2xhc3NMaXN0JztcbiAgICAgIHZhciBwcm90b1Byb3AgPSAncHJvdG90eXBlJztcbiAgICAgIHZhciBlbGVtQ3RyUHJvdG8gPSB2aWV3LkVsZW1lbnRbcHJvdG9Qcm9wXTtcbiAgICAgIHZhciBvYmpDdHIgPSBPYmplY3Q7XG4gICAgICB2YXIgc3RyVHJpbSA9IFN0cmluZ1twcm90b1Byb3BdLnRyaW0gfHwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgICB9O1xuICAgICAgdmFyIGFyckluZGV4T2YgPSBBcnJheVtwcm90b1Byb3BdLmluZGV4T2YgfHwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIGkgPSAwLCBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH07XG4gICAgICAvLyBWZW5kb3JzOiBwbGVhc2UgYWxsb3cgY29udGVudCBjb2RlIHRvIGluc3RhbnRpYXRlIERPTUV4Y2VwdGlvbnNcbiAgICAgIHZhciBET01FeCA9IGZ1bmN0aW9uICh0eXBlLCBtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuY29kZSA9IERPTUV4Y2VwdGlvblt0eXBlXTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgIH07XG4gICAgICB2YXIgY2hlY2tUb2tlbkFuZEdldEluZGV4ID0gZnVuY3Rpb24gKGNsYXNzTGlzdCwgdG9rZW4pIHtcbiAgICAgICAgaWYgKHRva2VuID09PSAnJykge1xuICAgICAgICAgIHRocm93IG5ldyBET01FeCgnU1lOVEFYX0VSUicsICdBbiBpbnZhbGlkIG9yIGlsbGVnYWwgc3RyaW5nIHdhcyBzcGVjaWZpZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoL1xccy8udGVzdCh0b2tlbikpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRE9NRXgoJ0lOVkFMSURfQ0hBUkFDVEVSX0VSUicsICdTdHJpbmcgY29udGFpbnMgYW4gaW52YWxpZCBjaGFyYWN0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJySW5kZXhPZi5jYWxsKGNsYXNzTGlzdCwgdG9rZW4pO1xuICAgICAgfTtcbiAgICAgIHZhciBDbGFzc0xpc3QgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICB2YXIgdHJpbW1lZENsYXNzZXMgPSBzdHJUcmltLmNhbGwoZWxlbS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpO1xuICAgICAgICB2YXIgY2xhc3NlcyA9IHRyaW1tZWRDbGFzc2VzID8gdHJpbW1lZENsYXNzZXMuc3BsaXQoL1xccysvKSA6IFtdO1xuICAgICAgICB2YXIgaSA9IDAsIGxlbiA9IGNsYXNzZXMubGVuZ3RoO1xuICAgICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5wdXNoKGNsYXNzZXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB0aGlzLnRvU3RyaW5nKCkpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIHZhciBjbGFzc0xpc3RQcm90byA9IENsYXNzTGlzdFtwcm90b1Byb3BdID0gW107XG4gICAgICB2YXIgY2xhc3NMaXN0R2V0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IENsYXNzTGlzdCh0aGlzKTtcbiAgICAgIH07XG4gICAgICAvLyBNb3N0IERPTUV4Y2VwdGlvbiBpbXBsZW1lbnRhdGlvbnMgZG9uJ3QgYWxsb3cgY2FsbGluZyBET01FeGNlcHRpb24ncyB0b1N0cmluZygpXG4gICAgICAvLyBvbiBub24tRE9NRXhjZXB0aW9ucy4gRXJyb3IncyB0b1N0cmluZygpIGlzIHN1ZmZpY2llbnQgaGVyZS5cbiAgICAgIERPTUV4W3Byb3RvUHJvcF0gPSBFcnJvcltwcm90b1Byb3BdO1xuXG4gICAgICBjbGFzc0xpc3RQcm90by5pdGVtID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbaV0gfHwgbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIGNsYXNzTGlzdFByb3RvLmNvbnRhaW5zID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIHRva2VuICs9ICcnO1xuICAgICAgICByZXR1cm4gY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKSAhPT0gLTE7XG4gICAgICB9O1xuXG4gICAgICBjbGFzc0xpc3RQcm90by5hZGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0b2tlbnMgPSBhcmd1bWVudHM7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGwgPSB0b2tlbnMubGVuZ3RoO1xuICAgICAgICB2YXIgdG9rZW47XG4gICAgICAgIHZhciB1cGRhdGVkID0gZmFsc2U7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICB0b2tlbiA9IHRva2Vuc1tpXSArICcnO1xuICAgICAgICAgIGlmIChjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5wdXNoKHRva2VuKTtcbiAgICAgICAgICAgIHVwZGF0ZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAoKytpIDwgbCk7XG5cbiAgICAgICAgaWYgKHVwZGF0ZWQpIHtcbiAgICAgICAgICB0aGlzLl91cGRhdGVDbGFzc05hbWUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY2xhc3NMaXN0UHJvdG8ucmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdG9rZW5zID0gYXJndW1lbnRzO1xuICAgICAgICB2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoO1xuICAgICAgICB2YXIgdG9rZW47XG4gICAgICAgIHZhciB1cGRhdGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIHRva2VuID0gdG9rZW5zW2ldICsgJyc7XG4gICAgICAgICAgaW5kZXggPSBjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pO1xuICAgICAgICAgIHdoaWxlIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHVwZGF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgaW5kZXggPSBjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAoKytpIDwgbCk7XG5cbiAgICAgICAgaWYgKHVwZGF0ZWQpIHtcbiAgICAgICAgICB0aGlzLl91cGRhdGVDbGFzc05hbWUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY2xhc3NMaXN0UHJvdG8udG9nZ2xlID0gZnVuY3Rpb24gKHRva2VuLCBmb3JjZSkge1xuICAgICAgICB0b2tlbiArPSAnJztcblxuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5jb250YWlucyh0b2tlbik7XG4gICAgICAgIHZhciBtZXRob2QgPSByZXN1bHQgPyBmb3JjZSAhPT0gdHJ1ZSAmJiAncmVtb3ZlJyA6IGZvcmNlICE9PSBmYWxzZSAmJiAnYWRkJztcblxuICAgICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgICAgdGhpc1ttZXRob2RdKHRva2VuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb3JjZSA9PT0gdHJ1ZSB8fCBmb3JjZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZm9yY2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuICFyZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNsYXNzTGlzdFByb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2luKCcgJyk7XG4gICAgICB9O1xuXG4gICAgICBpZiAob2JqQ3RyLmRlZmluZVByb3BlcnR5KSB7XG4gICAgICAgIHZhciBjbGFzc0xpc3RQcm9wRGVzYyA9IHtcbiAgICAgICAgICBnZXQ6IGNsYXNzTGlzdEdldHRlcixcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG9iakN0ci5kZWZpbmVQcm9wZXJ0eShlbGVtQ3RyUHJvdG8sIGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdFByb3BEZXNjKTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHsgLy8gSUUgOCBkb2Vzbid0IHN1cHBvcnQgZW51bWVyYWJsZTp0cnVlXG4gICAgICAgICAgaWYgKGV4Lm51bWJlciA9PT0gLTB4N0ZGNUVDNTQpIHtcbiAgICAgICAgICAgIGNsYXNzTGlzdFByb3BEZXNjLmVudW1lcmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIG9iakN0ci5kZWZpbmVQcm9wZXJ0eShlbGVtQ3RyUHJvdG8sIGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdFByb3BEZXNjKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAob2JqQ3RyW3Byb3RvUHJvcF0uX19kZWZpbmVHZXR0ZXJfXykge1xuICAgICAgICBlbGVtQ3RyUHJvdG8uX19kZWZpbmVHZXR0ZXJfXyhjbGFzc0xpc3RQcm9wLCBjbGFzc0xpc3RHZXR0ZXIpO1xuICAgICAgfVxuICAgIH0oc2VsZikpO1xuICB9IGVsc2Uge1xuICAgIC8vIFRoZXJlIGlzIGZ1bGwgb3IgcGFydGlhbCBuYXRpdmUgY2xhc3NMaXN0IHN1cHBvcnQsIHNvIGp1c3QgY2hlY2sgaWYgd2UgbmVlZFxuICAgIC8vIHRvIG5vcm1hbGl6ZSB0aGUgYWRkL3JlbW92ZSBhbmQgdG9nZ2xlIEFQSXMuXG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICB2YXIgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdfJyk7XG5cbiAgICAgIHRlc3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2MxJywgJ2MyJyk7XG5cbiAgICAgIC8vIFBvbHlmaWxsIGZvciBJRSAxMC8xMSBhbmQgRmlyZWZveCA8MjYsIHdoZXJlIGNsYXNzTGlzdC5hZGQgYW5kXG4gICAgICAvLyBjbGFzc0xpc3QucmVtb3ZlIGV4aXN0IGJ1dCBzdXBwb3J0IG9ubHkgb25lIGFyZ3VtZW50IGF0IGEgdGltZS5cbiAgICAgIGlmICghdGVzdEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjMicpKSB7XG4gICAgICAgIHZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICB2YXIgb3JpZ2luYWwgPSBET01Ub2tlbkxpc3QucHJvdG90eXBlW21ldGhvZF07XG5cbiAgICAgICAgICBET01Ub2tlbkxpc3QucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih0b2tlbikge1xuICAgICAgICAgICAgdmFyIGksIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICB0b2tlbiA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgICAgb3JpZ2luYWwuY2FsbCh0aGlzLCB0b2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgY3JlYXRlTWV0aG9kKCdhZGQnKTtcbiAgICAgICAgY3JlYXRlTWV0aG9kKCdyZW1vdmUnKTtcbiAgICAgIH1cblxuICAgICAgdGVzdEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnYzMnLCBmYWxzZSk7XG5cbiAgICAgIC8vIFBvbHlmaWxsIGZvciBJRSAxMCBhbmQgRmlyZWZveCA8MjQsIHdoZXJlIGNsYXNzTGlzdC50b2dnbGUgZG9lcyBub3RcbiAgICAgIC8vIHN1cHBvcnQgdGhlIHNlY29uZCBhcmd1bWVudC5cbiAgICAgIGlmICh0ZXN0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2MzJykpIHtcbiAgICAgICAgdmFyIF90b2dnbGUgPSBET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZTtcblxuICAgICAgICBET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uKHRva2VuLCBmb3JjZSkge1xuICAgICAgICAgIGlmICgxIGluIGFyZ3VtZW50cyAmJiAhdGhpcy5jb250YWlucyh0b2tlbikgPT09ICFmb3JjZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZvcmNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX3RvZ2dsZS5jYWxsKHRoaXMsIHRva2VuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICB0ZXN0RWxlbWVudCA9IG51bGw7XG4gICAgfSgpKTtcbiAgfVxufVxuXG52YXIgc3VwcG9ydFBhZ2VPZmZzZXQgPSB3aW5kb3cucGFnZVhPZmZzZXQgIT09IHVuZGVmaW5lZDtcbnZhciBpc0NTUzFDb21wYXQgPSAoKGRvY3VtZW50LmNvbXBhdE1vZGUgfHwgJycpID09PSAnQ1NTMUNvbXBhdCcpO1xuXG52YXIgdXNlckJyb3dzZXIgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcbnZhciBpc09sZGVySUUgPSB1c2VyQnJvd3Nlci5tYXRjaCgvTVNJRSBbNC04XS8pID8gdHJ1ZSA6IGZhbHNlO1xudmFyIGlzTW9iaWxlID0gdXNlckJyb3dzZXIudG9Mb3dlckNhc2UoKS5tYXRjaCgvYW5kcm9pZCB8IHdlYm9zIHwgaXBob25lIHwgaXBhZCB8IGlwb2QgfCBibGFja2JlcnJ5IHwgd2luZG93cyBwaG9uZS8pID8gdHJ1ZSA6IGZhbHNlO1xuXG52YXIgdyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcbnZhciBoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcblxudmFyIHggPSBzdXBwb3J0UGFnZU9mZnNldCA/IHdpbmRvdy5wYWdlWE9mZnNldCA6IGlzQ1NTMUNvbXBhdCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IDogZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xudmFyIHkgPSBzdXBwb3J0UGFnZU9mZnNldCA/IHdpbmRvdy5wYWdlWU9mZnNldCA6IGlzQ1NTMUNvbXBhdCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgOiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcblxudmFyIGN1cnJlbnRYID0geDtcbnZhciBjdXJyZW50WSA9IHk7XG5cbnZhciBhZGRFdmVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudHMsIGNhbGxiYWNrKSB7XG4gIHZhciBldmVudCwgZXZlbnRDb3VudGVyLCBldmVudExlbmd0aDtcbiAgdmFyIG1vZGVyYXRvcjtcblxuICBtb2RlcmF0b3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgZSA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDtcblxuICAgIGlmICghZS50YXJnZXQpIHtcbiAgICAgIGUudGFyZ2V0ID0gZS5zcmNFbGVtZW50O1xuICAgIH1cblxuICAgIGlmICghZS5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICBlLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzLCBlKTtcbiAgfTtcblxuICBldmVudHMgPSBldmVudHMuc3BsaXQoJyAnKTtcbiAgZXZlbnRDb3VudGVyID0gMDtcbiAgZXZlbnRMZW5ndGggPSBldmVudHMubGVuZ3RoO1xuXG4gIGZvciAoOyBldmVudENvdW50ZXIgPCBldmVudExlbmd0aDsgZXZlbnRDb3VudGVyKyspIHtcbiAgICBldmVudCA9IGV2ZW50c1tldmVudENvdW50ZXJdO1xuXG4gICAgaWYgKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYWxsYmFjaywgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCdvbicgKyBldmVudCwgbW9kZXJhdG9yKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBqaiA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICBpZiAoc2VsZWN0b3IubWF0Y2goL1xccy9nKSkge1xuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgfSBlbHNlIGlmIChzZWxlY3Rvci5tYXRjaCgvXlxcIy8pKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdG9yLnJlcGxhY2UoL15cXCMvLCAnJykpO1xuICB9IGVsc2UgaWYgKHNlbGVjdG9yLm1hdGNoKC9eXFwuLykpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShzZWxlY3Rvci5yZXBsYWNlKC9eXFwuLywgJycpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoc2VsZWN0b3IpO1xuICB9XG59O1xuXG52YXIgY29tbW9uID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaGVhZGVySGFtYnVyZ2VyID0gamooJyNoZWFkZXIgLmhhbWJ1cmdlcicpWzBdLFxuICAgICAgbmF2aWdhdG9ySGFtYnVyZ2VyID0gamooJyNzbGlkZS1uYXZpZ2F0b3IgLmhhbWJ1cmdlcicpWzBdLFxuICAgICAgbmF2aWdhdG9yID0gamooJyNzbGlkZS1uYXZpZ2F0b3InKSxcbiAgICAgIGhlYWRlck1lbnVzID0gamooJyNoZWFkZXIgdWwgbGknKSxcbiAgICAgIGZvb3Rlck1lbnVzID0gamooJyNmb290ZXIgLmxpc3Qtc25zIGEnKTtcblxuICBhZGRFdmVudChoZWFkZXJIYW1idXJnZXIsICdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgdGhpc0NsYXNzTGlzdCA9IHRoaXMuY2xhc3NMaXN0O1xuICAgIGlmICghdGhpc0NsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBuYXZpZ2F0b3IuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBuYXZpZ2F0b3IuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgfSwgMTAwKTtcbiAgICAgIG5hdmlnYXRvckhhbWJ1cmdlci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIGdhKCdzZW5kJywgJ2V2ZW50JywgJ+yDgeuLqCDrhKTruYTqsozsnbTshZgg67CUJywgJ0J1dHRvbiBQcmVzcycsICftloTrsoTqsbAg67KE7Yq8IO2BtOumrSjrqZTribQg7Je06riwKScpO1xuICAgIH1cbiAgfSk7XG5cbiAgYWRkRXZlbnQobmF2aWdhdG9ySGFtYnVyZ2VyLCAnY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHRoaXNDbGFzc0xpc3QgPSB0aGlzLmNsYXNzTGlzdDtcbiAgICBpZiAodGhpc0NsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBuYXZpZ2F0b3IuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgbmF2aWdhdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgfSwgNTAwKTtcbiAgICAgIGhlYWRlckhhbWJ1cmdlci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGdhKCdzZW5kJywgJ2V2ZW50JywgJ+yDgeuLqCDrhKTruYTqsozsnbTshZgg67CUJywgJ0J1dHRvbiBQcmVzcycsICftloTrsoTqsbAg67KE7Yq8IO2BtOumrSjrqZTribQg65Oj6riwKScpO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIGhtZW51Q291bnRlciA9IDAsIGhtZW51TGVuZ3RoID0gaGVhZGVyTWVudXMubGVuZ3RoO1xuICBmb3IgKDsgaG1lbnVDb3VudGVyIDwgaG1lbnVMZW5ndGg7IGhtZW51Q291bnRlcisrKSB7XG4gICAgYWRkRXZlbnQoaGVhZGVyTWVudXNbaG1lbnVDb3VudGVyXSwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCAn7IOB64uoIOuEpOu5hOqyjOydtOyFmCDrsJQnLCAnQnV0dG9uIFByZXNzJywgdGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYScpWzBdLnRleHRDb250ZW50ICsgJyDtgbTrpq0nKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBmbWVudUNvdW50ZXIgPSAwLCBmbWVudUxlbmd0aCA9IGZvb3Rlck1lbnVzLmxlbmd0aDtcbiAgZm9yICg7IGZtZW51Q291bnRlciA8IGZtZW51TGVuZ3RoOyBmbWVudUNvdW50ZXIrKykge1xuICAgIGFkZEV2ZW50KGZvb3Rlck1lbnVzW2ZtZW51Q291bnRlcl0sICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGdhKCdzZW5kJywgJ2V2ZW50JywgJ+2VmOuLqCDrsJQnLCAnQnV0dG9uIFByZXNzJywgdGhpcy5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbiJdfQ==
