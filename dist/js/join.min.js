var debounce=function(e,t,n){var a;return function(){var d=this,r=arguments,c=function(){a=null,n||e.apply(d,r)},i=n&&!a;clearTimeout(a),a=setTimeout(c,t),i&&e.apply(d,r)}},serializing=function(e){var t="";e.match(/check_id/)?t+="user_id="+document.getElementById("user_id").value:e.match(/check_pw/)?(t+="user_id="+document.getElementById("user_id").value,t+="&password="+document.getElementById("password").value):e.match(/check_em/)&&(t+="email="+document.getElementById("email").value),checkValidation(e,t)},checkValidation=function(e,t){var n=new XMLHttpRequest;n.open("POST","/join/"+e,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){var e,t;if(e=4,t=200,4==n.readyState&&200==n.status){var a=JSON.parse(n.responseText);if(a.success)"id"===a.checkTarget?document.getElementById("id-validation-err")&&(document.getElementById("id-validation-err").outerHTML=""):"password"===a.checkTarget?document.getElementById("pw-validation-err")&&(document.getElementById("pw-validation-err").outerHTML=""):"email"===a.checkTarget&&document.getElementById("em-validation-err")&&(document.getElementById("em-validation-err").outerHTML="");else{var d,r;if("id"===a.checkTarget){switch(d="",a.errType){case"idLength":d="ID는 6~15 글자만 허용합니다.";break;case"duplicateId":d="이미 사용중인 ID 입니다.";break;case"idSpecial":d="특수 문자가 들어갈 수 없습니다.(_ 제외)"}document.getElementById("id-validation-err")?(document.getElementById("id-validation-err").innerHTML=d,document.getElementById("user_id").focus()):(r=document.createElement("span"),r.setAttribute("id","id-validation-err"),r.setAttribute("class","validation-err"),r.innerHTML=d,document.querySelectorAll('label[for="user_id"]')[0].insertAdjacentHTML("afterend",r.outerHTML),document.getElementById("user_id").focus())}else if("password"===a.checkTarget){switch(d="",a.errType){case"pwLength":d="10 ~ 15자리를 사용해야 합니다.";break;case"pwSpecial":d="특수문자를 1개 이상 사용해야 합니다.";break;case"mix":d="숫자와 영문자를 혼용하여야 합니다.";break;case"repetition":d="같은 문자를 4번 이상 사용하실 수 없습니다.";break;case"includeId":d="아이디가 포함되었습니다."}document.getElementById("pw-validation-err")?(document.getElementById("pw-validation-err").innerHTML=d,document.getElementById("password").focus()):(r=document.createElement("span"),r.setAttribute("id","pw-validation-err"),r.setAttribute("class","validation-err"),r.innerHTML=d,document.querySelectorAll('label[for="password"]')[0].insertAdjacentHTML("afterend",r.outerHTML),document.getElementById("password").focus())}else if("email"===a.checkTarget){switch(d="",a.errType){case"invalidEmail":d="올바르지 않은 E-mail 형식입니다.";break;case"duplicateEmail":d="이미 사용중인 E-mail 입니다."}document.getElementById("em-validation-err")?(document.getElementById("em-validation-err").innerHTML=d,document.getElementById("email").focus()):(r=document.createElement("span"),r.setAttribute("id","em-validation-err"),r.setAttribute("class","validation-err"),r.innerHTML=d,document.querySelectorAll('label[for="email"]')[0].insertAdjacentHTML("afterend",r.outerHTML),document.getElementById("email").focus())}}}},n.send(t)},ready=function(){addEvent(document.getElementById("join-submit"),"click",function(e){e.preventDefault();var t=document.getElementById("user_id").value,n=document.getElementById("name").value,a=document.getElementById("email").value,d=document.getElementById("password").value;return""===t?(alert("ID를 입력하지 않으셨습니다."),document.getElementById("user_id").focus(),!1):""===n?(alert("비밀번호를 입력하지 않으셨습니다."),document.getElementById("password").focus(),!1):""===a?(alert("E-Mail을 입력하지 않으셨습니다."),document.getElementById("password").focus(),!1):""===d?(alert("비밀번호를 입력하지 않으셨습니다."),document.getElementById("password").focus(),!1):t.length>=6&&t.length<=15?t.match(/[\s+=\-`~!@#$%^&*)(}{\]\[\'\"\:\;\.\,\>\<\?\/]/)?(alert("ID에는 특수 문자가 들어갈 수 없습니다.\n(_ 제외)"),document.getElementById("user_id").focus(),!1):a.match(/(\w)+\@(\w)+\.(\w)+/)?d.match(/[\s+=_\-`~!@#$%^&*)(}{\]\[\'\"\:\;\.\,\>\<\?\/]/)?d.match(/^(?=.*[a-zA-Z])(?=.*[\s+=_-`~!@#$%^&*)(}{\]\[\'\"\:\;\.\,\>\<\?\])(?=.*[0-9]).{8,16}$/)?d.search(/[0-9]/g)<0||d.search(/[a-z]/gi)<0?(alert("비밀번호는 숫자와 영문자를 혼용하여야 합니다."),document.getElementById("password").focus(),!1):/(\w)\1\1\1/.test(d)?(alert("비밀번호는 같은 문자를 4번 이상 사용하실 수 없습니다."),document.getElementById("password").focus(),!1):"string"==typeof t&&d.search(t)>-1?(alert("비밀번호에 아이디가 포함되었습니다."),document.getElementById("password").focus(),!1):void document.getElementById("join-form").submit():(alert("비밀번호는 10 ~ 15자리를 사용해야 합니다."),document.getElementById("password").focus(),!1):(alert("비밀번호는 키보드 상의 특수문자를 최소 1개 이상 사용해야 합니다."),document.getElementById("password").focus(),!1):(alert("올바르지 않은 E-mail 형식입니다."),document.getElementById("email").focus(),!1):(alert("ID는 6~15 글자만 허용합니다."),document.getElementById("user_id").focus(),!1)}),document.getElementById("user_id").onkeypress=debounce(function(){serializing("check_id")},400),document.getElementById("email").onkeypress=debounce(function(){serializing("check_em")},400),document.getElementById("password").onkeypress=debounce(function(){serializing("check_pw")},400)};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpvaW4ubWluLmpzIl0sIm5hbWVzIjpbImRlYm91bmNlIiwiY2IiLCJpbnRlcnZhbCIsImltbWVkaWF0ZSIsInRpbWVvdXQiLCJjb250ZXh0IiwidGhpcyIsImFyZ3MiLCJhcmd1bWVudHMiLCJsYXRlciIsImFwcGx5IiwiY2FsbE5vdyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzZXJpYWxpemluZyIsInRhcmdldCIsImRhdGEiLCJtYXRjaCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsImNoZWNrVmFsaWRhdGlvbiIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJET05FIiwiT0siLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwic3VjY2VzcyIsImNoZWNrVGFyZ2V0Iiwib3V0ZXJIVE1MIiwiZXJyTXNnIiwiZXJyRWxlbWVudCIsImVyclR5cGUiLCJpbm5lckhUTUwiLCJmb2N1cyIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwic2VuZCIsInJlYWR5IiwiYWRkRXZlbnQiLCJlIiwicHJldmVudERlZmF1bHQiLCJpZCIsIm5tIiwiZW0iLCJwdyIsImFsZXJ0IiwibGVuZ3RoIiwic2VhcmNoIiwidGVzdCIsInN1Ym1pdCIsIm9ua2V5cHJlc3MiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLFVBQVcsU0FBVUMsRUFBSUMsRUFBVUMsR0FDckMsR0FBSUMsRUFFSixPQUFPLFlBQ0wsR0FBSUMsR0FBVUMsS0FBTUMsRUFBT0MsVUFDdkJDLEVBQVEsV0FDVkwsRUFBVSxLQUNMRCxHQUFXRixFQUFHUyxNQUFNTCxFQUFTRSxJQUdoQ0ksRUFBVVIsSUFBY0MsQ0FFNUJRLGNBQWFSLEdBQ2JBLEVBQVVTLFdB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bUNBQ050QyxTQUFTQyxlQUFlLFlBQVl1QixTQUM3QixHQUdTLGdCQUFQVSxJQUFtQkcsRUFBR0csT0FBT04sR0FBTSxJQUM1Q0ksTUFBTSx1QkFDTnRDLFNBQVNDLGVBQWUsWUFBWXVCLFNBQzdCLE9BR1R4QixVQUFTQyxlQUFlLGFBQWF5QyxVQXZCbkNKLE1BQU0sOEJBQ050QyxTQUFTQyxlQUFlLFlBQVl1QixTQUM3QixJQVJQYyxNQUFNLHlDQUNOdEMsU0FBU0MsZUFBZSxZQUFZdUIsU0FDN0IsSUFSUGMsTUFBTSx5QkFDTnRDLFNBQVNDLGVBQWUsU0FBU3VCLFNBQzFCLElBZFBjLE1BQU0sdUJBQ050QyxTQUFTQyxlQUFlLFdBQVd1QixTQUM1QixLQWdEWHhCLFNBQVNDLGVBQWUsV0FBVzBDLFdBQWE3RCxTQUFTLFdBQ3ZEYyxZQUFZLGFBQ1gsS0FFSEksU0FBU0MsZUFBZSxTQUFTMEMsV0FBYTdELFNBQVMsV0FDckRjLFlBQVksYUFDWCxLQUVISSxTQUFTQyxlQUFlLFlBQVkwQyxXQUFhN0QsU0FBUyxXQUN4RGMsWUFBWSxhQUNYIiwiZmlsZSI6ImpvaW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlYm91bmNlID0gZnVuY3Rpb24gKGNiLCBpbnRlcnZhbCwgaW1tZWRpYXRlKSB7XG4gIHZhciB0aW1lb3V0O1xuXG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29udGV4dCA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGlmICghaW1tZWRpYXRlKSBjYi5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9O1xuXG4gICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG5cbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIGludGVydmFsKTtcblxuICAgIGlmIChjYWxsTm93KSBjYi5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgfTtcbn07XG5cbnZhciBzZXJpYWxpemluZyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgdmFyIGRhdGEgPSAnJztcblxuICBpZiAodGFyZ2V0Lm1hdGNoKC9jaGVja19pZC8pKSB7XG4gICAgZGF0YSArPSAndXNlcl9pZD0nICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfaWQnKS52YWx1ZTtcbiAgfSBlbHNlIGlmICh0YXJnZXQubWF0Y2goL2NoZWNrX3B3LykpIHtcbiAgICBkYXRhICs9ICd1c2VyX2lkPScgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcl9pZCcpLnZhbHVlO1xuICAgIGRhdGEgKz0gJyZwYXNzd29yZD0nICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykudmFsdWU7XG4gIH0gZWxzZSBpZiAodGFyZ2V0Lm1hdGNoKC9jaGVja19lbS8pKSB7XG4gICAgZGF0YSArPSAnZW1haWw9JyArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpLnZhbHVlO1xuICB9XG5cbiAgY2hlY2tWYWxpZGF0aW9uKHRhcmdldCwgZGF0YSk7XG59O1xuXG52YXIgY2hlY2tWYWxpZGF0aW9uID0gZnVuY3Rpb24gKHRhcmdldCwgZGF0YSkge1xuICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgeGhyLm9wZW4oJ1BPU1QnLCAnL2pvaW4vJyArIHRhcmdldCwgdHJ1ZSk7XG4gIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XG4gIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIERPTkUsIE9LO1xuXG4gICAgRE9ORSA9IDQ7XG4gICAgT0sgPSAyMDA7XG5cbiAgICBpZiAoeGhyLnJlYWR5U3RhdGUgIT0gNCB8fCB4aHIuc3RhdHVzICE9IDIwMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciByZXN1bHQgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuXG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICBpZiAocmVzdWx0LmNoZWNrVGFyZ2V0ID09PSAnaWQnKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWQtdmFsaWRhdGlvbi1lcnInKSkge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZC12YWxpZGF0aW9uLWVycicpLm91dGVySFRNTCA9ICcnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdC5jaGVja1RhcmdldCA9PT0gJ3Bhc3N3b3JkJykge1xuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B3LXZhbGlkYXRpb24tZXJyJykpIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHctdmFsaWRhdGlvbi1lcnInKS5vdXRlckhUTUwgPSAnJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZXN1bHQuY2hlY2tUYXJnZXQgPT09ICdlbWFpbCcpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbS12YWxpZGF0aW9uLWVycicpKSB7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtLXZhbGlkYXRpb24tZXJyJykub3V0ZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGVyck1zZywgZXJyRWxlbWVudDtcbiAgICAgIGlmIChyZXN1bHQuY2hlY2tUYXJnZXQgPT09ICdpZCcpIHtcbiAgICAgICAgZXJyTXNnID0gJyc7XG5cbiAgICAgICAgc3dpdGNoIChyZXN1bHQuZXJyVHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2lkTGVuZ3RoJzpcbiAgICAgICAgICAgIGVyck1zZyA9ICdJROuKlCA2fjE1IOq4gOyekOunjCDtl4jsmqntlanri4jri6QuJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2R1cGxpY2F0ZUlkJzpcbiAgICAgICAgICAgIGVyck1zZyA9ICfsnbTrr7gg7IKs7Jqp7KSR7J24IElEIOyeheuLiOuLpC4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnaWRTcGVjaWFsJzpcbiAgICAgICAgICAgIGVyck1zZyA9ICftirnsiJgg66y47J6Q6rCAIOuTpOyWtOqwiCDsiJgg7JeG7Iq164uI64ukLihfIOygnOyZuCknO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkLXZhbGlkYXRpb24tZXJyJykpIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWQtdmFsaWRhdGlvbi1lcnInKS5pbm5lckhUTUwgPSBlcnJNc2c7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfaWQnKS5mb2N1cygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVyckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgZXJyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2lkLXZhbGlkYXRpb24tZXJyJyk7XG4gICAgICAgICAgZXJyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3ZhbGlkYXRpb24tZXJyJyk7XG4gICAgICAgICAgZXJyRWxlbWVudC5pbm5lckhUTUwgPSBlcnJNc2c7XG5cbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsYWJlbFtmb3I9XCJ1c2VyX2lkXCJdJylbMF0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIGVyckVsZW1lbnQub3V0ZXJIVE1MKTtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcl9pZCcpLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmNoZWNrVGFyZ2V0ID09PSAncGFzc3dvcmQnKSB7XG4gICAgICAgIGVyck1zZyA9ICcnO1xuXG4gICAgICAgIHN3aXRjaCAocmVzdWx0LmVyclR5cGUpIHtcbiAgICAgICAgICBjYXNlICdwd0xlbmd0aCc6XG4gICAgICAgICAgICBlcnJNc2cgPSAnMTAgfiAxNeyekOumrOulvCDsgqzsmqntlbTslbwg7ZWp64uI64ukLic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdwd1NwZWNpYWwnOlxuICAgICAgICAgICAgZXJyTXNnID0gJ+2KueyImOusuOyekOulvCAx6rCcIOydtOyDgSDsgqzsmqntlbTslbwg7ZWp64uI64ukLic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdtaXgnOlxuICAgICAgICAgICAgZXJyTXNnID0gJ+yIq+yekOyZgCDsmIHrrLjsnpDrpbwg7Zi87Jqp7ZWY7Jes7JW8IO2VqeuLiOuLpC4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAncmVwZXRpdGlvbic6XG4gICAgICAgICAgICBlcnJNc2cgPSAn6rCZ7J2AIOusuOyekOulvCA067KIIOydtOyDgSDsgqzsmqntlZjsi6Qg7IiYIOyXhuyKteuLiOuLpC4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnaW5jbHVkZUlkJzpcbiAgICAgICAgICAgIGVyck1zZyA9ICfslYTsnbTrlJTqsIAg7Y+s7ZWo65CY7JeI7Iq164uI64ukLic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHctdmFsaWRhdGlvbi1lcnInKSkge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdy12YWxpZGF0aW9uLWVycicpLmlubmVySFRNTCA9IGVyck1zZztcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQnKS5mb2N1cygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVyckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgZXJyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3B3LXZhbGlkYXRpb24tZXJyJyk7XG4gICAgICAgICAgZXJyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3ZhbGlkYXRpb24tZXJyJyk7XG4gICAgICAgICAgZXJyRWxlbWVudC5pbm5lckhUTUwgPSBlcnJNc2c7XG5cbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsYWJlbFtmb3I9XCJwYXNzd29yZFwiXScpWzBdLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBlcnJFbGVtZW50Lm91dGVySFRNTCk7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZXN1bHQuY2hlY2tUYXJnZXQgPT09ICdlbWFpbCcpIHtcbiAgICAgICAgZXJyTXNnID0gJyc7XG5cbiAgICAgICAgc3dpdGNoIChyZXN1bHQuZXJyVHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2ludmFsaWRFbWFpbCc6XG4gICAgICAgICAgICBlcnJNc2cgPSAn7Jis67CU66W07KeAIOyViuydgCBFLW1haWwg7ZiV7Iud7J6F64uI64ukLic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdkdXBsaWNhdGVFbWFpbCc6XG4gICAgICAgICAgICBlcnJNc2cgPSAn7J2066+4IOyCrOyaqeykkeyduCBFLW1haWwg7J6F64uI64ukLic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW0tdmFsaWRhdGlvbi1lcnInKSkge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbS12YWxpZGF0aW9uLWVycicpLmlubmVySFRNTCA9IGVyck1zZztcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwnKS5mb2N1cygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVyckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgZXJyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2VtLXZhbGlkYXRpb24tZXJyJyk7XG4gICAgICAgICAgZXJyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3ZhbGlkYXRpb24tZXJyJyk7XG4gICAgICAgICAgZXJyRWxlbWVudC5pbm5lckhUTUwgPSBlcnJNc2c7XG5cbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsYWJlbFtmb3I9XCJlbWFpbFwiXScpWzBdLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBlcnJFbGVtZW50Lm91dGVySFRNTCk7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJykuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB4aHIuc2VuZChkYXRhKTtcbn07XG5cbnZhciByZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgYWRkRXZlbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pvaW4tc3VibWl0JyksICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfaWQnKS52YWx1ZTtcbiAgICB2YXIgbm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZScpLnZhbHVlO1xuICAgIHZhciBlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpLnZhbHVlO1xuICAgIHZhciBwdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLnZhbHVlO1xuXG4gICAgaWYgKGlkID09PSAnJykge1xuICAgICAgYWxlcnQoJ0lE66W8IOyeheugpe2VmOyngCDslYrsnLzshajsirXri4jri6QuJyk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcl9pZCcpLmZvY3VzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKG5tID09PSAnJykge1xuICAgICAgYWxlcnQoJ+u5hOuwgOuyiO2YuOulvCDsnoXroKXtlZjsp4Ag7JWK7Jy87IWo7Iq164uI64ukLicpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykuZm9jdXMoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZW0gPT09ICcnKSB7XG4gICAgICBhbGVydCgnRS1NYWls7J2EIOyeheugpe2VmOyngCDslYrsnLzshajsirXri4jri6QuJyk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQnKS5mb2N1cygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChwdyA9PT0gJycpIHtcbiAgICAgIGFsZXJ0KCfruYTrsIDrsojtmLjrpbwg7J6F66Cl7ZWY7KeAIOyViuycvOyFqOyKteuLiOuLpC4nKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLmZvY3VzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCEoaWQubGVuZ3RoID49IDYgJiYgaWQubGVuZ3RoIDw9IDE1KSkge1xuICAgICAgYWxlcnQoJ0lE64qUIDZ+MTUg6riA7J6Q66eMIO2XiOyaqe2VqeuLiOuLpC4nKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyX2lkJykuZm9jdXMoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoaWQubWF0Y2goL1tcXHMrPVxcLWB+IUAjJCVeJiopKH17XFxdXFxbXFwnXFxcIlxcOlxcO1xcLlxcLFxcPlxcPFxcP1xcL10vKSkge1xuICAgICAgYWxlcnQoJ0lE7JeQ64qUIO2KueyImCDrrLjsnpDqsIAg65Ok7Ja06rCIIOyImCDsl4bsirXri4jri6QuXFxuKF8g7KCc7Jm4KScpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfaWQnKS5mb2N1cygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghZW0ubWF0Y2goLyhcXHcpK1xcQChcXHcpK1xcLihcXHcpKy8pKSB7XG4gICAgICBhbGVydCgn7Jis67CU66W07KeAIOyViuydgCBFLW1haWwg7ZiV7Iud7J6F64uI64ukLicpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJykuZm9jdXMoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXB3Lm1hdGNoKC9bXFxzKz1fXFwtYH4hQCMkJV4mKikofXtcXF1cXFtcXCdcXFwiXFw6XFw7XFwuXFwsXFw+XFw8XFw/XFwvXS8pKSB7XG4gICAgICBhbGVydCgn67mE67CA67KI7Zi464qUIO2CpOuztOuTnCDsg4HsnZgg7Yq57IiY66y47J6Q66W8IOy1nOyGjCAx6rCcIOydtOyDgSDsgqzsmqntlbTslbwg7ZWp64uI64ukLicpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykuZm9jdXMoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXB3Lm1hdGNoKC9eKD89LipbYS16QS1aXSkoPz0uKltcXHMrPV8tYH4hQCMkJV4mKikofXtcXF1cXFtcXCdcXFwiXFw6XFw7XFwuXFwsXFw+XFw8XFw/XFxdKSg/PS4qWzAtOV0pLns4LDE2fSQvKSkge1xuICAgICAgYWxlcnQoJ+u5hOuwgOuyiO2YuOuKlCAxMCB+IDE17J6Q66as66W8IOyCrOyaqe2VtOyVvCDtlanri4jri6QuJyk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQnKS5mb2N1cygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChwdy5zZWFyY2goL1swLTldL2cpIDwgMCB8fCBwdy5zZWFyY2goL1thLXpdL2lnKSA8IDApIHtcbiAgICAgIGFsZXJ0KCfruYTrsIDrsojtmLjripQg7Iir7J6Q7JmAIOyYgeusuOyekOulvCDtmLzsmqntlZjsl6zslbwg7ZWp64uI64ukLicpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykuZm9jdXMoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoLyhcXHcpXFwxXFwxXFwxLy50ZXN0KHB3KSkge1xuICAgICAgYWxlcnQoJ+u5hOuwgOuyiO2YuOuKlCDqsJnsnYAg66y47J6Q66W8IDTrsogg7J207IOBIOyCrOyaqe2VmOyLpCDsiJgg7JeG7Iq164uI64ukLicpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykuZm9jdXMoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGlkID09PSAnc3RyaW5nJyAmJiBwdy5zZWFyY2goaWQpID4gLTEpIHtcbiAgICAgIGFsZXJ0KCfruYTrsIDrsojtmLjsl5Ag7JWE7J2065SU6rCAIO2PrO2VqOuQmOyXiOyKteuLiOuLpC4nKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLmZvY3VzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pvaW4tZm9ybScpLnN1Ym1pdCgpO1xuICB9KTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcl9pZCcpLm9ua2V5cHJlc3MgPSBkZWJvdW5jZShmdW5jdGlvbiAoKSB7XG4gICAgc2VyaWFsaXppbmcoJ2NoZWNrX2lkJyk7XG4gIH0sIDQwMCk7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJykub25rZXlwcmVzcyA9IGRlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICBzZXJpYWxpemluZygnY2hlY2tfZW0nKTtcbiAgfSwgNDAwKTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQnKS5vbmtleXByZXNzID0gZGVib3VuY2UoZnVuY3Rpb24gKCkge1xuICAgIHNlcmlhbGl6aW5nKCdjaGVja19wdycpO1xuICB9LCA0MDApO1xufTtcblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
