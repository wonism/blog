var debounce=function(e,t,n){var a;return function(){var d=this,r=arguments,c=function(){a=null,n||e.apply(d,r)},i=n&&!a;clearTimeout(a),a=setTimeout(c,t),i&&e.apply(d,r)}},serializing=function(e){var t="";e.match(/check_id/)?t+="user_id="+document.getElementById("user_id").value:e.match(/check_pw/)?(t+="user_id="+document.getElementById("user_id").value,t+="&password="+document.getElementById("password").value):e.match(/check_em/)&&(t+="email="+document.getElementById("email").value),checkValidation(e,t)},checkValidation=function(e,t){var n=new XMLHttpRequest;n.open("POST","/join/"+e,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){var e,t;if(e=4,t=200,4==n.readyState&&200==n.status){var a=JSON.parse(n.responseText);if(a.success)"id"===a.checkTarget?document.getElementById("id-validation-err")&&(document.getElementById("id-validation-err").outerHTML=""):"password"===a.checkTarget?document.getElementById("pw-validation-err")&&(document.getElementById("pw-validation-err").outerHTML=""):"email"===a.checkTarget&&document.getElementById("em-validation-err")&&(document.getElementById("em-validation-err").outerHTML="");else{var d,r;if("id"===a.checkTarget){switch(d="",a.errType){case"idLength":d="ID는 6~15 글자만 허용합니다.";break;case"duplicateId":d="이미 사용중인 ID 입니다.";break;case"idSpecial":d="특수 문자가 들어갈 수 없습니다.(_ 제외)"}document.getElementById("id-validation-err")?(document.getElementById("id-validation-err").innerHTML=d,document.getElementById("user_id").focus()):(r=document.createElement("span"),r.setAttribute("id","id-validation-err"),r.setAttribute("class","validation-err"),r.innerHTML=d,document.querySelectorAll('label[for="user_id"]')[0].insertAdjacentHTML("afterend",r.outerHTML),document.getElementById("user_id").focus())}else if("password"===a.checkTarget){switch(d="",a.errType){case"pwLength":d="10 ~ 15자리를 사용해야 합니다.";break;case"pwSpecial":d="특수문자를 1개 이상 사용해야 합니다.";break;case"mix":d="숫자와 영문자를 혼용하여야 합니다.";break;case"repetition":d="같은 문자를 4번 이상 사용하실 수 없습니다.";break;case"includeId":d="아이디가 포함되었습니다."}document.getElementById("pw-validation-err")?(document.getElementById("pw-validation-err").innerHTML=d,document.getElementById("password").focus()):(r=document.createElement("span"),r.setAttribute("id","pw-validation-err"),r.setAttribute("class","validation-err"),r.innerHTML=d,document.querySelectorAll('label[for="password"]')[0].insertAdjacentHTML("afterend",r.outerHTML),document.getElementById("password").focus())}else if("email"===a.checkTarget){switch(d="",a.errType){case"invalidEmail":d="올바르지 않은 E-mail 형식입니다.";break;case"duplicateEmail":d="이미 사용중인 E-mail 입니다."}document.getElementById("em-validation-err")?(document.getElementById("em-validation-err").innerHTML=d,document.getElementById("email").focus()):(r=document.createElement("span"),r.setAttribute("id","em-validation-err"),r.setAttribute("class","validation-err"),r.innerHTML=d,document.querySelectorAll('label[for="email"]')[0].insertAdjacentHTML("afterend",r.outerHTML),document.getElementById("email").focus())}}}},n.send(t)},ready=function(){addEvent(document.getElementById("join-submit"),"click",function(e){e.preventDefault();var t=document.getElementById("user_id").value,n=document.getElementById("name").value,a=document.getElementById("email").value,d=document.getElementById("password").value;return""===t?(alert("ID를 입력하지 않으셨습니다."),document.getElementById("user_id").focus(),!1):""===n?(alert("비밀번호를 입력하지 않으셨습니다."),document.getElementById("password").focus(),!1):""===a?(alert("E-Mail을 입력하지 않으셨습니다."),document.getElementById("password").focus(),!1):""===d?(alert("비밀번호를 입력하지 않으셨습니다."),document.getElementById("password").focus(),!1):t.length>=6&&t.length<=15?t.match(/[\s+=\-`~!@#$%^&*)(}{\]\[\'\"\:\;\.\,\>\<\?\/]/)?(alert("ID에는 특수 문자가 들어갈 수 없습니다.\n(_ 제외)"),document.getElementById("user_id").focus(),!1):a.match(/(\w)+\@(\w)+\.(\w)+/)?d.match(/[\s+=_\-`~!@#$%^&*)(}{\]\[\'\"\:\;\.\,\>\<\?\/]/)?d.match(/^(?=.*[a-zA-Z])(?=.*[\s+=_-`~!@#$%^&*)(}{\]\[\'\"\:\;\.\,\>\<\?\])(?=.*[0-9]).{8,16}$/)?d.search(/[0-9]/g)<0||d.search(/[a-z]/gi)<0?(alert("비밀번호는 숫자와 영문자를 혼용하여야 합니다."),document.getElementById("password").focus(),!1):/(\w)\1\1\1/.test(d)?(alert("비밀번호는 같은 문자를 4번 이상 사용하실 수 없습니다."),document.getElementById("password").focus(),!1):"string"==typeof t&&d.search(t)>-1?(alert("비밀번호에 아이디가 포함되었습니다."),document.getElementById("password").focus(),!1):void document.getElementById("join-form").submit():(alert("비밀번호는 10 ~ 15자리를 사용해야 합니다."),document.getElementById("password").focus(),!1):(alert("비밀번호는 키보드 상의 특수문자를 최소 1개 이상 사용해야 합니다."),document.getElementById("password").focus(),!1):(alert("올바르지 않은 E-mail 형식입니다."),document.getElementById("email").focus(),!1):(alert("ID는 6~15 글자만 허용합니다."),document.getElementById("user_id").focus(),!1)}),document.getElementById("user_id").onkeypress=debounce(function(){serializing("check_id")},400),document.getElementById("email").onkeypress=debounce(function(){serializing("check_em")},400),document.getElementById("password").onkeypress=debounce(function(){serializing("check_pw")},400)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpvaW4ubWluLmpzIl0sIm5hbWVzIjpbImRlYm91bmNlIiwiY2IiLCJpbnRlcnZhbCIsImltbWVkaWF0ZSIsInRpbWVvdXQiLCJjb250ZXh0IiwidGhpcyIsImFyZ3MiLCJhcmd1bWVudHMiLCJsYXRlciIsImFwcGx5IiwiY2FsbE5vdyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzZXJpYWxpemluZyIsInRhcmdldCIsImRhdGEiLCJtYXRjaCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsImNoZWNrVmFsaWRhdGlvbiIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJET05FIiwiT0siLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwic3VjY2VzcyIsImNoZWNrVGFyZ2V0Iiwib3V0ZXJIVE1MIiwiZXJyTXNnIiwiZXJyRWxlbWVudCIsImVyclR5cGUiLCJpbm5lckhUTUwiLCJmb2N1cyIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwic2VuZCIsInJlYWR5IiwiYWRkRXZlbnQiLCJlIiwicHJldmVudERlZmF1bHQiLCJpZCIsIm5tIiwiZW0iLCJwdyIsImFsZXJ0IiwibGVuZ3RoIiwic2VhcmNoIiwidGVzdCIsInN1Ym1pdCIsIm9ua2V5cHJlc3MiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLFVBQVcsU0FBVUMsRUFBSUMsRUFBVUMsR0FDckMsR0FBSUMsRUFFSixPQUFPLFlBQ0wsR0FBSUMsR0FBVUMsS0FBTUMsRUFBT0MsVUFDdkJDLEVBQVEsV0FDVkwsRUFBVSxLQUNMRCxHQUFXRixFQUFHUyxNQUFNTCxFQUFTRSxJQUdoQ0ksRUFBVVIsSUFBY0MsQ0FFNUJRLGNBQWFSLEdBQ2JBLEVBQVVTLFdB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bUNBQ050QyxTQUFTQyxlQUFlLFlBQVl1QixTQUM3QixHQUdTLGdCQUFQVSxJQUFtQkcsRUFBR0csT0FBT04sT0FDdENJLE1BQU0sdUJBQ050QyxTQUFTQyxlQUFlLFlBQVl1QixTQUM3QixPQUdUeEIsVUFBU0MsZUFBZSxhQUFheUMsVUF2Qm5DSixNQUFNLDhCQUNOdEMsU0FBU0MsZUFBZSxZQUFZdUIsU0FDN0IsSUFSUGMsTUFBTSx5Q0FDTnRDLFNBQVNDLGVBQWUsWUFBWXVCLFNBQzdCLElBUlBjLE1BQU0seUJBQ050QyxTQUFTQyxlQUFlLFNBQVN1QixTQUMxQixJQWRQYyxNQUFNLHVCQUNOdEMsU0FBU0MsZUFBZSxXQUFXdUIsU0FDNUIsS0FnRFh4QixTQUFTQyxlQUFlLFdBQVcwQyxXQUFhN0QsU0FBUyxXQUN2RGMsWUFBWSxhQUNYLEtBRUhJLFNBQVNDLGVBQWUsU0FBUzBDLFdBQWE3RCxTQUFTLFdBQ3JEYyxZQUFZLGFBQ1gsS0FFSEksU0FBU0MsZUFBZSxZQUFZMEMsV0FBYTdELFNBQVMsV0FDeERjLFlBQVksYUFDWCIsImZpbGUiOiJqb2luLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBkZWJvdW5jZSA9IGZ1bmN0aW9uIChjYiwgaW50ZXJ2YWwsIGltbWVkaWF0ZSkge1xuICB2YXIgdGltZW91dDtcblxuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoIWltbWVkaWF0ZSkgY2IuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfTtcblxuICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuXG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCBpbnRlcnZhbCk7XG5cbiAgICBpZiAoY2FsbE5vdykgY2IuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gIH07XG59O1xuXG52YXIgc2VyaWFsaXppbmcgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIHZhciBkYXRhID0gJyc7XG5cbiAgaWYgKHRhcmdldC5tYXRjaCgvY2hlY2tfaWQvKSkge1xuICAgIGRhdGEgKz0gJ3VzZXJfaWQ9JyArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyX2lkJykudmFsdWU7XG4gIH0gZWxzZSBpZiAodGFyZ2V0Lm1hdGNoKC9jaGVja19wdy8pKSB7XG4gICAgZGF0YSArPSAndXNlcl9pZD0nICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfaWQnKS52YWx1ZTtcbiAgICBkYXRhICs9ICcmcGFzc3dvcmQ9JyArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLnZhbHVlO1xuICB9IGVsc2UgaWYgKHRhcmdldC5tYXRjaCgvY2hlY2tfZW0vKSkge1xuICAgIGRhdGEgKz0gJ2VtYWlsPScgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwnKS52YWx1ZTtcbiAgfVxuXG4gIGNoZWNrVmFsaWRhdGlvbih0YXJnZXQsIGRhdGEpO1xufTtcblxudmFyIGNoZWNrVmFsaWRhdGlvbiA9IGZ1bmN0aW9uICh0YXJnZXQsIGRhdGEpIHtcbiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gIHhoci5vcGVuKCdQT1NUJywgJy9qb2luLycgKyB0YXJnZXQsIHRydWUpO1xuICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xuICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBET05FLCBPSztcblxuICAgIERPTkUgPSA0O1xuICAgIE9LID0gMjAwO1xuXG4gICAgaWYgKHhoci5yZWFkeVN0YXRlICE9IDQgfHwgeGhyLnN0YXR1cyAhPSAyMDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcblxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgaWYgKHJlc3VsdC5jaGVja1RhcmdldCA9PT0gJ2lkJykge1xuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkLXZhbGlkYXRpb24tZXJyJykpIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWQtdmFsaWRhdGlvbi1lcnInKS5vdXRlckhUTUwgPSAnJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZXN1bHQuY2hlY2tUYXJnZXQgPT09ICdwYXNzd29yZCcpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdy12YWxpZGF0aW9uLWVycicpKSB7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B3LXZhbGlkYXRpb24tZXJyJykub3V0ZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmNoZWNrVGFyZ2V0ID09PSAnZW1haWwnKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW0tdmFsaWRhdGlvbi1lcnInKSkge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbS12YWxpZGF0aW9uLWVycicpLm91dGVySFRNTCA9ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlcnJNc2csIGVyckVsZW1lbnQ7XG4gICAgICBpZiAocmVzdWx0LmNoZWNrVGFyZ2V0ID09PSAnaWQnKSB7XG4gICAgICAgIGVyck1zZyA9ICcnO1xuXG4gICAgICAgIHN3aXRjaCAocmVzdWx0LmVyclR5cGUpIHtcbiAgICAgICAgICBjYXNlICdpZExlbmd0aCc6XG4gICAgICAgICAgICBlcnJNc2cgPSAnSUTripQgNn4xNSDquIDsnpDrp4wg7ZeI7Jqp7ZWp64uI64ukLic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdkdXBsaWNhdGVJZCc6XG4gICAgICAgICAgICBlcnJNc2cgPSAn7J2066+4IOyCrOyaqeykkeyduCBJRCDsnoXri4jri6QuJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2lkU3BlY2lhbCc6XG4gICAgICAgICAgICBlcnJNc2cgPSAn7Yq57IiYIOusuOyekOqwgCDrk6TslrTqsIgg7IiYIOyXhuyKteuLiOuLpC4oXyDsoJzsmbgpJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZC12YWxpZGF0aW9uLWVycicpKSB7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkLXZhbGlkYXRpb24tZXJyJykuaW5uZXJIVE1MID0gZXJyTXNnO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyX2lkJykuZm9jdXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlcnJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgIGVyckVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsICdpZC12YWxpZGF0aW9uLWVycicpO1xuICAgICAgICAgIGVyckVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsICd2YWxpZGF0aW9uLWVycicpO1xuICAgICAgICAgIGVyckVsZW1lbnQuaW5uZXJIVE1MID0gZXJyTXNnO1xuXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGFiZWxbZm9yPVwidXNlcl9pZFwiXScpWzBdLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBlcnJFbGVtZW50Lm91dGVySFRNTCk7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfaWQnKS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdC5jaGVja1RhcmdldCA9PT0gJ3Bhc3N3b3JkJykge1xuICAgICAgICBlcnJNc2cgPSAnJztcblxuICAgICAgICBzd2l0Y2ggKHJlc3VsdC5lcnJUeXBlKSB7XG4gICAgICAgICAgY2FzZSAncHdMZW5ndGgnOlxuICAgICAgICAgICAgZXJyTXNnID0gJzEwIH4gMTXsnpDrpqzrpbwg7IKs7Jqp7ZW07JW8IO2VqeuLiOuLpC4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAncHdTcGVjaWFsJzpcbiAgICAgICAgICAgIGVyck1zZyA9ICftirnsiJjrrLjsnpDrpbwgMeqwnCDsnbTsg4Eg7IKs7Jqp7ZW07JW8IO2VqeuLiOuLpC4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnbWl4JzpcbiAgICAgICAgICAgIGVyck1zZyA9ICfsiKvsnpDsmYAg7JiB66y47J6Q66W8IO2YvOyaqe2VmOyXrOyVvCDtlanri4jri6QuJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3JlcGV0aXRpb24nOlxuICAgICAgICAgICAgZXJyTXNnID0gJ+qwmeydgCDrrLjsnpDrpbwgNOuyiCDsnbTsg4Eg7IKs7Jqp7ZWY7IukIOyImCDsl4bsirXri4jri6QuJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2luY2x1ZGVJZCc6XG4gICAgICAgICAgICBlcnJNc2cgPSAn7JWE7J2065SU6rCAIO2PrO2VqOuQmOyXiOyKteuLiOuLpC4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B3LXZhbGlkYXRpb24tZXJyJykpIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHctdmFsaWRhdGlvbi1lcnInKS5pbm5lckhUTUwgPSBlcnJNc2c7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykuZm9jdXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlcnJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgIGVyckVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsICdwdy12YWxpZGF0aW9uLWVycicpO1xuICAgICAgICAgIGVyckVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsICd2YWxpZGF0aW9uLWVycicpO1xuICAgICAgICAgIGVyckVsZW1lbnQuaW5uZXJIVE1MID0gZXJyTXNnO1xuXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGFiZWxbZm9yPVwicGFzc3dvcmRcIl0nKVswXS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgZXJyRWxlbWVudC5vdXRlckhUTUwpO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmNoZWNrVGFyZ2V0ID09PSAnZW1haWwnKSB7XG4gICAgICAgIGVyck1zZyA9ICcnO1xuXG4gICAgICAgIHN3aXRjaCAocmVzdWx0LmVyclR5cGUpIHtcbiAgICAgICAgICBjYXNlICdpbnZhbGlkRW1haWwnOlxuICAgICAgICAgICAgZXJyTXNnID0gJ+yYrOuwlOultOyngCDslYrsnYAgRS1tYWlsIO2YleyLneyeheuLiOuLpC4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZHVwbGljYXRlRW1haWwnOlxuICAgICAgICAgICAgZXJyTXNnID0gJ+ydtOuvuCDsgqzsmqnspJHsnbggRS1tYWlsIOyeheuLiOuLpC4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtLXZhbGlkYXRpb24tZXJyJykpIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW0tdmFsaWRhdGlvbi1lcnInKS5pbm5lckhUTUwgPSBlcnJNc2c7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJykuZm9jdXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlcnJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgIGVyckVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsICdlbS12YWxpZGF0aW9uLWVycicpO1xuICAgICAgICAgIGVyckVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsICd2YWxpZGF0aW9uLWVycicpO1xuICAgICAgICAgIGVyckVsZW1lbnQuaW5uZXJIVE1MID0gZXJyTXNnO1xuXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGFiZWxbZm9yPVwiZW1haWxcIl0nKVswXS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgZXJyRWxlbWVudC5vdXRlckhUTUwpO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgeGhyLnNlbmQoZGF0YSk7XG59O1xuXG52YXIgcmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gIGFkZEV2ZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqb2luLXN1Ym1pdCcpLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyX2lkJykudmFsdWU7XG4gICAgdmFyIG5tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWUnKS52YWx1ZTtcbiAgICB2YXIgZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwnKS52YWx1ZTtcbiAgICB2YXIgcHcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQnKS52YWx1ZTtcblxuICAgIGlmIChpZCA9PT0gJycpIHtcbiAgICAgIGFsZXJ0KCdJROulvCDsnoXroKXtlZjsp4Ag7JWK7Jy87IWo7Iq164uI64ukLicpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfaWQnKS5mb2N1cygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChubSA9PT0gJycpIHtcbiAgICAgIGFsZXJ0KCfruYTrsIDrsojtmLjrpbwg7J6F66Cl7ZWY7KeAIOyViuycvOyFqOyKteuLiOuLpC4nKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLmZvY3VzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGVtID09PSAnJykge1xuICAgICAgYWxlcnQoJ0UtTWFpbOydhCDsnoXroKXtlZjsp4Ag7JWK7Jy87IWo7Iq164uI64ukLicpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykuZm9jdXMoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAocHcgPT09ICcnKSB7XG4gICAgICBhbGVydCgn67mE67CA67KI7Zi466W8IOyeheugpe2VmOyngCDslYrsnLzshajsirXri4jri6QuJyk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQnKS5mb2N1cygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghKGlkLmxlbmd0aCA+PSA2ICYmIGlkLmxlbmd0aCA8PSAxNSkpIHtcbiAgICAgIGFsZXJ0KCdJROuKlCA2fjE1IOq4gOyekOunjCDtl4jsmqntlanri4jri6QuJyk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcl9pZCcpLmZvY3VzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGlkLm1hdGNoKC9bXFxzKz1cXC1gfiFAIyQlXiYqKSh9e1xcXVxcW1xcJ1xcXCJcXDpcXDtcXC5cXCxcXD5cXDxcXD9cXC9dLykpIHtcbiAgICAgIGFsZXJ0KCdJROyXkOuKlCDtirnsiJgg66y47J6Q6rCAIOuTpOyWtOqwiCDsiJgg7JeG7Iq164uI64ukLlxcbihfIOygnOyZuCknKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyX2lkJykuZm9jdXMoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIWVtLm1hdGNoKC8oXFx3KStcXEAoXFx3KStcXC4oXFx3KSsvKSkge1xuICAgICAgYWxlcnQoJ+yYrOuwlOultOyngCDslYrsnYAgRS1tYWlsIO2YleyLneyeheuLiOuLpC4nKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpLmZvY3VzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCFwdy5tYXRjaCgvW1xccys9X1xcLWB+IUAjJCVeJiopKH17XFxdXFxbXFwnXFxcIlxcOlxcO1xcLlxcLFxcPlxcPFxcP1xcL10vKSkge1xuICAgICAgYWxlcnQoJ+u5hOuwgOuyiO2YuOuKlCDtgqTrs7Trk5wg7IOB7J2YIO2KueyImOusuOyekOulvCDstZzshowgMeqwnCDsnbTsg4Eg7IKs7Jqp7ZW07JW8IO2VqeuLiOuLpC4nKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLmZvY3VzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCFwdy5tYXRjaCgvXig/PS4qW2EtekEtWl0pKD89LipbXFxzKz1fLWB+IUAjJCVeJiopKH17XFxdXFxbXFwnXFxcIlxcOlxcO1xcLlxcLFxcPlxcPFxcP1xcXSkoPz0uKlswLTldKS57OCwxNn0kLykpIHtcbiAgICAgIGFsZXJ0KCfruYTrsIDrsojtmLjripQgMTAgfiAxNeyekOumrOulvCDsgqzsmqntlbTslbwg7ZWp64uI64ukLicpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykuZm9jdXMoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAocHcuc2VhcmNoKC9bMC05XS9nKSA8IDAgfHwgcHcuc2VhcmNoKC9bYS16XS9pZykgPCAwKSB7XG4gICAgICBhbGVydCgn67mE67CA67KI7Zi464qUIOyIq+yekOyZgCDsmIHrrLjsnpDrpbwg7Zi87Jqp7ZWY7Jes7JW8IO2VqeuLiOuLpC4nKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLmZvY3VzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKC8oXFx3KVxcMVxcMVxcMS8udGVzdChwdykpIHtcbiAgICAgIGFsZXJ0KCfruYTrsIDrsojtmLjripQg6rCZ7J2AIOusuOyekOulvCA067KIIOydtOyDgSDsgqzsmqntlZjsi6Qg7IiYIOyXhuyKteuLiOuLpC4nKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLmZvY3VzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycgJiYgcHcuc2VhcmNoKGlkKSA+IC0xKSB7XG4gICAgICBhbGVydCgn67mE67CA67KI7Zi47JeQIOyVhOydtOuUlOqwgCDtj6ztlajrkJjsl4jsirXri4jri6QuJyk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQnKS5mb2N1cygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqb2luLWZvcm0nKS5zdWJtaXQoKTtcbiAgfSk7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfaWQnKS5vbmtleXByZXNzID0gZGVib3VuY2UoZnVuY3Rpb24gKCkge1xuICAgIHNlcmlhbGl6aW5nKCdjaGVja19pZCcpO1xuICB9LCA0MDApO1xuXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpLm9ua2V5cHJlc3MgPSBkZWJvdW5jZShmdW5jdGlvbiAoKSB7XG4gICAgc2VyaWFsaXppbmcoJ2NoZWNrX2VtJyk7XG4gIH0sIDQwMCk7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykub25rZXlwcmVzcyA9IGRlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICBzZXJpYWxpemluZygnY2hlY2tfcHcnKTtcbiAgfSwgNDAwKTtcbn07XG5cbiJdfQ==
