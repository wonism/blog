var ready=function(){var t,e,a,s,n,o=function(t,e){var a=Date.now();return function(){a+e-Date.now()<0&&(t(),a=Date.now())}},r='<article class="post-card"><a class="post-image-link" href="/posts/{{id}}"><img class="post-image" src="{{background_image}}" alt="post image"></a><section class="post-information"><i class="fa fa-tags"></i><a class="post-category-link" href="/posts/categories/{{category_id}}"><span class="post-category-name">{{category_id}}</span></a>&nbsp;&nbsp;<i class="fa fa-calendar"></i><span class="post-registered">{{created_at}}</span><a class="post-link-title" href="/posts/{{id}}"><h1 class="post-title">{{title}}</h1></a><p class="post-content">{{text}}</p><a class="" href="/posts/{{id}}">Go to Link →</a></section></article>',c=function(){var o=jj(".pagination")[0],c=jj(".pagination .next a")[0];if(e=supportPageOffset?window.pageXOffset:isCSS1Compat?document.documentElement.scrollLeft:document.body.scrollLeft,a=supportPageOffset?window.pageYOffset:isCSS1Compat?document.documentElement.scrollTop:document.body.scrollTop,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c&&a>document.body.scrollHeight-2*n){var l,d,p,m,g,u,f,h;if(c.parentNode.setAttribute("class",""),l=c.getAttribute("href"),u={},f={},h={},l){var y=document.createElement("div"),C='<article class="post-card"><div class="post-image empty"></div><section class="post-information"><div class="placeholder"><i class="fa fa-tags"></i><span class="post-category-name">{{category_id}}</span>&nbsp;&nbsp;<i class="fa fa-calendar"></i><span class="post-registered">{{created_at}}</span></div><h1 class="post-title placeholder">{{title}}</h1><p class="post-content placeholder">{{text}}</p><span class="placeholder">Go to Link →</span></section></article>';y.setAttribute("id","post-placeholder"),y.insertAdjacentHTML("beforeend",C),jj("#body-container").appendChild(y),d=new XMLHttpRequest,d.open("GET",l),d.onreadystatechange=function(){var e,a,s=jj("#post-placeholder");if(e=4,a=200,4==d.readyState&&200==d.status){p=JSON.parse(d.responseText),m=p.pages,g=p.page,h=p.posts,u=p.categories;for(var n=0;n<u.length;n++){var c=u[n].id;f[c]=u[n].name}if(s&&s.remove(),h){var l,y,C;for(l=[],postCounter=0;postCounter<h.length;postCounter++){for(var b=r,N=h[postCounter],v="";b.match(/(?:\{{2})(\w{1,})+(?:\}{2})/);)if(v=b.match(/(?:\{{2})(\w{1,})+(?:\}{2})/)[1],"created_at"===v){var w=N[v],E="",A=["JAN","FAB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];E=""+A[(w.match(/(?:\d{4}-)(\d{2})(?:-\d{2})+/)[1]>>0)-1]+" "+w.match(/(?:\d{4}-\d{2}-)(\d{2})/)[1]+". "+w.match(/(\d{4})(?:-\d{2}-\d{2})/)[1],b=b.replace(/(?:\{{2})(\w{1,})+(?:\}{2})/,E)}else b=N[v].length>200?b.replace(/(?:\{{2})(\w{1,})+(?:\}{2})/,N[v].substring(0,200)+"..."):b.replace(/(?:\{{2})(\w{1,})+(?:\}{2})/,N[v]);for(;b.match(/(?:<span[^>]*>)(\d{1,})+(?:\<\/span\>)/);)v=b.match(/(?:<span[^>]*>)(\d{1,})+(?:\<\/span\>)/)[1],b=b.replace(/(?:<span[^>]*>)(\d{1,})+(?:\<\/span\>)/,'<span class="post-category-name"> '+f[v]+" </span>");l.push(b)}for(t.insertAdjacentHTML("beforeend",l.join("")),t.removeChild(o),y=document.createElement("ul"),y.setAttribute("class","list-layout pagination none"),C=[],i=g;i<=m;i++){var x=document.createElement("li"),B=document.createElement("a");i===g?x.setAttribute("class","active"):i===g+1&&x.setAttribute("class","next"),B.setAttribute("href","/?page="+i),x.appendChild(B),y.appendChild(x)}t.insertAdjacentHTML("beforeend",y.outerHTML)}}},d.send()}}};t=jj("#body-container"),e=supportPageOffset?window.pageXOffset:isCSS1Compat?document.documentElement.scrollLeft:document.body.scrollLeft,a=supportPageOffset?window.pageYOffset:isCSS1Compat?document.documentElement.scrollTop:document.body.scrollTop,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,addEvent(document.body,"click",function(t){t.target.className&&(t.target.className.match(/^post\-link\-image$/)?ga("send","event","메인","Button Press","포스트 클릭 - ["+t.target.parentNode.getElementsByClassName("post-category-name")[0].textContent.trim()+"] "+t.target.parentNode.getElementsByClassName("post-title")[0].textContent.trim()):t.target.className.match(/^post\-thumbnail$/)?ga("send","event","메인","Button Press","포스트 클릭 - ["+t.target.parentNode.parentNode.getElementsByClassName("post-category-name")[0].textContent.trim()+"] "+t.target.parentNode.parentNode.getElementsByClassName("post-title")[0].textContent.trim()):t.target.className.match(/^post\-link\-title$/)?ga("send","event","메인","Button Press","포스트 클릭 - ["+t.target.parentNode.getElementsByClassName("post-category-name")[0].textContent.trim()+"] "+t.target.getElementsByClassName("post-title")[0].textContent.trim()):t.target.className.match(/^post\-title$|^post\-title\s/)?ga("send","event","메인","Button Press","포스트 클릭 - ["+t.target.parentNode.parentNode.getElementsByClassName("post-category-name")[0].textContent.trim()+"] "+t.target.textContent.trim()):t.target.className.match(/^post\-category\-link/)?ga("send","event","메인","Button Press","포스트 카테고리 클릭 - "+t.target.getElementsByClassName("post-category-name")[0].textContent.trim()):t.target.className.match(/^post\-category\-name/)&&ga("send","event","메인","Button Press","포스트 카테고리 클릭 - "+t.target.textContent.trim()))}),window.onscroll=o(c,100)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4ubWluLmpzIl0sIm5hbWVzIjpbInJlYWR5IiwiYm9keUNvbnRhaW5lciIsImN1cnJlbnRYIiwiY3VycmVudFkiLCJ3aW5kb3dYIiwid2luZG93WSIsInRocm90dGxlIiwiY2IiLCJpbnRlcnZhbCIsIm5vdyIsIkRhdGUiLCJjYXJkVGVtcGxhdGUiLCJnZXRQb3N0cyIsInBhZ2luYXRpb24iLCJqaiIsIm5leHRQYWdlIiwic3VwcG9ydFBhZ2VPZmZzZXQiLCJ3aW5kb3ciLCJwYWdlWE9mZnNldCIsImlzQ1NTMUNvbXBhdCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsTGVmdCIsImJvZHkiLCJwYWdlWU9mZnNldCIsInNjcm9sbFRvcCIsImlubmVyV2lkdGgiLCJjbGllbnRXaWR0aCIsImlubmVySGVpZ2h0IiwiY2xpZW50SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwibmV4dFVybCIsInhociIsInJlc3VsdCIsInBhZ2VzIiwicGFnZSIsImNhdGVnb3JpZXMiLCJjYXRlZ29yeUlkTmFtZSIsInBvc3RzIiwicGFyZW50Tm9kZSIsInNldEF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIm5ld1BsYWNlaG9sZGVyIiwiY3JlYXRlRWxlbWVudCIsInBsYWNlaG9sZGVyVGV4dCIsImluc2VydEFkamFjZW50SFRNTCIsImFwcGVuZENoaWxkIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwiRE9ORSIsIk9LIiwicGxhY2Vob2xkZXIiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiY2F0ZWdvcnlDb3VudGVyIiwibGVuZ3RoIiwiaWRTdHIiLCJpZCIsIm5hbWUiLCJyZW1vdmUiLCJ0ZW1wbGF0ZUFyciIsInVsIiwibGlBcnIiLCJwb3N0Q291bnRlciIsInRlbXBsYXRlIiwicG9zdCIsImtleSIsIm1hdGNoIiwiZGF0ZSIsImRhdGVTdHIiLCJtb250aFN0ckFyciIsInJlcGxhY2UiLCJzdWJzdHJpbmciLCJwdXNoIiwiam9pbiIsInJlbW92ZUNoaWxkIiwiaSIsImxpIiwiYSIsIm91dGVySFRNTCIsInNlbmQiLCJhZGRFdmVudCIsImUiLCJ0YXJnZXQiLCJjbGFzc05hbWUiLCJnYSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJ0ZXh0Q29udGVudCIsInRyaW0iLCJvbnNjcm9sbCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsT0FBUSxXQUNWLEdBQUlDLEdBQ0FDLEVBQVVDLEVBQ1ZDLEVBQVNDLEVBRVRDLEVBQVcsU0FBVUMsRUFBSUMsR0FDM0IsR0FBSUMsR0FBTUMsS0FBS0QsS0FFZixPQUFPLFlBQ0FBLEVBQU1ELEVBQVdFLEtBQUtELE1BQVMsSUFDbENGLElBQ0FFLEVBQU1DLEtBQUtELFNBS2JFLEVBQWUsbW5CQTJCZkMsRUFBVyxXQUNiLEdBQUlDLEdBQWFDLEdBQUcsZUFBZSxHQUMvQkMsRUFBV0QsR0FBRyx1QkFBdUIsRUFRekMsSUFOQVosRUFBV2Msa0JBQW9CQyxPQUFPQyxZQUFjQyxhQUFlQyxTQUFTQyxnQkFBZ0JDLFdBQWFGLFNBQVNHLEtBQUtELFdBQ3ZIbkIsRUFBV2Esa0JBQW9CQyxPQUFPTyxZQUFjTCxhQUFlQyxTQUFTQyxnQkFBZ0JJLFVBQVlMLFNBQVNHLEtBQUtFLFVBRXRIckIsRUFBVWEsT0FBT1MsWUFBY04sU0FBU0MsZ0JBQWdCTSxhQUFlUCxTQUFTRyxLQUFLSSxZQUNyRnRCLEVBQVVZLE9BQU9XLGFBQWVSLFNBQVNDLGdCQUFnQlEsY0FBZ0JULFNBQVNHLEtBQUtNLGFBRW5GZCxHQUNFWixFQUFXaUIsU0FBU0csS0FBS08sYUFBZ0IsRUFBSXpCLEVBQVUsQ0FDekQsR0FBSTBCLEdBQVNDLEVBQUtDLEVBQ2RDLEVBQU9DLEVBQU1DLEVBQVlDLEVBQWdCQyxDQVM3QyxJQVBBdkIsRUFBU3dCLFdBQVdDLGFBQWEsUUFBUyxJQUMxQ1QsRUFBVWhCLEVBQVMwQixhQUFhLFFBRWhDTCxLQUNBQyxLQUNBQyxLQUVJUCxFQUFTLENB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QyxPQUFPSSxZQUFZQyxRQUNoQk4sRUFBRUMsT0FBT0MsVUFBVWpCLE1BQU0seUJBQ2xDa0IsR0FBRyxPQUFRLFFBQVMsS0FBTSxlQUFnQixpQkFDdENILEVBQUVDLE9BQU9HLHVCQUF1QixzQkFBc0IsR0FBR0MsWUFBWUMsUUFDaEVOLEVBQUVDLE9BQU9DLFVBQVVqQixNQUFNLDBCQUNsQ2tCLEdBQUcsT0FBUSxRQUFTLEtBQU0sZUFBZ0IsaUJBQ3RDSCxFQUFFQyxPQUFPSSxZQUFZQyxXQUsvQjNFLE9BQU80RSxTQUFXdkYsRUFBU00sRUFBVSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciByZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGJvZHlDb250YWluZXIsIHBhZ2luYXRpb24sIG5leHRQYWdlO1xuICB2YXIgY3VycmVudFgsIGN1cnJlbnRZO1xuICB2YXIgd2luZG93WCwgd2luZG93WTtcblxuICB2YXIgdGhyb3R0bGUgPSBmdW5jdGlvbiAoY2IsIGludGVydmFsKSB7XG4gICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoKG5vdyArIGludGVydmFsIC0gRGF0ZS5ub3coKSkgPCAwKSB7XG4gICAgICAgIGNiKCk7XG4gICAgICAgIG5vdyA9IERhdGUubm93KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIGNhcmRUZW1wbGF0ZSA9ICcnICtcbiAgICAgICc8YXJ0aWNsZSBjbGFzcz1cInBvc3QtY2FyZFwiPicgK1xuICAgICAgJzxhIGNsYXNzPVwicG9zdC1pbWFnZS1saW5rXCIgaHJlZj1cIi9wb3N0cy97e2lkfX1cIj4nICtcbiAgICAgICc8aW1nIGNsYXNzPVwicG9zdC1pbWFnZVwiIHNyYz1cInt7YmFja2dyb3VuZF9pbWFnZX19XCIgYWx0PVwicG9zdCBpbWFnZVwiPicgK1xuICAgICAgJzwvYT4nICtcbiAgICAgICc8c2VjdGlvbiBjbGFzcz1cInBvc3QtaW5mb3JtYXRpb25cIj4nICtcbiAgICAgICc8aSBjbGFzcz1cImZhIGZhLXRhZ3NcIj48L2k+JyArXG4gICAgICAnPGEgY2xhc3M9XCJwb3N0LWNhdGVnb3J5LWxpbmtcIiBocmVmPVwiL3Bvc3RzL2NhdGVnb3JpZXMve3tjYXRlZ29yeV9pZH19XCI+JyArXG4gICAgICAnPHNwYW4gY2xhc3M9XCJwb3N0LWNhdGVnb3J5LW5hbWVcIj4nICtcbiAgICAgICd7e2NhdGVnb3J5X2lkfX0nICtcbiAgICAgICc8L3NwYW4+JyArXG4gICAgICAnPC9hPicgK1xuICAgICAgJyZuYnNwOyZuYnNwOycgK1xuICAgICAgJzxpIGNsYXNzPVwiZmEgZmEtY2FsZW5kYXJcIj48L2k+JyArXG4gICAgICAnPHNwYW4gY2xhc3M9XCJwb3N0LXJlZ2lzdGVyZWRcIj4nICtcbiAgICAgICd7e2NyZWF0ZWRfYXR9fScgK1xuICAgICAgJzwvc3Bhbj4nICtcbiAgICAgICc8YSBjbGFzcz1cInBvc3QtbGluay10aXRsZVwiIGhyZWY9XCIvcG9zdHMve3tpZH19XCI+JyArXG4gICAgICAnPGgxIGNsYXNzPVwicG9zdC10aXRsZVwiPicgK1xuICAgICAgJ3t7dGl0bGV9fScgK1xuICAgICAgJzwvaDE+JyArXG4gICAgICAnPC9hPicgK1xuICAgICAgJzxwIGNsYXNzPVwicG9zdC1jb250ZW50XCI+e3t0ZXh0fX08L3A+JyArXG4gICAgICAnPGEgY2xhc3M9XCJcIiBocmVmPVwiL3Bvc3RzL3t7aWR9fVwiPkdvIHRvIExpbmsg4oaSPC9hPicgK1xuICAgICAgJzwvc2VjdGlvbj4nICtcbiAgICAgICc8L2FydGljbGU+JztcblxuICB2YXIgZ2V0UG9zdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhZ2luYXRpb24gPSBqaignLnBhZ2luYXRpb24nKVswXTtcbiAgICB2YXIgbmV4dFBhZ2UgPSBqaignLnBhZ2luYXRpb24gLm5leHQgYScpWzBdO1xuXG4gICAgY3VycmVudFggPSBzdXBwb3J0UGFnZU9mZnNldCA/IHdpbmRvdy5wYWdlWE9mZnNldCA6IGlzQ1NTMUNvbXBhdCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IDogZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xuICAgIGN1cnJlbnRZID0gc3VwcG9ydFBhZ2VPZmZzZXQgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiBpc0NTUzFDb21wYXQgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIDogZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG5cbiAgICB3aW5kb3dYID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7XG4gICAgd2luZG93WSA9IHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xuXG4gICAgaWYgKG5leHRQYWdlKSB7XG4gICAgICBpZiAoY3VycmVudFkgPiBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCAtICgyICogd2luZG93WSkpIHtcbiAgICAgICAgdmFyIG5leHRVcmwsIHhociwgcmVzdWx0O1xuICAgICAgICB2YXIgcGFnZXMsIHBhZ2UsIGNhdGVnb3JpZXMsIGNhdGVnb3J5SWROYW1lLCBwb3N0cztcblxuICAgICAgICBuZXh0UGFnZS5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnJyk7XG4gICAgICAgIG5leHRVcmwgPSBuZXh0UGFnZS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcblxuICAgICAgICBjYXRlZ29yaWVzID0ge307XG4gICAgICAgIGNhdGVnb3J5SWROYW1lID0ge307XG4gICAgICAgIHBvc3RzID0ge307XG5cbiAgICAgICAgaWYgKG5leHRVcmwpIHtcbiAgICAgICAgICB2YXIgbmV3UGxhY2Vob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB2YXIgcGxhY2Vob2xkZXJUZXh0ID0gJycgK1xuICAgICAgICAgICAgICAnPGFydGljbGUgY2xhc3M9XCJwb3N0LWNhcmRcIj4nICtcbiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJwb3N0LWltYWdlIGVtcHR5XCI+PC9kaXY+JyArXG4gICAgICAgICAgICAgICc8c2VjdGlvbiBjbGFzcz1cInBvc3QtaW5mb3JtYXRpb25cIj4nICtcbiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJwbGFjZWhvbGRlclwiPicgK1xuICAgICAgICAgICAgICAnPGkgY2xhc3M9XCJmYSBmYS10YWdzXCI+PC9pPicgK1xuICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJwb3N0LWNhdGVnb3J5LW5hbWVcIj4nICtcbiAgICAgICAgICAgICAgJ3t7Y2F0ZWdvcnlfaWR9fScgK1xuICAgICAgICAgICAgICAnPC9zcGFuPicgK1xuICAgICAgICAgICAgICAnJm5ic3A7Jm5ic3A7JyArXG4gICAgICAgICAgICAgICc8aSBjbGFzcz1cImZhIGZhLWNhbGVuZGFyXCI+PC9pPicgK1xuICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJwb3N0LXJlZ2lzdGVyZWRcIj4nICtcbiAgICAgICAgICAgICAgJ3t7Y3JlYXRlZF9hdH19JyArXG4gICAgICAgICAgICAgICc8L3NwYW4+JyArXG4gICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgJzxoMSBjbGFzcz1cInBvc3QtdGl0bGUgcGxhY2Vob2xkZXJcIj4nICtcbiAgICAgICAgICAgICAgJ3t7dGl0bGV9fScgK1xuICAgICAgICAgICAgICAnPC9oMT4nICtcbiAgICAgICAgICAgICAgJzxwIGNsYXNzPVwicG9zdC1jb250ZW50IHBsYWNlaG9sZGVyXCI+e3t0ZXh0fX08L3A+JyArXG4gICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInBsYWNlaG9sZGVyXCI+R28gdG8gTGluayDihpI8L3NwYW4+JyArXG4gICAgICAgICAgICAgICc8L3NlY3Rpb24+JyArXG4gICAgICAgICAgICAgICc8L2FydGljbGU+JztcblxuICAgICAgICAgIG5ld1BsYWNlaG9sZGVyLnNldEF0dHJpYnV0ZSgnaWQnLCAncG9zdC1wbGFjZWhvbGRlcicpO1xuICAgICAgICAgIG5ld1BsYWNlaG9sZGVyLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgcGxhY2Vob2xkZXJUZXh0KTtcblxuICAgICAgICAgIGpqKCcjYm9keS1jb250YWluZXInKS5hcHBlbmRDaGlsZChuZXdQbGFjZWhvbGRlcik7XG5cbiAgICAgICAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICB4aHIub3BlbihcIkdFVFwiLCBuZXh0VXJsKTtcbiAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIERPTkUsIE9LO1xuICAgICAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gamooJyNwb3N0LXBsYWNlaG9sZGVyJyk7XG5cbiAgICAgICAgICAgIERPTkUgPSA0O1xuICAgICAgICAgICAgT0sgPSAyMDA7XG5cbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSAhPSA0IHx8IHhoci5zdGF0dXMgIT0gMjAwKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcblxuICAgICAgICAgICAgcGFnZXMgPSByZXN1bHQucGFnZXM7XG4gICAgICAgICAgICBwYWdlID0gcmVzdWx0LnBhZ2U7XG5cbiAgICAgICAgICAgIHBvc3RzID0gcmVzdWx0LnBvc3RzO1xuICAgICAgICAgICAgY2F0ZWdvcmllcyA9IHJlc3VsdC5jYXRlZ29yaWVzO1xuXG4gICAgICAgICAgICB2YXIgY2F0ZWdvcnlDb3VudGVyID0gMDtcbiAgICAgICAgICAgIGZvciAoOyBjYXRlZ29yeUNvdW50ZXIgPCBjYXRlZ29yaWVzLmxlbmd0aDsgY2F0ZWdvcnlDb3VudGVyKyspIHtcbiAgICAgICAgICAgICAgdmFyIGlkU3RyID0gY2F0ZWdvcmllc1tjYXRlZ29yeUNvdW50ZXJdLmlkO1xuICAgICAgICAgICAgICBjYXRlZ29yeUlkTmFtZVtpZFN0cl0gPSBjYXRlZ29yaWVzW2NhdGVnb3J5Q291bnRlcl0ubmFtZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocG9zdHMpIHtcbiAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlQXJyO1xuICAgICAgICAgICAgICB2YXIgdWwsIGxpQXJyLCBwYWdlTnVtYmVyO1xuXG4gICAgICAgICAgICAgIHRlbXBsYXRlQXJyID0gW107XG5cbiAgICAgICAgICAgICAgcG9zdENvdW50ZXIgPSAwO1xuICAgICAgICAgICAgICBmb3IgKDsgcG9zdENvdW50ZXIgPCBwb3N0cy5sZW5ndGg7IHBvc3RDb3VudGVyKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBjYXJkVGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3QgPSBwb3N0c1twb3N0Q291bnRlcl07XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9ICcnO1xuXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRlbXBsYXRlLm1hdGNoKC8oPzpcXHt7Mn0pKFxcd3sxLH0pKyg/OlxcfXsyfSkvKSkge1xuICAgICAgICAgICAgICAgICAga2V5ID0gdGVtcGxhdGUubWF0Y2goLyg/Olxce3syfSkoXFx3ezEsfSkrKD86XFx9ezJ9KS8pWzFdO1xuICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2NyZWF0ZWRfYXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRlID0gcG9zdFtrZXldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZVN0ciA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW9udGhTdHJBcnIgPSBbJ0pBTicsICdGQUInLCAnTUFSJywgJ0FQUicsICdNQVknLCAnSlVOJywgJ0pVTCcsICdBVUcnLCAnU0VQJywgJ09DVCcsICdOT1YnLCAnREVDJ107XG4gICAgICAgICAgICAgICAgICAgIGRhdGVTdHIgPSAnJyArXG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aFN0ckFyclsoZGF0ZS5tYXRjaCgvKD86XFxkezR9LSkoXFxkezJ9KSg/Oi1cXGR7Mn0pKy8pWzFdID4+IDApIC0gMV0gKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5tYXRjaCgvKD86XFxkezR9LVxcZHsyfS0pKFxcZHsyfSkvKVsxXSArICcuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5tYXRjaCgvKFxcZHs0fSkoPzotXFxkezJ9LVxcZHsyfSkvKVsxXTtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKC8oPzpcXHt7Mn0pKFxcd3sxLH0pKyg/OlxcfXsyfSkvLCBkYXRlU3RyKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3N0W2tleV0ubGVuZ3RoID4gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKC8oPzpcXHt7Mn0pKFxcd3sxLH0pKyg/OlxcfXsyfSkvLCBwb3N0W2tleV0uc3Vic3RyaW5nKDAsIDIwMCkgKyAnLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKC8oPzpcXHt7Mn0pKFxcd3sxLH0pKyg/OlxcfXsyfSkvLCBwb3N0W2tleV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRlbXBsYXRlLm1hdGNoKC8oPzo8c3BhbltePl0qPikoXFxkezEsfSkrKD86XFw8XFwvc3BhblxcPikvKSkge1xuICAgICAgICAgICAgICAgICAga2V5ID0gdGVtcGxhdGUubWF0Y2goLyg/OjxzcGFuW14+XSo+KShcXGR7MSx9KSsoPzpcXDxcXC9zcGFuXFw+KS8pWzFdO1xuICAgICAgICAgICAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKC8oPzo8c3BhbltePl0qPikoXFxkezEsfSkrKD86XFw8XFwvc3BhblxcPikvLCAnPHNwYW4gY2xhc3M9XCJwb3N0LWNhdGVnb3J5LW5hbWVcIj4gJyArIGNhdGVnb3J5SWROYW1lW2tleV0gKyAnIDwvc3Bhbj4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVBcnIucHVzaCh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBib2R5Q29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgdGVtcGxhdGVBcnIuam9pbignJykpO1xuICAgICAgICAgICAgICBib2R5Q29udGFpbmVyLnJlbW92ZUNoaWxkKHBhZ2luYXRpb24pO1xuXG4gICAgICAgICAgICAgIHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgICAgICAgdWwuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaXN0LWxheW91dCBwYWdpbmF0aW9uIG5vbmUnKTtcblxuICAgICAgICAgICAgICBsaUFyciA9IFtdO1xuXG4gICAgICAgICAgICAgIGkgPSBwYWdlO1xuICAgICAgICAgICAgICBmb3IgKDsgaSA8PSBwYWdlczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gcGFnZSkge1xuICAgICAgICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdjbGFzcycsICdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IHBhZ2UgKyAxKSB7XG4gICAgICAgICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25leHQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnLz9wYWdlPScgKyBpKTtcbiAgICAgICAgICAgICAgICBsaS5hcHBlbmRDaGlsZChhKTtcbiAgICAgICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBib2R5Q29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgdWwub3V0ZXJIVE1MKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgYm9keUNvbnRhaW5lciA9IGpqKCcjYm9keS1jb250YWluZXInKTtcblxuICBjdXJyZW50WCA9IHN1cHBvcnRQYWdlT2Zmc2V0ID8gd2luZG93LnBhZ2VYT2Zmc2V0IDogaXNDU1MxQ29tcGF0ID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgOiBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7XG4gIGN1cnJlbnRZID0gc3VwcG9ydFBhZ2VPZmZzZXQgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiBpc0NTUzFDb21wYXQgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIDogZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG5cbiAgd2luZG93WCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xuICB3aW5kb3dZID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XG5cbiAgYWRkRXZlbnQoZG9jdW1lbnQuYm9keSwgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lKSB7XG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lLm1hdGNoKC9ecG9zdFxcLWxpbmtcXC1pbWFnZSQvKSkge1xuICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsICfrqZTsnbgnLCAnQnV0dG9uIFByZXNzJywgJ+2PrOyKpO2KuCDtgbTrpq0gLSBbJyArXG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Bvc3QtY2F0ZWdvcnktbmFtZScpWzBdLnRleHRDb250ZW50LnRyaW0oKSArICddICcgK1xuICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwb3N0LXRpdGxlJylbMF0udGV4dENvbnRlbnQudHJpbSgpKTtcbiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NOYW1lLm1hdGNoKC9ecG9zdFxcLXRodW1ibmFpbCQvKSkge1xuICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsICfrqZTsnbgnLCAnQnV0dG9uIFByZXNzJywgJ+2PrOyKpO2KuCDtgbTrpq0gLSBbJyArXG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncG9zdC1jYXRlZ29yeS1uYW1lJylbMF0udGV4dENvbnRlbnQudHJpbSgpICsgJ10gJyArXG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncG9zdC10aXRsZScpWzBdLnRleHRDb250ZW50LnRyaW0oKSk7XG4gICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZS5tYXRjaCgvXnBvc3RcXC1saW5rXFwtdGl0bGUkLykpIHtcbiAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCAn66mU7J24JywgJ0J1dHRvbiBQcmVzcycsICftj6zsiqTtirgg7YG066atIC0gWycgK1xuICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwb3N0LWNhdGVnb3J5LW5hbWUnKVswXS50ZXh0Q29udGVudC50cmltKCkgKyAnXSAnICtcbiAgICAgICAgICAgIGUudGFyZ2V0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Bvc3QtdGl0bGUnKVswXS50ZXh0Q29udGVudC50cmltKCkpO1xuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc05hbWUubWF0Y2goL15wb3N0XFwtdGl0bGUkfF5wb3N0XFwtdGl0bGVcXHMvKSkge1xuICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsICfrqZTsnbgnLCAnQnV0dG9uIFByZXNzJywgJ+2PrOyKpO2KuCDtgbTrpq0gLSBbJyArXG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncG9zdC1jYXRlZ29yeS1uYW1lJylbMF0udGV4dENvbnRlbnQudHJpbSgpICsgJ10gJyArXG4gICAgICAgICAgICBlLnRhcmdldC50ZXh0Q29udGVudC50cmltKCkpO1xuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc05hbWUubWF0Y2goL15wb3N0XFwtY2F0ZWdvcnlcXC1saW5rLykpIHtcbiAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCAn66mU7J24JywgJ0J1dHRvbiBQcmVzcycsICftj6zsiqTtirgg7Lm07YWM6rOg66asIO2BtOumrSAtICcgK1xuICAgICAgICAgICAgZS50YXJnZXQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncG9zdC1jYXRlZ29yeS1uYW1lJylbMF0udGV4dENvbnRlbnQudHJpbSgpKTtcbiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NOYW1lLm1hdGNoKC9ecG9zdFxcLWNhdGVnb3J5XFwtbmFtZS8pKSB7XG4gICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50JywgJ+uplOyduCcsICdCdXR0b24gUHJlc3MnLCAn7Y+s7Iqk7Yq4IOy5tO2FjOqzoOumrCDtgbTrpq0gLSAnICtcbiAgICAgICAgICAgIGUudGFyZ2V0LnRleHRDb250ZW50LnRyaW0oKSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB3aW5kb3cub25zY3JvbGwgPSB0aHJvdHRsZShnZXRQb3N0cywgMTAwKTtcbiAgLypcbiAgd2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGUgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgdmFyIHBhZ2luYXRpb24gPSBqaignLnBhZ2luYXRpb24nKVswXTtcbiAgICB2YXIgbmV4dFBhZ2UgPSBqaignLnBhZ2luYXRpb24gLm5leHQgYScpWzBdO1xuXG4gICAgY3VycmVudFggPSBzdXBwb3J0UGFnZU9mZnNldCA/IHdpbmRvdy5wYWdlWE9mZnNldCA6IGlzQ1NTMUNvbXBhdCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IDogZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xuICAgIGN1cnJlbnRZID0gc3VwcG9ydFBhZ2VPZmZzZXQgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiBpc0NTUzFDb21wYXQgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIDogZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG5cbiAgICB3aW5kb3dYID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7XG4gICAgd2luZG93WSA9IHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xuXG4gICAgaWYgKG5leHRQYWdlKSB7XG4gICAgICBpZiAoY3VycmVudFkgKyB3aW5kb3dZID4gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQgLSA1MCkge1xuICAgICAgICB2YXIgbmV4dFVybCwgeGhyLCByZXN1bHQ7XG4gICAgICAgIHZhciBwYWdlcywgcGFnZSwgY2F0ZWdvcmllcywgY2F0ZWdvcnlJZE5hbWUsIHBvc3RzO1xuXG4gICAgICAgIG5leHRQYWdlLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCdjbGFzcycsICcnKTtcbiAgICAgICAgbmV4dFVybCA9IG5leHRQYWdlLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuXG4gICAgICAgIGNhdGVnb3JpZXMgPSB7fTtcbiAgICAgICAgY2F0ZWdvcnlJZE5hbWUgPSB7fTtcbiAgICAgICAgcG9zdHMgPSB7fTtcblxuICAgICAgICBpZiAobmV4dFVybCkge1xuICAgICAgICAgIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgIHhoci5vcGVuKFwiR0VUXCIsIG5leHRVcmwpO1xuICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgRE9ORSwgT0s7XG5cbiAgICAgICAgICAgIERPTkUgPSA0O1xuICAgICAgICAgICAgT0sgPSAyMDA7XG5cbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSAhPSA0IHx8IHhoci5zdGF0dXMgIT0gMjAwKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcblxuICAgICAgICAgICAgcGFnZXMgPSByZXN1bHQucGFnZXM7XG4gICAgICAgICAgICBwYWdlID0gcmVzdWx0LnBhZ2U7XG5cbiAgICAgICAgICAgIHBvc3RzID0gcmVzdWx0LnBvc3RzO1xuICAgICAgICAgICAgY2F0ZWdvcmllcyA9IHJlc3VsdC5jYXRlZ29yaWVzO1xuXG4gICAgICAgICAgICB2YXIgY2F0ZWdvcnlDb3VudGVyID0gMDtcbiAgICAgICAgICAgIGZvciAoOyBjYXRlZ29yeUNvdW50ZXIgPCBjYXRlZ29yaWVzLmxlbmd0aDsgY2F0ZWdvcnlDb3VudGVyKyspIHtcbiAgICAgICAgICAgICAgdmFyIGlkU3RyID0gY2F0ZWdvcmllc1tjYXRlZ29yeUNvdW50ZXJdLmlkO1xuICAgICAgICAgICAgICBjYXRlZ29yeUlkTmFtZVtpZFN0cl0gPSBjYXRlZ29yaWVzW2NhdGVnb3J5Q291bnRlcl0ubmFtZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBvc3RzKSB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUFycjtcbiAgICAgICAgICAgICAgdmFyIHVsLCBsaUFyciwgcGFnZU51bWJlcjtcblxuICAgICAgICAgICAgICB0ZW1wbGF0ZUFyciA9IFtdO1xuXG4gICAgICAgICAgICAgIHBvc3RDb3VudGVyID0gMDtcbiAgICAgICAgICAgICAgZm9yICg7IHBvc3RDb3VudGVyIDwgcG9zdHMubGVuZ3RoOyBwb3N0Q291bnRlcisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gY2FyZFRlbXBsYXRlO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0ID0gcG9zdHNbcG9zdENvdW50ZXJdO1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSAnJztcblxuICAgICAgICAgICAgICAgIHdoaWxlICh0ZW1wbGF0ZS5tYXRjaCgvKD86XFx7ezJ9KShcXHd7MSx9KSsoPzpcXH17Mn0pLykpIHtcbiAgICAgICAgICAgICAgICAgIGtleSA9IHRlbXBsYXRlLm1hdGNoKC8oPzpcXHt7Mn0pKFxcd3sxLH0pKyg/OlxcfXsyfSkvKVsxXTtcbiAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdjcmVhdGVkX2F0Jykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IHBvc3Rba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVTdHIgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRoU3RyQXJyID0gWydKQU4nLCAnRkFCJywgJ01BUicsICdBUFInLCAnTUFZJywgJ0pVTicsICdKVUwnLCAnQVVHJywgJ1NFUCcsICdPQ1QnLCAnTk9WJywgJ0RFQyddO1xuICAgICAgICAgICAgICAgICAgICBkYXRlU3RyID0gJycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhTdHJBcnJbKGRhdGUubWF0Y2goLyg/OlxcZHs0fS0pKFxcZHsyfSkoPzotXFxkezJ9KSsvKVsxXSA+PiAwKSAtIDFdICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUubWF0Y2goLyg/OlxcZHs0fS1cXGR7Mn0tKShcXGR7Mn0pLylbMV0gKyAnLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUubWF0Y2goLyhcXGR7NH0pKD86LVxcZHsyfS1cXGR7Mn0pLylbMV07XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvKD86XFx7ezJ9KShcXHd7MSx9KSsoPzpcXH17Mn0pLywgZGF0ZVN0cik7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zdFtrZXldLmxlbmd0aCA+IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvKD86XFx7ezJ9KShcXHd7MSx9KSsoPzpcXH17Mn0pLywgcG9zdFtrZXldLnN1YnN0cmluZygwLCAyMDApICsgJy4uLicpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvKD86XFx7ezJ9KShcXHd7MSx9KSsoPzpcXH17Mn0pLywgcG9zdFtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHdoaWxlICh0ZW1wbGF0ZS5tYXRjaCgvKD86PHNwYW5bXj5dKj4pKFxcZHsxLH0pKyg/OlxcPFxcL3NwYW5cXD4pLykpIHtcbiAgICAgICAgICAgICAgICAgIGtleSA9IHRlbXBsYXRlLm1hdGNoKC8oPzo8c3BhbltePl0qPikoXFxkezEsfSkrKD86XFw8XFwvc3BhblxcPikvKVsxXTtcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvKD86PHNwYW5bXj5dKj4pKFxcZHsxLH0pKyg/OlxcPFxcL3NwYW5cXD4pLywgJzxzcGFuIGNsYXNzPVwicG9zdC1jYXRlZ29yeS1uYW1lXCI+ICcgKyBjYXRlZ29yeUlkTmFtZVtrZXldICsgJyA8L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRlbXBsYXRlQXJyLnB1c2godGVtcGxhdGUpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYm9keUNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHRlbXBsYXRlQXJyLmpvaW4oJycpKTtcbiAgICAgICAgICAgICAgYm9keUNvbnRhaW5lci5yZW1vdmVDaGlsZChwYWdpbmF0aW9uKTtcblxuICAgICAgICAgICAgICB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgICAgICAgIHVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGlzdC1sYXlvdXQgcGFnaW5hdGlvbiBub25lJyk7XG5cbiAgICAgICAgICAgICAgbGlBcnIgPSBbXTtcblxuICAgICAgICAgICAgICBpID0gcGFnZTtcbiAgICAgICAgICAgICAgZm9yICg7IGkgPD0gcGFnZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IHBhZ2UpIHtcbiAgICAgICAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID09PSBwYWdlICsgMSkge1xuICAgICAgICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdjbGFzcycsICduZXh0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGEuc2V0QXR0cmlidXRlKCdocmVmJywgJy8/cGFnZT0nICsgaSk7XG4gICAgICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoYSk7XG4gICAgICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYm9keUNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHVsLm91dGVySFRNTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICAqL1xufTtcblxuIl19
