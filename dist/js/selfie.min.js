var colorMatrix=function(){function t(t,e){var a,r,n,i=[];for(a=0;5>a;a++){for(r=0;5>r;r++)i[r]=t[r+5*a];for(r=0;5>r;r++){var o=0;for(n=0;5>n;n++)o+=e[r+5*n]*i[n];t[r+5*a]=o}}}function e(e,r){var n,i=r.brightness||0,o=r.contrast||0,c=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1];0>o?n=127+o/100*127:(n=o%1,n=0===n?a[o]:a[+o]*(1-n)+a[+o+1]*n,n=127*n+127),t(c,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1]),t(c,[1,0,0,0,i,0,1,0,0,i,0,0,1,0,i,0,0,0,1,0,0,0,0,0,1]);for(var s,d,l,u,f=e.data,g=f.length,v=c[0],b=c[1],j=c[2],h=c[3],A=c[4],m=c[5],p=c[6],w=c[7],U=c[8],R=c[9],y=c[10],G=c[11],M=c[12],k=c[13],C=c[14],E=c[15],L=c[16],x=c[17],D=c[18],I=c[19],S=0;g>S;S+=4)s=f[S],d=f[S+1],l=f[S+2],u=f[S+3],f[S]=s*v+d*b+l*j+u*h+A,f[S+1]=s*m+d*p+l*w+u*U+R,f[S+2]=s*y+d*G+l*M+u*k+C,f[S+3]=s*E+d*L+l*x+u*D+I;return e}var a=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];return e}(),toasterGradient=function(t,e){var a=document.createElement("canvas"),r=a.getContext("2d");a.width=t,a.height=e;var n=r.createRadialGradient(t/2,e/2,0,t/2,e/2,.6*t);return n.addColorStop(0,"#804e0f"),n.addColorStop(1,"#3b003b"),r.fillStyle=n,r.fillRect(0,0,t,e),r},blend=function(t,e,a,r,n){for(var i=t.getImageData(0,0,a,r),o=e.getImageData(0,0,a,r),c=0,s=o.data.length;s>c;c+=4)o.data[c+0]=n(i.data[c+0],o.data[c+0]),o.data[c+1]=n(i.data[c+1],o.data[c+1]),o.data[c+2]=n(i.data[c+2],o.data[c+2]);return o},ready=function(){var t=jj("#user-video"),e=jj("#selfie"),a=jj("#start-camera"),r=jj("#shutter"),n=jj("#remove-selfie"),i=jj("#download-selfie"),o=jj("#controller"),c=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,s=function(){l()},d=function(){var e=jj("#selfie-store"),a=e.getContext("2d"),r=t.videoWidth,n=t.videoHeight;return r&&n?(e.width=r,e.height=n,a.drawImage(t,0,0,r,n),e.toDataURL("image/png")):void 0},l=function(){o.setAttribute("class",o.getAttribute("class").replace(/\s?none/g,"")+" none"),a.setAttribute("class",a.getAttribute("class").replace(/\s?none/g,"")+" none")};c?c.call(navigator,{video:!0},function(e){window.URL?t.src=window.URL.createObjectURL(e):t.src=e,t.onplay=function(){s()},t.play()},function(t){alert("카메라 스트림에 접근하는 과정 중 에러가 발생했습니다.")}):alert("현재 브라우저는 유저 미디어를 지원하지 않습니다."),addEvent(a,"click",function(e){t.play(),s()}),addEvent(r,"click",function(t){var a=d();e.setAttribute("src",a),i.setAttribute("href",a),o.setAttribute("class",o.getAttribute("class").replace(/\s?none/g,""))}),addEvent(n,"click",function(t){e.setAttribute("src",""),o.setAttribute("class",o.getAttribute("class").replace(/\s?none/g,"")+" none")})};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlbGZpZS5taW4uanMiXSwibmFtZXMiOlsiY29sb3JNYXRyaXgiLCJtdWx0aXBseSIsImEiLCJiIiwiaSIsImoiLCJrIiwiY29sIiwidmFsIiwiaW1hZ2VEYXRhIiwib3B0aW9ucyIsIngiLCJicmlnaHRuZXNzIiwiY29udHJhc3QiLCJtYXRyaXgiLCJERUxUQV9JTkRFWCIsInIiLCJnIiwiZGF0YSIsImwiLCJsZW5ndGgiLCJtMCIsIm0xIiwibTIiLCJtMyIsIm00IiwibTUiLCJtNiIsIm03IiwibTgiLCJtOSIsIm0xMCIsIm0xMSIsIm0xMiIsIm0xMyIsIm0xNCIsIm0xNSIsIm0xNiIsIm0xNyIsIm0xOCIsIm0xOSIsInRvYXN0ZXJHcmFkaWVudCIsIndpZHRoIiwiaGVpZ2h0IiwidGV4dHVyZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJncmFkaWVudCIsImNyZWF0ZVJhZGlhbEdyYWRpZW50IiwiYWRkQ29sb3JTdG9wIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJibGVuZCIsImJhY2tncm91bmQiLCJmb3JlZ3JvdW5kIiwidHJhbnNmb3JtIiwiYm90dG9tIiwiZ2V0SW1hZ2VEYXRhIiwidG9wIiwic2l6ZSIsInJlYWR5IiwidmlkZW8iLCJqaiIsInNlbGZpZSIsInN0YXJ0Q2FtZXJhIiwic2h1dHRlciIsInJlbW92ZVNlbGZpZSIsImRvd25sb2FkU2VsZmllIiwiY29udHJvbGxlciIsImdldFVzZXJNZWRpYSIsIm5hdmlnYXRvciIsIndlYmtpdEdldFVzZXJNZWRpYSIsIm1vekdldFVzZXJNZWRpYSIsIm1zR2V0VXNlck1lZGlhIiwiZ2V0VmlkZW8iLCJoaWRlQnV0dG9ucyIsInRha2VQaG90byIsInN0b3JlIiwidmlkZW9XaWR0aCIsInZpZGVvSGVpZ2h0IiwiZHJhd0ltYWdlIiwidG9EYXRhVVJMIiwic2V0QXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwicmVwbGFjZSIsImNhbGwiLCJzdHJlYW0iLCJ3aW5kb3ciLCJVUkwiLCJzcmMiLCJjcmVhdGVPYmplY3RVUkwiLCJvbnBsYXkiLCJwbGF5IiwiZXJyIiwiYWxlcnQiLCJhZGRFdmVudCIsImUiLCJzbmFwIl0sIm1hcHBpbmdzIjoiQUFTQSxHQUFJQSxhQUFjLFdBZWhCLFFBQVNDLEdBQVVDLEVBQUdDLEdBQ3BCLEdBQUlDLEdBQUdDLEVBQUdDLEVBQUdDLElBRWIsS0FBS0gsRUFBSSxFQUFPLEVBQUpBLEVBQU9BLElBQUssQ0FDdEIsSUFBS0MsRUFBSSxFQUFPLEVBQUpBLEVBQU9BLElBQ2pCRSxFQUFJRixHQUFLSCxFQUFFRyxFQUFRLEVBQUpELEVBRWpCLEtBQUtDLEVBQUksRUFBTyxFQUFKQSxFQUFPQSxJQUFLLENBQ3RCLEdBQUlHLEdBQU0sQ0FDVixLQUFLRixFQUFJLEVBQU8sRUFBSkEsRUFBT0EsSUFDakJFLEdBQU9MLEVBQUVFLEVBQVEsRUFBSkMsR0FBU0MsRUFBSUQsRUFFNUJKLEdBQUVHLEVBQVEsRUFBSkQsR0FBU0ksSUFLckIsUUFBU1IsR0FBYVMsRUFBV0MsR0FDL0IsR0FZSUMsR0FaQUMsRUFBYUYsRUFBUUUsWUFBYyxFQUNuQ0MsRUFBYUgsRUFBUUcsVUFBYyxFQUVuQ0MsR0FDRixFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQ1osRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUNaLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFDWixFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQ1osRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUtDLEdBQVhELEVBQ0ZGLEVBQUksSUFBTUUsRUFBVyxJQUFNLEtBRTNCRixFQUFJRSxFQUFXLEVBR2JGLEVBRFEsSUFBTkEsRUFDRUksRUFBWUYsR0FFWkUsR0FBY0YsSUFBYyxFQUFJRixHQUFLSSxHQUFjRixFQUFZLEdBQUtGLEVBRzFFQSxFQUFRLElBQUpBLEVBQVUsS0FHaEJWLEVBQVVhLEdBQ1JILEVBQUksSUFBSyxFQUFHLEVBQUcsRUFBRyxJQUFPLElBQU1BLEdBQy9CLEVBQUdBLEVBQUksSUFBSyxFQUFHLEVBQUcsSUFB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QUFNL0IsV0FBVyxNQUV2Qk4sRUFBUXFCLEVBQU1pQixXQUNkckMsRUFBU29CLEVBQU1rQixXQUVuQixPQUFJdkMsSUFBU0MsR0FDWG9DLEVBQU1yQyxNQUFRQSxFQUNkcUMsRUFBTXBDLE9BQVNBLEVBRWZJLEVBQUltQyxVQUFVbkIsRUFBTyxFQUFHLEVBQUdyQixFQUFPQyxHQWUzQm9DLEVBQU1JLFVBQVUsY0FuQnpCLFFBdUJFTixFQUFjLFdBQ2hCUCxFQUFXYyxhQUFhLFFBQVNkLEVBQVdlLGFBQWEsU0FBU0MsUUFBUSxXQUFZLElBQU0sU0FDNUZwQixFQUFZa0IsYUFBYSxRQUFTbEIsRUFBWW1CLGFBQWEsU0FBU0MsUUFBUSxXQUFZLElBQU0sU0FHM0ZmLEdBR0hBLEVBQWFnQixLQUFLZixXQUNkVCxPQUFPLEdBRVQsU0FBVXlCLEdBQ0pDLE9BQU9DLElBQ1QzQixFQUFNNEIsSUFBTUYsT0FBT0MsSUFBSUUsZ0JBQWdCSixHQUV2Q3pCLEVBQU00QixJQUFNSCxFQUdkekIsRUFBTThCLE9BQVMsV0FDYmpCLEtBR0ZiLEVBQU0rQixRQUVSLFNBQVVDLEdBQ1JDLE1BQU0sb0NBbkJWQSxNQUFNLCtCQXdCUkMsU0FBUy9CLEVBQWEsUUFBUyxTQUFVZ0MsR0FDdkNuQyxFQUFNK0IsT0FDTmxCLE1BR0ZxQixTQUFTOUIsRUFBUyxRQUFTLFNBQVUrQixHQUNuQyxHQUFJQyxHQUFPckIsR0FFWGIsR0FBT21CLGFBQWEsTUFBT2UsR0FDM0I5QixFQUFlZSxhQUFhLE9BQVFlLEdBQ3BDN0IsRUFBV2MsYUFBYSxRQUFTZCxFQUFXZSxhQUFhLFNBQVNDLFFBQVEsV0FBWSxPQUl4RlcsU0FBUzdCLEVBQWMsUUFBUyxTQUFVOEIsR0FDeENqQyxFQUFPbUIsYUFBYSxNQUFPLElBQzNCZCxFQUFXYyxhQUFhLFFBQVNkLEVBQVdlLGFBQWEsU0FBU0MsUUFBUSxXQUFZLElBQU0iLCJmaWxlIjoic2VsZmllLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29sb3IgTWF0cml4XG4gKlxuICogQSBzaW1wbGlmaWNhdGlvbiBvZiB0aGUgY29sb3IgbWF0cml4IGNsYXNzIHByb3ZpZGVkIGJ5XG4gKiBFYXNlbEpTXG4gKlxuICogd3d3LmNyZWF0ZWpzLmNvbS9kb2NzL2Vhc2VsanMvZmlsZXMvZWFzZWxqc19maWx0ZXJzX0NvbG9yRmlsdGVyLmpzLmh0bWwjbDQxXG4gKi9cblxudmFyIGNvbG9yTWF0cml4ID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgREVMVEFfSU5ERVggPSBbXG4gICAgMCwgICAgMC4wMSwgMC4wMiwgMC4wNCwgMC4wNSwgMC4wNiwgMC4wNywgMC4wOCwgMC4xLCAgMC4xMSxcbiAgICAwLjEyLCAwLjE0LCAwLjE1LCAwLjE2LCAwLjE3LCAwLjE4LCAwLjIwLCAwLjIxLCAwLjIyLCAwLjI0LFxuICAgIDAuMjUsIDAuMjcsIDAuMjgsIDAuMzAsIDAuMzIsIDAuMzQsIDAuMzYsIDAuMzgsIDAuNDAsIDAuNDIsXG4gICAgMC40NCwgMC40NiwgMC40OCwgMC41LCAgMC41MywgMC41NiwgMC41OSwgMC42MiwgMC42NSwgMC42OCxcbiAgICAwLjcxLCAwLjc0LCAwLjc3LCAwLjgwLCAwLjgzLCAwLjg2LCAwLjg5LCAwLjkyLCAwLjk1LCAwLjk4LFxuICAgIDEuMCwgIDEuMDYsIDEuMTIsIDEuMTgsIDEuMjQsIDEuMzAsIDEuMzYsIDEuNDIsIDEuNDgsIDEuNTQsXG4gICAgMS42MCwgMS42NiwgMS43MiwgMS43OCwgMS44NCwgMS45MCwgMS45NiwgMi4wLCAgMi4xMiwgMi4yNSxcbiAgICAyLjM3LCAyLjUwLCAyLjYyLCAyLjc1LCAyLjg3LCAzLjAsICAzLjIsICAzLjQsICAzLjYsICAzLjgsXG4gICAgNC4wLCAgNC4zLCAgNC43LCAgNC45LCAgNS4wLCAgNS41LCAgNi4wLCAgNi41LCAgNi44LCAgNy4wLFxuICAgIDcuMywgIDcuNSwgIDcuOCwgIDguMCwgIDguNCwgIDguNywgIDkuMCwgIDkuNCwgIDkuNiwgIDkuOCxcbiAgICAxMC4wXG4gIF07XG5cbiAgZnVuY3Rpb24gbXVsdGlwbHkgKGEsIGIpIHtcbiAgICB2YXIgaSwgaiwgaywgY29sID0gW107XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgNTsgaisrKSB7XG4gICAgICAgIGNvbFtqXSA9IGFbaiArIGkgKiA1XTtcbiAgICAgIH1cbiAgICAgIGZvciAoaiA9IDA7IGogPCA1OyBqKyspIHtcbiAgICAgICAgdmFyIHZhbCA9IDA7XG4gICAgICAgIGZvciAoayA9IDA7IGsgPCA1OyBrKyspIHtcbiAgICAgICAgICB2YWwgKz0gYltqICsgayAqIDVdICogY29sW2tdO1xuICAgICAgICB9XG4gICAgICAgIGFbaiArIGkgKiA1XSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gY29sb3JNYXRyaXggKGltYWdlRGF0YSwgb3B0aW9ucykge1xuICAgIHZhciBicmlnaHRuZXNzID0gb3B0aW9ucy5icmlnaHRuZXNzIHx8IDA7XG4gICAgdmFyIGNvbnRyYXN0ICAgPSBvcHRpb25zLmNvbnRyYXN0ICAgfHwgMDtcblxuICAgIHZhciBtYXRyaXggPSBbXG4gICAgICAxLCAwLCAwLCAwLCAwLFxuICAgICAgMCwgMSwgMCwgMCwgMCxcbiAgICAgIDAsIDAsIDEsIDAsIDAsXG4gICAgICAwLCAwLCAwLCAxLCAwLFxuICAgICAgMCwgMCwgMCwgMCwgMVxuICAgIF07XG5cbiAgICAvLyBDb250cmFzdFxuICAgIHZhciB4O1xuICAgIGlmIChjb250cmFzdCA8IDApIHtcbiAgICAgIHggPSAxMjcgKyBjb250cmFzdCAvIDEwMCAqIDEyNztcbiAgICB9IGVsc2Uge1xuICAgICAgeCA9IGNvbnRyYXN0ICUgMTtcblxuICAgICAgaWYgKHggPT09IDApIHtcbiAgICAgICAgeCA9IERFTFRBX0lOREVYW2NvbnRyYXN0XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSBERUxUQV9JTkRFWFsoK2NvbnRyYXN0KV0gKiAoMSAtIHgpICsgREVMVEFfSU5ERVhbKCtjb250cmFzdCkgKyAxXSAqIHg7XG4gICAgICB9XG5cbiAgICAgIHggPSB4ICogMTI3ICsgMTI3O1xuICAgIH1cblxuICAgIG11bHRpcGx5IChtYXRyaXgsIFtcbiAgICAgIHggLyAxMjcsIDAsIDAsIDAsIDAuNSAqICgxMjcgLSB4KSxcbiAgICAgIDAsIHggLyAxMjcsIDAsIDAsIDAuNSAqICgxMjcgLSB4KSxcbiAgICAgIDAsIDAsIHggLyAxMjcsIDAsIDAuNSAqICgxMjcgLSB4KSxcbiAgICAgIDAsIDAsIDAsIDEsIDAsXG4gICAgICAwLCAwLCAwLCAwLCAxXG4gICAgXSk7XG5cbiAgICAvLyBCcmlnaHRuZXNzXG4gICAgbXVsdGlwbHkgKG1hdHJpeCxbXG4gICAgICAxLCAwLCAwLCAwLCBicmlnaHRuZXNzLFxuICAgICAgMCwgMSwgMCwgMCwgYnJpZ2h0bmVzcyxcbiAgICAgIDAsIDAsIDEsIDAsIGJyaWdodG5lc3MsXG4gICAgICAwLCAwLCAwLCAxLCAwLFxuICAgICAgMCwgMCwgMCwgMCwgMVxuICAgIF0pO1xuXG4gICAgLy8gQXBwbHkgRmlsdGVyXG4gICAgdmFyIGRhdGEgPSBpbWFnZURhdGEuZGF0YTtcbiAgICB2YXIgbCA9IGRhdGEubGVuZ3RoO1xuICAgIHZhciByLCBnLCBiLCBhO1xuICAgIHZhciBtMCA9ICBtYXRyaXhbMF0sICBtMSA9ICBtYXRyaXhbMV0sICBtMiA9ICBtYXRyaXhbMl0sICBtMyA9ICBtYXRyaXhbM10sICBtNCA9ICBtYXRyaXhbNF07XG4gICAgdmFyIG01ID0gIG1hdHJpeFs1XSwgIG02ID0gIG1hdHJpeFs2XSwgIG03ID0gIG1hdHJpeFs3XSwgIG04ID0gIG1hdHJpeFs4XSwgIG05ID0gIG1hdHJpeFs5XTtcbiAgICB2YXIgbTEwID0gbWF0cml4WzEwXSwgbTExID0gbWF0cml4WzExXSwgbTEyID0gbWF0cml4WzEyXSwgbTEzID0gbWF0cml4WzEzXSwgbTE0ID0gbWF0cml4WzE0XTtcbiAgICB2YXIgbTE1ID0gbWF0cml4WzE1XSwgbTE2ID0gbWF0cml4WzE2XSwgbTE3ID0gbWF0cml4WzE3XSwgbTE4ID0gbWF0cml4WzE4XSwgbTE5ID0gbWF0cml4WzE5XTtcblxuICAgIGZvciAodmFyIGk9MDsgaTxsOyBpKz00KSB7XG4gICAgICByID0gZGF0YVtpXTtcbiAgICAgIGcgPSBkYXRhW2krMV07XG4gICAgICBiID0gZGF0YVtpKzJdO1xuICAgICAgYSA9IGRhdGFbaSszXTtcbiAgICAgIGRhdGFbaV0gPSByICogbTAgKyBnICogbTEgKyBiICogbTIgKyBhICogbTMgKyBtNDsgLy8gcmVkXG4gICAgICBkYXRhW2kgKyAxXSA9IHIgKiBtNSArIGcgKiBtNiArIGIgKiBtNyArIGEgKiBtOCArIG05OyAvLyBncmVlblxuICAgICAgZGF0YVtpICsgMl0gPSByICogbTEwICsgZyAqIG0xMSArIGIgKiBtMTIgKyBhICogbTEzICsgbTE0OyAvLyBibHVlXG4gICAgICBkYXRhW2kgKyAzXSA9IHIgKiBtMTUgKyBnICogbTE2ICsgYiAqIG0xNyArIGEgKiBtMTggKyBtMTk7IC8vIGFscGhhXG4gICAgfVxuXG4gICAgcmV0dXJuIGltYWdlRGF0YTtcbiAgfVxuXG4gIHJldHVybiBjb2xvck1hdHJpeDtcbn0pKCk7XG5cbi8qKlxuICogaHR0cHM6Ly93d3cudmlnZXQuY29tL2FydGljbGVzL2luc3RhZ3JhbS1zdHlsZS1maWx0ZXJzLWluLWh0bWw1LWNhbnZhc1xuICovXG52YXIgdG9hc3RlckdyYWRpZW50ID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcbiAgdmFyIHRleHR1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgdmFyIGN0eCA9IHRleHR1cmUuZ2V0Q29udGV4dCgnMmQnKTtcblxuICB0ZXh0dXJlLndpZHRoID0gd2lkdGg7XG4gIHRleHR1cmUuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gIC8vIEZpbGwgYSBSYWRpYWwgR3JhZGllbnRcbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC9jcmVhdGVSYWRpYWxHcmFkaWVudFxuICB2YXIgZ3JhZGllbnQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQod2lkdGggLyAyLCBoZWlnaHQgLyAyLCAwLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIsIHdpZHRoICogMC42KTtcblxuICBncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgJyM4MDRlMGYnKTtcbiAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsICcjM2IwMDNiJyk7XG5cbiAgY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xuICBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgcmV0dXJuIGN0eDtcbn07XG5cbnZhciBibGVuZCA9IGZ1bmN0aW9uIChiYWNrZ3JvdW5kLCBmb3JlZ3JvdW5kLCB3aWR0aCwgaGVpZ2h0LCB0cmFuc2Zvcm0pIHtcbiAgdmFyIGJvdHRvbSA9IGJhY2tncm91bmQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICB2YXIgdG9wID0gZm9yZWdyb3VuZC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgZm9yICh2YXIgaSA9IDAsIHNpemUgPSB0b3AuZGF0YS5sZW5ndGg7IGkgPCBzaXplOyBpICs9IDQpIHtcbiAgICAvLyByZWRcbiAgICB0b3AuZGF0YVtpICsgMF0gPSB0cmFuc2Zvcm0oYm90dG9tLmRhdGFbaSArIDBdLCB0b3AuZGF0YVtpICsgMF0pO1xuICAgIC8vIGdyZWVuXG4gICAgdG9wLmRhdGFbaSArIDFdID0gdHJhbnNmb3JtKGJvdHRvbS5kYXRhW2kgKyAxXSwgdG9wLmRhdGFbaSArIDFdKTtcbiAgICAvLyBibHVlXG4gICAgdG9wLmRhdGFbaSArIDJdID0gdHJhbnNmb3JtKGJvdHRvbS5kYXRhW2kgKyAyXSwgdG9wLmRhdGFbaSArIDJdKTtcbiAgICAvLyB0aGUgZm91cnRoIHNsb3QgaXMgYWxwaGEuIFdlIGRvbid0IG5lZWQgdGhhdCAoc28gc2tpcCBieSA0KVxuICB9XG5cbiAgcmV0dXJuIHRvcDtcbn07XG5cbnZhciByZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZpZGVvID0gamooJyN1c2VyLXZpZGVvJyksXG4gICAgICBzZWxmaWUgPSBqaignI3NlbGZpZScpLFxuICAgICAgc3RhcnRDYW1lcmEgPSBqaignI3N0YXJ0LWNhbWVyYScpLFxuICAgICAgc2h1dHRlciA9IGpqKCcjc2h1dHRlcicpLFxuICAgICAgcmVtb3ZlU2VsZmllID0gamooJyNyZW1vdmUtc2VsZmllJyksXG4gICAgICBkb3dubG9hZFNlbGZpZSA9IGpqKCcjZG93bmxvYWQtc2VsZmllJyksXG4gICAgICBjb250cm9sbGVyID0gamooJyNjb250cm9sbGVyJyk7XG5cbiAgdmFyIGdldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5tc0dldFVzZXJNZWRpYTtcblxuICB2YXIgZ2V0VmlkZW8gPSBmdW5jdGlvbiAoKSB7XG4gICAgaGlkZUJ1dHRvbnMoKTtcbiAgfTtcblxuICB2YXIgdGFrZVBob3RvID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdG9yZSA9IGpqKCcjc2VsZmllLXN0b3JlJyksXG4gICAgICAgIGN0eCA9IHN0b3JlLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICB2YXIgd2lkdGggPSB2aWRlby52aWRlb1dpZHRoLFxuICAgICAgICBoZWlnaHQgPSB2aWRlby52aWRlb0hlaWdodDtcblxuICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcbiAgICAgIHN0b3JlLndpZHRoID0gd2lkdGg7XG4gICAgICBzdG9yZS5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgIGN0eC5kcmF3SW1hZ2UodmlkZW8sIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAvKioqKiovXG4gICAgICAvKlxuICAgICAgdmFyIGdyYWRpZW50ID0gdG9hc3RlckdyYWRpZW50KHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICB2YXIgc2NyZWVuID0gYmxlbmQoY3R4LCBncmFkaWVudCwgd2lkdGgsIGhlaWdodCwgZnVuY3Rpb24oYm90dG9tUGl4ZWwsIHRvcFBpeGVsKSB7XG4gICAgICAgIHJldHVybiAyNTUgLSAoMjU1IC0gdG9wUGl4ZWwpICogKDI1NSAtIGJvdHRvbVBpeGVsKSAvIDI1NTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgY29sb3JDb3JyZWN0ZWQgPSBjb2xvck1hdHJpeChzY3JlZW4sIHsgY29udHJhc3Q6IDMwLCBicmlnaHRuZXNzOiAtMzAgfSk7XG4gICAgICBjdHgucHV0SW1hZ2VEYXRhKGNvbG9yQ29ycmVjdGVkLCAwLCAwKTtcbiAgICAgICovXG4gICAgICAvKioqKiovXG5cbiAgICAgIHJldHVybiBzdG9yZS50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaGlkZUJ1dHRvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29udHJvbGxlci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY29udHJvbGxlci5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykucmVwbGFjZSgvXFxzP25vbmUvZywgJycpICsgJyBub25lJyk7XG4gICAgc3RhcnRDYW1lcmEuc2V0QXR0cmlidXRlKCdjbGFzcycsIHN0YXJ0Q2FtZXJhLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS5yZXBsYWNlKC9cXHM/bm9uZS9nLCAnJykgKyAnIG5vbmUnKTtcbiAgfTtcblxuICBpZiAoIWdldFVzZXJNZWRpYSkge1xuICAgIGFsZXJ0KCftmITsnqwg67iM65287Jqw7KCA64qUIOycoOyggCDrr7jrlJTslrTrpbwg7KeA7JuQ7ZWY7KeAIOyViuyKteuLiOuLpC4nKTtcbiAgfSBlbHNlIHtcbiAgICBnZXRVc2VyTWVkaWEuY2FsbChuYXZpZ2F0b3IsIHtcbiAgICAgICAgdmlkZW86IHRydWVcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiAoc3RyZWFtKSB7XG4gICAgICAgIGlmICh3aW5kb3cuVVJMKSB7XG4gICAgICAgICAgdmlkZW8uc3JjID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2aWRlby5zcmMgPSBzdHJlYW07XG4gICAgICAgIH1cblxuICAgICAgICB2aWRlby5vbnBsYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBnZXRWaWRlbygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZpZGVvLnBsYXkoKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGFsZXJ0KCfsubTrqZTrnbwg7Iqk7Yq466a87JeQIOygkeq3vO2VmOuKlCDqs7zsoJUg7KSRIOyXkOufrOqwgCDrsJzsg53tlojsirXri4jri6QuJyk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGFkZEV2ZW50KHN0YXJ0Q2FtZXJhLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIHZpZGVvLnBsYXkoKTtcbiAgICBnZXRWaWRlbygpO1xuICB9KTtcblxuICBhZGRFdmVudChzaHV0dGVyLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBzbmFwID0gdGFrZVBob3RvKCk7XG5cbiAgICBzZWxmaWUuc2V0QXR0cmlidXRlKCdzcmMnLCBzbmFwKTtcbiAgICBkb3dubG9hZFNlbGZpZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBzbmFwKTtcbiAgICBjb250cm9sbGVyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjb250cm9sbGVyLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS5yZXBsYWNlKC9cXHM/bm9uZS9nLCAnJykpO1xuICAgIC8vIHZpZGVvLnBhdXNlKCk7XG4gIH0pO1xuXG4gIGFkZEV2ZW50KHJlbW92ZVNlbGZpZSwgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICBzZWxmaWUuc2V0QXR0cmlidXRlKCdzcmMnLCAnJyk7XG4gICAgY29udHJvbGxlci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY29udHJvbGxlci5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykucmVwbGFjZSgvXFxzP25vbmUvZywgJycpICsgJyBub25lJyk7XG4gICAgLy8gdmlkZW8ucGxheSgpO1xuICB9KTtcbn07XG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
