var colorMatrix=function(){function t(t,e){var a,r,n,s=[];for(a=0;5>a;a++){for(r=0;5>r;r++)s[r]=t[r+5*a];for(r=0;5>r;r++){var i=0;for(n=0;5>n;n++)i+=e[r+5*n]*s[n];t[r+5*a]=i}}}function e(e,r){var n,s=r.brightness||0,i=r.contrast||0,o=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1];0>i?n=127+i/100*127:(n=i%1,n=0===n?a[i]:a[+i]*(1-n)+a[+i+1]*n,n=127*n+127),t(o,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1]),t(o,[1,0,0,0,s,0,1,0,0,s,0,0,1,0,s,0,0,0,1,0,0,0,0,0,1]);for(var c,l,u,d,g=e.data,b=g.length,f=o[0],v=o[1],A=o[2],p=o[3],j=o[4],h=o[5],m=o[6],w=o[7],U=o[8],R=o[9],y=o[10],G=o[11],M=o[12],k=o[13],C=o[14],E=o[15],L=o[16],x=o[17],D=o[18],I=o[19],S=0;b>S;S+=4)c=g[S],l=g[S+1],u=g[S+2],d=g[S+3],g[S]=c*f+l*v+u*A+d*p+j,g[S+1]=c*h+l*m+u*w+d*U+R,g[S+2]=c*y+l*G+u*M+d*k+C,g[S+3]=c*E+l*L+u*x+d*D+I;return e}var a=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];return e}(),toasterGradient=function(t,e){var a=document.createElement("canvas"),r=a.getContext("2d");a.width=t,a.height=e;var n=r.createRadialGradient(t/2,e/2,0,t/2,e/2,.6*t);return n.addColorStop(0,"#804e0f"),n.addColorStop(1,"#3b003b"),r.fillStyle=n,r.fillRect(0,0,t,e),r},blend=function(t,e,a,r,n){for(var s=t.getImageData(0,0,a,r),i=e.getImageData(0,0,a,r),o=0,c=i.data.length;c>o;o+=4)i.data[o+0]=n(s.data[o+0],i.data[o+0]),i.data[o+1]=n(s.data[o+1],i.data[o+1]),i.data[o+2]=n(s.data[o+2],i.data[o+2]);return i},ready=function(){var t=jj("#user-video"),e=jj("#selfie"),a=jj("#start-camera"),r=jj("#shutter"),n=jj("#remove-selfie"),s=jj("#download-selfie"),i=jj("#controller"),o=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,c=function(){u(),t.setAttribute("class",t.getAttribute("class").replace(/\s?none/g,"")),i.setAttribute("class",i.getAttribute("class").replace(/\s?none/g,""))},l=function(){var e=jj("#selfie-store"),a=e.getContext("2d"),r=t.videoWidth,n=t.videoHeight;return r&&n?(e.width=r,e.height=n,a.drawImage(t,0,0,r,n),e.toDataURL("image/png")):void 0},u=function(){i.setAttribute("class",i.getAttribute("class").replace(/\s?none/g,"")+" none"),a.setAttribute("class",a.getAttribute("class").replace(/\s?none/g,"")+" none"),t.setAttribute("class",t.getAttribute("class").replace(/\s?none/g,"")+" none"),e.setAttribute("class",e.getAttribute("class").replace(/\s?none/g,"")+" none")};o?o.call(navigator,{video:!0},function(e){window.URL?t.src=window.URL.createObjectURL(e):t.src=e,t.onplay=function(){c()},t.play()},function(t){alert("카메라 스트림에 접근하는 과정 중 에러가 발생했습니다.")}):alert("현재 브라우저는 유저 미디어를 지원하지 않습니다."),addEvent(a,"click",function(e){t.play(),c()}),addEvent(r,"click",function(t){var a=l();e.setAttribute("src",a),e.setAttribute("class",e.getAttribute("class").replace(/\s?none/g,"")),n.setAttribute("class",n.getAttribute("class").replace(/\s?none/g,"")),s.setAttribute("class",s.getAttribute("class").replace(/\s?none/g,"")),s.setAttribute("href",a)}),addEvent(n,"click",function(t){e.setAttribute("src",""),e.setAttribute("class",e.getAttribute("class").replace(/\s?none/g,"")+" none"),n.setAttribute("class",n.getAttribute("class").replace(/\s?none/g,"")+" none"),s.setAttribute("class",s.getAttribute("class").replace(/\s?none/g,"")+" none")})};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlbGZpZS5taW4uanMiXSwibmFtZXMiOlsiY29sb3JNYXRyaXgiLCJtdWx0aXBseSIsImEiLCJiIiwiaSIsImoiLCJrIiwiY29sIiwidmFsIiwiaW1hZ2VEYXRhIiwib3B0aW9ucyIsIngiLCJicmlnaHRuZXNzIiwiY29udHJhc3QiLCJtYXRyaXgiLCJERUxUQV9JTkRFWCIsInIiLCJnIiwiZGF0YSIsImwiLCJsZW5ndGgiLCJtMCIsIm0xIiwibTIiLCJtMyIsIm00IiwibTUiLCJtNiIsIm03IiwibTgiLCJtOSIsIm0xMCIsIm0xMSIsIm0xMiIsIm0xMyIsIm0xNCIsIm0xNSIsIm0xNiIsIm0xNyIsIm0xOCIsIm0xOSIsInRvYXN0ZXJHcmFkaWVudCIsIndpZHRoIiwiaGVpZ2h0IiwidGV4dHVyZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJncmFkaWVudCIsImNyZWF0ZVJhZGlhbEdyYWRpZW50IiwiYWRkQ29sb3JTdG9wIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJibGVuZCIsImJhY2tncm91bmQiLCJmb3JlZ3JvdW5kIiwidHJhbnNmb3JtIiwiYm90dG9tIiwiZ2V0SW1hZ2VEYXRhIiwidG9wIiwic2l6ZSIsInJlYWR5IiwidmlkZW8iLCJqaiIsInNlbGZpZSIsInN0YXJ0Q2FtZXJhIiwic2h1dHRlciIsInJlbW92ZVNlbGZpZSIsImRvd25sb2FkU2VsZmllIiwiY29udHJvbGxlciIsImdldFVzZXJNZWRpYSIsIm5hdmlnYXRvciIsIndlYmtpdEdldFVzZXJNZWRpYSIsIm1vekdldFVzZXJNZWRpYSIsIm1zR2V0VXNlck1lZGlhIiwiZ2V0VmlkZW8iLCJoaWRlQnV0dG9ucyIsInNldEF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsInJlcGxhY2UiLCJ0YWtlUGhvdG8iLCJzdG9yZSIsInZpZGVvV2lkdGgiLCJ2aWRlb0hlaWdodCIsImRyYXdJbWFnZSIsInRvRGF0YVVSTCIsImNhbGwiLCJzdHJlYW0iLCJ3aW5kb3ciLCJVUkwiLCJzcmMiLCJjcmVhdGVPYmplY3RVUkwiLCJvbnBsYXkiLCJwbGF5IiwiZXJyIiwiYWxlcnQiLCJhZGRFdmVudCIsImUiLCJzbmFwIl0sIm1hcHBpbmdzIjoiQUFTQSxHQUFJQSxhQUFjLFdBZWhCLFFBQVNDLEdBQVVDLEVBQUdDLEdBQ3BCLEdBQUlDLEdBQUdDLEVBQUdDLEVBQUdDLElBRWIsS0FBS0gsRUFBSSxFQUFPLEVBQUpBLEVBQU9BLElBQUssQ0FDdEIsSUFBS0MsRUFBSSxFQUFPLEVBQUpBLEVBQU9BLElBQ2pCRSxFQUFJRixHQUFLSCxFQUFFRyxFQUFRLEVBQUpELEVBRWpCLEtBQUtDLEVBQUksRUFBTyxFQUFKQSxFQUFPQSxJQUFLLENBQ3RCLEdBQUlHLEdBQU0sQ0FDVixLQUFLRixFQUFJLEVBQU8sRUFBSkEsRUFBT0EsSUFDakJFLEdBQU9MLEVBQUVFLEVBQVEsRUFBSkMsR0FBU0MsRUFBSUQsRUFFNUJKLEdBQUVHLEVBQVEsRUFBSkQsR0FBU0ksSUFLckIsUUFBU1IsR0FBYVMsRUFBV0MsR0FDL0IsR0FZSUMsR0FaQUMsRUFBYUYsRUFBUUUsWUFBYyxFQUNuQ0MsRUFBYUgsRUFBUUcsVUFBYyxFQUVuQ0MsR0FDRixFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQ1osRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUNaLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFDWixFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQ1osRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUtDLEdBQVhELEVBQ0ZGLEVBQUksSUFBTUUsRUFBVyxJQUFNLEtBRTNCRixFQUFJRSxFQUFXLEVBR2JGLEVBRFEsSUFBTkEsRUFDRUksRUFBWUYsR0FFWkUsR0FBY0YsSUFBYyxFQUFJRixHQUFLSSxHQUFjRixFQUFZLEdBQUtGLEVBRzFFQSxFQUFRLElBQUpBLEVBQVUsS0FHaEJWLEVBQVVhLEdBQ1JILEVBQUksSUFBSyxFQUFHLEVBQUcsRUFBRyxJQUFPLElBQU1BLEdBQy9CLEVBQUdBLEVBQUksSUFBSyxFQUFHLEVBQUcsSUFB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S0FFOUVaLEVBQWFVLGFBQWEsUUFBU1YsRUFBYVcsYUFBYSxTQUFTQyxRQUFRLFdBQVksS0FDMUZYLEVBQWVTLGFBQWEsUUFBU1QsRUFBZVUsYUFBYSxTQUFTQyxRQUFRLFdBQVksS0FFOUZYLEVBQWVTLGFBQWEsT0FBUXFCLEtBS3RDRixTQUFTN0IsRUFBYyxRQUFTLFNBQVU4QixHQUN4Q2pDLEVBQU9hLGFBQWEsTUFBTyxJQUMzQmIsRUFBT2EsYUFBYSxRQUFTYixFQUFPYyxhQUFhLFNBQVNDLFFBQVEsV0FBWSxJQUFNLFNBRXBGWixFQUFhVSxhQUFhLFFBQVNWLEVBQWFXLGFBQWEsU0FBU0MsUUFBUSxXQUFZLElBQU0sU0FDaEdYLEVBQWVTLGFBQWEsUUFBU1QsRUFBZVUsYUFBYSxTQUFTQyxRQUFRLFdBQVksSUFBTSIsImZpbGUiOiJzZWxmaWUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb2xvciBNYXRyaXhcbiAqXG4gKiBBIHNpbXBsaWZpY2F0aW9uIG9mIHRoZSBjb2xvciBtYXRyaXggY2xhc3MgcHJvdmlkZWQgYnlcbiAqIEVhc2VsSlNcbiAqXG4gKiB3d3cuY3JlYXRlanMuY29tL2RvY3MvZWFzZWxqcy9maWxlcy9lYXNlbGpzX2ZpbHRlcnNfQ29sb3JGaWx0ZXIuanMuaHRtbCNsNDFcbiAqL1xuXG52YXIgY29sb3JNYXRyaXggPSAoZnVuY3Rpb24oKSB7XG4gIHZhciBERUxUQV9JTkRFWCA9IFtcbiAgICAwLCAgICAwLjAxLCAwLjAyLCAwLjA0LCAwLjA1LCAwLjA2LCAwLjA3LCAwLjA4LCAwLjEsICAwLjExLFxuICAgIDAuMTIsIDAuMTQsIDAuMTUsIDAuMTYsIDAuMTcsIDAuMTgsIDAuMjAsIDAuMjEsIDAuMjIsIDAuMjQsXG4gICAgMC4yNSwgMC4yNywgMC4yOCwgMC4zMCwgMC4zMiwgMC4zNCwgMC4zNiwgMC4zOCwgMC40MCwgMC40MixcbiAgICAwLjQ0LCAwLjQ2LCAwLjQ4LCAwLjUsICAwLjUzLCAwLjU2LCAwLjU5LCAwLjYyLCAwLjY1LCAwLjY4LFxuICAgIDAuNzEsIDAuNzQsIDAuNzcsIDAuODAsIDAuODMsIDAuODYsIDAuODksIDAuOTIsIDAuOTUsIDAuOTgsXG4gICAgMS4wLCAgMS4wNiwgMS4xMiwgMS4xOCwgMS4yNCwgMS4zMCwgMS4zNiwgMS40MiwgMS40OCwgMS41NCxcbiAgICAxLjYwLCAxLjY2LCAxLjcyLCAxLjc4LCAxLjg0LCAxLjkwLCAxLjk2LCAyLjAsICAyLjEyLCAyLjI1LFxuICAgIDIuMzcsIDIuNTAsIDIuNjIsIDIuNzUsIDIuODcsIDMuMCwgIDMuMiwgIDMuNCwgIDMuNiwgIDMuOCxcbiAgICA0LjAsICA0LjMsICA0LjcsICA0LjksICA1LjAsICA1LjUsICA2LjAsICA2LjUsICA2LjgsICA3LjAsXG4gICAgNy4zLCAgNy41LCAgNy44LCAgOC4wLCAgOC40LCAgOC43LCAgOS4wLCAgOS40LCAgOS42LCAgOS44LFxuICAgIDEwLjBcbiAgXTtcblxuICBmdW5jdGlvbiBtdWx0aXBseSAoYSwgYikge1xuICAgIHZhciBpLCBqLCBrLCBjb2wgPSBbXTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgIGZvciAoaiA9IDA7IGogPCA1OyBqKyspIHtcbiAgICAgICAgY29sW2pdID0gYVtqICsgaSAqIDVdO1xuICAgICAgfVxuICAgICAgZm9yIChqID0gMDsgaiA8IDU7IGorKykge1xuICAgICAgICB2YXIgdmFsID0gMDtcbiAgICAgICAgZm9yIChrID0gMDsgayA8IDU7IGsrKykge1xuICAgICAgICAgIHZhbCArPSBiW2ogKyBrICogNV0gKiBjb2xba107XG4gICAgICAgIH1cbiAgICAgICAgYVtqICsgaSAqIDVdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBjb2xvck1hdHJpeCAoaW1hZ2VEYXRhLCBvcHRpb25zKSB7XG4gICAgdmFyIGJyaWdodG5lc3MgPSBvcHRpb25zLmJyaWdodG5lc3MgfHwgMDtcbiAgICB2YXIgY29udHJhc3QgICA9IG9wdGlvbnMuY29udHJhc3QgICB8fCAwO1xuXG4gICAgdmFyIG1hdHJpeCA9IFtcbiAgICAgIDEsIDAsIDAsIDAsIDAsXG4gICAgICAwLCAxLCAwLCAwLCAwLFxuICAgICAgMCwgMCwgMSwgMCwgMCxcbiAgICAgIDAsIDAsIDAsIDEsIDAsXG4gICAgICAwLCAwLCAwLCAwLCAxXG4gICAgXTtcblxuICAgIC8vIENvbnRyYXN0XG4gICAgdmFyIHg7XG4gICAgaWYgKGNvbnRyYXN0IDwgMCkge1xuICAgICAgeCA9IDEyNyArIGNvbnRyYXN0IC8gMTAwICogMTI3O1xuICAgIH0gZWxzZSB7XG4gICAgICB4ID0gY29udHJhc3QgJSAxO1xuXG4gICAgICBpZiAoeCA9PT0gMCkge1xuICAgICAgICB4ID0gREVMVEFfSU5ERVhbY29udHJhc3RdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeCA9IERFTFRBX0lOREVYWygrY29udHJhc3QpXSAqICgxIC0geCkgKyBERUxUQV9JTkRFWFsoK2NvbnRyYXN0KSArIDFdICogeDtcbiAgICAgIH1cblxuICAgICAgeCA9IHggKiAxMjcgKyAxMjc7XG4gICAgfVxuXG4gICAgbXVsdGlwbHkgKG1hdHJpeCwgW1xuICAgICAgeCAvIDEyNywgMCwgMCwgMCwgMC41ICogKDEyNyAtIHgpLFxuICAgICAgMCwgeCAvIDEyNywgMCwgMCwgMC41ICogKDEyNyAtIHgpLFxuICAgICAgMCwgMCwgeCAvIDEyNywgMCwgMC41ICogKDEyNyAtIHgpLFxuICAgICAgMCwgMCwgMCwgMSwgMCxcbiAgICAgIDAsIDAsIDAsIDAsIDFcbiAgICBdKTtcblxuICAgIC8vIEJyaWdodG5lc3NcbiAgICBtdWx0aXBseSAobWF0cml4LFtcbiAgICAgIDEsIDAsIDAsIDAsIGJyaWdodG5lc3MsXG4gICAgICAwLCAxLCAwLCAwLCBicmlnaHRuZXNzLFxuICAgICAgMCwgMCwgMSwgMCwgYnJpZ2h0bmVzcyxcbiAgICAgIDAsIDAsIDAsIDEsIDAsXG4gICAgICAwLCAwLCAwLCAwLCAxXG4gICAgXSk7XG5cbiAgICAvLyBBcHBseSBGaWx0ZXJcbiAgICB2YXIgZGF0YSA9IGltYWdlRGF0YS5kYXRhO1xuICAgIHZhciBsID0gZGF0YS5sZW5ndGg7XG4gICAgdmFyIHIsIGcsIGIsIGE7XG4gICAgdmFyIG0wID0gIG1hdHJpeFswXSwgIG0xID0gIG1hdHJpeFsxXSwgIG0yID0gIG1hdHJpeFsyXSwgIG0zID0gIG1hdHJpeFszXSwgIG00ID0gIG1hdHJpeFs0XTtcbiAgICB2YXIgbTUgPSAgbWF0cml4WzVdLCAgbTYgPSAgbWF0cml4WzZdLCAgbTcgPSAgbWF0cml4WzddLCAgbTggPSAgbWF0cml4WzhdLCAgbTkgPSAgbWF0cml4WzldO1xuICAgIHZhciBtMTAgPSBtYXRyaXhbMTBdLCBtMTEgPSBtYXRyaXhbMTFdLCBtMTIgPSBtYXRyaXhbMTJdLCBtMTMgPSBtYXRyaXhbMTNdLCBtMTQgPSBtYXRyaXhbMTRdO1xuICAgIHZhciBtMTUgPSBtYXRyaXhbMTVdLCBtMTYgPSBtYXRyaXhbMTZdLCBtMTcgPSBtYXRyaXhbMTddLCBtMTggPSBtYXRyaXhbMThdLCBtMTkgPSBtYXRyaXhbMTldO1xuXG4gICAgZm9yICh2YXIgaT0wOyBpPGw7IGkrPTQpIHtcbiAgICAgIHIgPSBkYXRhW2ldO1xuICAgICAgZyA9IGRhdGFbaSsxXTtcbiAgICAgIGIgPSBkYXRhW2krMl07XG4gICAgICBhID0gZGF0YVtpKzNdO1xuICAgICAgZGF0YVtpXSA9IHIgKiBtMCArIGcgKiBtMSArIGIgKiBtMiArIGEgKiBtMyArIG00OyAvLyByZWRcbiAgICAgIGRhdGFbaSArIDFdID0gciAqIG01ICsgZyAqIG02ICsgYiAqIG03ICsgYSAqIG04ICsgbTk7IC8vIGdyZWVuXG4gICAgICBkYXRhW2kgKyAyXSA9IHIgKiBtMTAgKyBnICogbTExICsgYiAqIG0xMiArIGEgKiBtMTMgKyBtMTQ7IC8vIGJsdWVcbiAgICAgIGRhdGFbaSArIDNdID0gciAqIG0xNSArIGcgKiBtMTYgKyBiICogbTE3ICsgYSAqIG0xOCArIG0xOTsgLy8gYWxwaGFcbiAgICB9XG5cbiAgICByZXR1cm4gaW1hZ2VEYXRhO1xuICB9XG5cbiAgcmV0dXJuIGNvbG9yTWF0cml4O1xufSkoKTtcblxuLyoqXG4gKiBodHRwczovL3d3dy52aWdldC5jb20vYXJ0aWNsZXMvaW5zdGFncmFtLXN0eWxlLWZpbHRlcnMtaW4taHRtbDUtY2FudmFzXG4gKi9cbnZhciB0b2FzdGVyR3JhZGllbnQgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICB2YXIgdGV4dHVyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICB2YXIgY3R4ID0gdGV4dHVyZS5nZXRDb250ZXh0KCcyZCcpO1xuXG4gIHRleHR1cmUud2lkdGggPSB3aWR0aDtcbiAgdGV4dHVyZS5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgLy8gRmlsbCBhIFJhZGlhbCBHcmFkaWVudFxuICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEL2NyZWF0ZVJhZGlhbEdyYWRpZW50XG4gIHZhciBncmFkaWVudCA9IGN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudCh3aWR0aCAvIDIsIGhlaWdodCAvIDIsIDAsIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMiwgd2lkdGggKiAwLjYpO1xuXG4gIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCAnIzgwNGUwZicpO1xuICBncmFkaWVudC5hZGRDb2xvclN0b3AoMSwgJyMzYjAwM2InKTtcblxuICBjdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7XG4gIGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblxuICByZXR1cm4gY3R4O1xufTtcblxudmFyIGJsZW5kID0gZnVuY3Rpb24gKGJhY2tncm91bmQsIGZvcmVncm91bmQsIHdpZHRoLCBoZWlnaHQsIHRyYW5zZm9ybSkge1xuICB2YXIgYm90dG9tID0gYmFja2dyb3VuZC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gIHZhciB0b3AgPSBmb3JlZ3JvdW5kLmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblxuICBmb3IgKHZhciBpID0gMCwgc2l6ZSA9IHRvcC5kYXRhLmxlbmd0aDsgaSA8IHNpemU7IGkgKz0gNCkge1xuICAgIC8vIHJlZFxuICAgIHRvcC5kYXRhW2kgKyAwXSA9IHRyYW5zZm9ybShib3R0b20uZGF0YVtpICsgMF0sIHRvcC5kYXRhW2kgKyAwXSk7XG4gICAgLy8gZ3JlZW5cbiAgICB0b3AuZGF0YVtpICsgMV0gPSB0cmFuc2Zvcm0oYm90dG9tLmRhdGFbaSArIDFdLCB0b3AuZGF0YVtpICsgMV0pO1xuICAgIC8vIGJsdWVcbiAgICB0b3AuZGF0YVtpICsgMl0gPSB0cmFuc2Zvcm0oYm90dG9tLmRhdGFbaSArIDJdLCB0b3AuZGF0YVtpICsgMl0pO1xuICAgIC8vIHRoZSBmb3VydGggc2xvdCBpcyBhbHBoYS4gV2UgZG9uJ3QgbmVlZCB0aGF0IChzbyBza2lwIGJ5IDQpXG4gIH1cblxuICByZXR1cm4gdG9wO1xufTtcblxudmFyIHJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdmlkZW8gPSBqaignI3VzZXItdmlkZW8nKSxcbiAgICAgIHNlbGZpZSA9IGpqKCcjc2VsZmllJyksXG4gICAgICBzdGFydENhbWVyYSA9IGpqKCcjc3RhcnQtY2FtZXJhJyksXG4gICAgICBzaHV0dGVyID0gamooJyNzaHV0dGVyJyksXG4gICAgICByZW1vdmVTZWxmaWUgPSBqaignI3JlbW92ZS1zZWxmaWUnKSxcbiAgICAgIGRvd25sb2FkU2VsZmllID0gamooJyNkb3dubG9hZC1zZWxmaWUnKSxcbiAgICAgIGNvbnRyb2xsZXIgPSBqaignI2NvbnRyb2xsZXInKTtcblxuICB2YXIgZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLmdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLm1zR2V0VXNlck1lZGlhO1xuXG4gIHZhciBnZXRWaWRlbyA9IGZ1bmN0aW9uICgpIHtcbiAgICBoaWRlQnV0dG9ucygpO1xuICAgIHZpZGVvLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB2aWRlby5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykucmVwbGFjZSgvXFxzP25vbmUvZywgJycpKTtcbiAgICBjb250cm9sbGVyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjb250cm9sbGVyLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS5yZXBsYWNlKC9cXHM/bm9uZS9nLCAnJykpO1xuICB9O1xuXG4gIHZhciB0YWtlUGhvdG8gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN0b3JlID0gamooJyNzZWxmaWUtc3RvcmUnKSxcbiAgICAgICAgY3R4ID0gc3RvcmUuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgIHZhciB3aWR0aCA9IHZpZGVvLnZpZGVvV2lkdGgsXG4gICAgICAgIGhlaWdodCA9IHZpZGVvLnZpZGVvSGVpZ2h0O1xuXG4gICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuICAgICAgc3RvcmUud2lkdGggPSB3aWR0aDtcbiAgICAgIHN0b3JlLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgY3R4LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAgIC8qKioqKi9cbiAgICAgIC8qXG4gICAgICB2YXIgZ3JhZGllbnQgPSB0b2FzdGVyR3JhZGllbnQod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgIHZhciBzY3JlZW4gPSBibGVuZChjdHgsIGdyYWRpZW50LCB3aWR0aCwgaGVpZ2h0LCBmdW5jdGlvbihib3R0b21QaXhlbCwgdG9wUGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIDI1NSAtICgyNTUgLSB0b3BQaXhlbCkgKiAoMjU1IC0gYm90dG9tUGl4ZWwpIC8gMjU1O1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBjb2xvckNvcnJlY3RlZCA9IGNvbG9yTWF0cml4KHNjcmVlbiwgeyBjb250cmFzdDogMzAsIGJyaWdodG5lc3M6IC0zMCB9KTtcbiAgICAgIGN0eC5wdXRJbWFnZURhdGEoY29sb3JDb3JyZWN0ZWQsIDAsIDApO1xuICAgICAgKi9cbiAgICAgIC8qKioqKi9cblxuICAgICAgcmV0dXJuIHN0b3JlLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoaWRlQnV0dG9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb250cm9sbGVyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjb250cm9sbGVyLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS5yZXBsYWNlKC9cXHM/bm9uZS9nLCAnJykgKyAnIG5vbmUnKTtcbiAgICBzdGFydENhbWVyYS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgc3RhcnRDYW1lcmEuZ2V0QXR0cmlidXRlKCdjbGFzcycpLnJlcGxhY2UoL1xccz9ub25lL2csICcnKSArICcgbm9uZScpO1xuICAgIHZpZGVvLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB2aWRlby5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykucmVwbGFjZSgvXFxzP25vbmUvZywgJycpICsgJyBub25lJyk7XG4gICAgc2VsZmllLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBzZWxmaWUuZ2V0QXR0cmlidXRlKCdjbGFzcycpLnJlcGxhY2UoL1xccz9ub25lL2csICcnKSArICcgbm9uZScpO1xuICB9O1xuXG4gIGlmICghZ2V0VXNlck1lZGlhKSB7XG4gICAgYWxlcnQoJ+2YhOyerCDruIzrnbzsmrDsoIDripQg7Jyg7KCAIOuvuOuUlOyWtOulvCDsp4Dsm5DtlZjsp4Ag7JWK7Iq164uI64ukLicpO1xuICB9IGVsc2Uge1xuICAgIGdldFVzZXJNZWRpYS5jYWxsKG5hdmlnYXRvciwge1xuICAgICAgICB2aWRlbzogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uIChzdHJlYW0pIHtcbiAgICAgICAgaWYgKHdpbmRvdy5VUkwpIHtcbiAgICAgICAgICB2aWRlby5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZpZGVvLnNyYyA9IHN0cmVhbTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZpZGVvLm9ucGxheSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGdldFZpZGVvKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmlkZW8ucGxheSgpO1xuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgYWxlcnQoJ+y5tOuplOudvCDsiqTtirjrprzsl5Ag7KCR6re87ZWY64qUIOqzvOyglSDspJEg7JeQ65+s6rCAIOuwnOyDne2WiOyKteuLiOuLpC4nKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgYWRkRXZlbnQoc3RhcnRDYW1lcmEsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmlkZW8ucGxheSgpO1xuICAgIGdldFZpZGVvKCk7XG4gIH0pO1xuXG4gIGFkZEV2ZW50KHNodXR0ZXIsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHNuYXAgPSB0YWtlUGhvdG8oKTtcblxuICAgIHNlbGZpZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNuYXApO1xuICAgIHNlbGZpZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgc2VsZmllLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS5yZXBsYWNlKC9cXHM/bm9uZS9nLCAnJykpO1xuXG4gICAgcmVtb3ZlU2VsZmllLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCByZW1vdmVTZWxmaWUuZ2V0QXR0cmlidXRlKCdjbGFzcycpLnJlcGxhY2UoL1xccz9ub25lL2csICcnKSk7XG4gICAgZG93bmxvYWRTZWxmaWUuc2V0QXR0cmlidXRlKCdjbGFzcycsIGRvd25sb2FkU2VsZmllLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS5yZXBsYWNlKC9cXHM/bm9uZS9nLCAnJykpO1xuXG4gICAgZG93bmxvYWRTZWxmaWUuc2V0QXR0cmlidXRlKCdocmVmJywgc25hcCk7XG5cbiAgICAvLyB2aWRlby5wYXVzZSgpO1xuICB9KTtcblxuICBhZGRFdmVudChyZW1vdmVTZWxmaWUsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgc2VsZmllLnNldEF0dHJpYnV0ZSgnc3JjJywgJycpO1xuICAgIHNlbGZpZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgc2VsZmllLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS5yZXBsYWNlKC9cXHM/bm9uZS9nLCAnJykgKyAnIG5vbmUnKTtcblxuICAgIHJlbW92ZVNlbGZpZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgcmVtb3ZlU2VsZmllLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS5yZXBsYWNlKC9cXHM/bm9uZS9nLCAnJykgKyAnIG5vbmUnKTtcbiAgICBkb3dubG9hZFNlbGZpZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgZG93bmxvYWRTZWxmaWUuZ2V0QXR0cmlidXRlKCdjbGFzcycpLnJlcGxhY2UoL1xccz9ub25lL2csICcnKSArICcgbm9uZScpO1xuXG4gICAgLy8gdmlkZW8ucGxheSgpO1xuICB9KTtcbn07XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
